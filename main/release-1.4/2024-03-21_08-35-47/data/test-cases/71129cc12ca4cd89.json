{"uid":"71129cc12ca4cd89","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1711010125426,"stop":1711010132968,"duration":7542},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711010125616,"stop":1711010125647,"duration":31},"status":"passed","steps":[],"attachments":[{"uid":"9ad6ee8ec1815c0c","name":"stage_yaml","source":"9ad6ee8ec1815c0c.yaml","type":"application/yaml","size":333},{"uid":"2b6f239b2dccfcee","name":"rest_request","source":"2b6f239b2dccfcee.yaml","type":"application/yaml","size":149},{"uid":"197fc681c8e119fc","name":"rest_response","source":"197fc681c8e119fc.yaml","type":"application/yaml","size":5774}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711010125648,"stop":1711010125656,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"3ee3fd12542f5282","name":"stage_yaml","source":"3ee3fd12542f5282.yaml","type":"application/yaml","size":228},{"uid":"2890365488057811","name":"rest_request","source":"2890365488057811.yaml","type":"application/yaml","size":173},{"uid":"a4a7b85864165b57","name":"rest_response","source":"a4a7b85864165b57.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711010125657,"stop":1711010125665,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"4bebd9099f3ea753","name":"stage_yaml","source":"4bebd9099f3ea753.yaml","type":"application/yaml","size":231},{"uid":"832fde5d03fb0301","name":"rest_request","source":"832fde5d03fb0301.yaml","type":"application/yaml","size":173},{"uid":"59dbf26eafad7657","name":"rest_response","source":"59dbf26eafad7657.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711010125666,"stop":1711010125676,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"22c36031ded4b064","name":"stage_yaml","source":"22c36031ded4b064.yaml","type":"application/yaml","size":543},{"uid":"37160d33c82b582e","name":"rest_request","source":"37160d33c82b582e.yaml","type":"application/yaml","size":166},{"uid":"1f21fcca50f2193","name":"rest_response","source":"1f21fcca50f2193.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711010125679,"stop":1711010126691,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"7d96f362dba5a9f3","name":"stage_yaml","source":"7d96f362dba5a9f3.yaml","type":"application/yaml","size":661},{"uid":"49fb3650e733f7cb","name":"rest_request","source":"49fb3650e733f7cb.yaml","type":"application/yaml","size":159},{"uid":"1970e030587583f","name":"rest_response","source":"1970e030587583f.yaml","type":"application/yaml","size":680}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711010126692,"stop":1711010126707,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"cd448bcddd2603a9","name":"stage_yaml","source":"cd448bcddd2603a9.yaml","type":"application/yaml","size":3543},{"uid":"1f400c21a4f45066","name":"rest_request","source":"1f400c21a4f45066.yaml","type":"application/yaml","size":159},{"uid":"d1c6e74697a3058b","name":"rest_response","source":"d1c6e74697a3058b.yaml","type":"application/yaml","size":680}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711010126707,"stop":1711010126717,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"601c501d0a15b7c8","name":"stage_yaml","source":"601c501d0a15b7c8.yaml","type":"application/yaml","size":639},{"uid":"4add5eb4093cebd8","name":"rest_request","source":"4add5eb4093cebd8.yaml","type":"application/yaml","size":229},{"uid":"8de23b3969134d8e","name":"rest_response","source":"8de23b3969134d8e.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711010126719,"stop":1711010127732,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"e350d74f5b6fce88","name":"stage_yaml","source":"e350d74f5b6fce88.yaml","type":"application/yaml","size":679},{"uid":"b351293d7e78cf9f","name":"rest_request","source":"b351293d7e78cf9f.yaml","type":"application/yaml","size":159},{"uid":"5ae5ad2d2f6beecb","name":"rest_response","source":"5ae5ad2d2f6beecb.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711010127733,"stop":1711010127748,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"cb741c35e77bb408","name":"stage_yaml","source":"cb741c35e77bb408.yaml","type":"application/yaml","size":3157},{"uid":"1def945ae04603e4","name":"rest_request","source":"1def945ae04603e4.yaml","type":"application/yaml","size":159},{"uid":"2240ca505a164bec","name":"rest_response","source":"2240ca505a164bec.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711010127749,"stop":1711010127759,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"df0de3d638f61e6f","name":"stage_yaml","source":"df0de3d638f61e6f.yaml","type":"application/yaml","size":639},{"uid":"9c77584457e932b5","name":"rest_request","source":"9c77584457e932b5.yaml","type":"application/yaml","size":229},{"uid":"b86712d75d5d0964","name":"rest_response","source":"b86712d75d5d0964.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711010127761,"stop":1711010128773,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"68aec6da1145c6ac","name":"stage_yaml","source":"68aec6da1145c6ac.yaml","type":"application/yaml","size":679},{"uid":"d1a2d5e1dea9ac27","name":"rest_request","source":"d1a2d5e1dea9ac27.yaml","type":"application/yaml","size":159},{"uid":"1112412e2a823899","name":"rest_response","source":"1112412e2a823899.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711010128774,"stop":1711010128788,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"aa1b4fbd202d459d","name":"stage_yaml","source":"aa1b4fbd202d459d.yaml","type":"application/yaml","size":3157},{"uid":"88ec93f3e0bcf195","name":"rest_request","source":"88ec93f3e0bcf195.yaml","type":"application/yaml","size":159},{"uid":"d8f4bd37ecf2e41b","name":"rest_response","source":"d8f4bd37ecf2e41b.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711010128789,"stop":1711010128799,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"32ee48b98eaa0dbd","name":"stage_yaml","source":"32ee48b98eaa0dbd.yaml","type":"application/yaml","size":639},{"uid":"852d42614dc186bd","name":"rest_request","source":"852d42614dc186bd.yaml","type":"application/yaml","size":233},{"uid":"230b4de57e830801","name":"rest_response","source":"230b4de57e830801.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711010128801,"stop":1711010129813,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"257491156968c666","name":"stage_yaml","source":"257491156968c666.yaml","type":"application/yaml","size":685},{"uid":"41f1ed2899041fdd","name":"rest_request","source":"41f1ed2899041fdd.yaml","type":"application/yaml","size":159},{"uid":"60b7359c6eb4a59","name":"rest_response","source":"60b7359c6eb4a59.yaml","type":"application/yaml","size":575}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711010129814,"stop":1711010129832,"duration":18},"status":"passed","steps":[],"attachments":[{"uid":"e551d8ed8b9f5adb","name":"stage_yaml","source":"e551d8ed8b9f5adb.yaml","type":"application/yaml","size":2234},{"uid":"3be980c478636849","name":"rest_request","source":"3be980c478636849.yaml","type":"application/yaml","size":159},{"uid":"da8b8974b983f809","name":"rest_response","source":"da8b8974b983f809.yaml","type":"application/yaml","size":575}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711010129833,"stop":1711010129843,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"2fa6f157f05d2f8a","name":"stage_yaml","source":"2fa6f157f05d2f8a.yaml","type":"application/yaml","size":631},{"uid":"2c8b199aa8fb6651","name":"rest_request","source":"2c8b199aa8fb6651.yaml","type":"application/yaml","size":227},{"uid":"31e92ab2ee2ca713","name":"rest_response","source":"31e92ab2ee2ca713.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711010129845,"stop":1711010130856,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"aec3ff0862106a88","name":"stage_yaml","source":"aec3ff0862106a88.yaml","type":"application/yaml","size":685},{"uid":"4aa996d1bb74ba4c","name":"rest_request","source":"4aa996d1bb74ba4c.yaml","type":"application/yaml","size":159},{"uid":"5b682a7df559fd81","name":"rest_response","source":"5b682a7df559fd81.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711010130858,"stop":1711010130870,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"f0c93f6fdf06d58a","name":"stage_yaml","source":"f0c93f6fdf06d58a.yaml","type":"application/yaml","size":2230},{"uid":"e0e5af819c8577ef","name":"rest_request","source":"e0e5af819c8577ef.yaml","type":"application/yaml","size":159},{"uid":"bdb73c87ce93ded0","name":"rest_response","source":"bdb73c87ce93ded0.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711010130871,"stop":1711010130880,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"b10c0776a3bdd82c","name":"stage_yaml","source":"b10c0776a3bdd82c.yaml","type":"application/yaml","size":599},{"uid":"63f1b832b662e200","name":"rest_request","source":"63f1b832b662e200.yaml","type":"application/yaml","size":227},{"uid":"f0ddec3ddec0d9ff","name":"rest_response","source":"f0ddec3ddec0d9ff.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711010130883,"stop":1711010131895,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"4abd5bb5fd6cbacb","name":"stage_yaml","source":"4abd5bb5fd6cbacb.yaml","type":"application/yaml","size":679},{"uid":"fea20ed82641e04b","name":"rest_request","source":"fea20ed82641e04b.yaml","type":"application/yaml","size":159},{"uid":"5b4509cb1213cff6","name":"rest_response","source":"5b4509cb1213cff6.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711010131896,"stop":1711010131909,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"b9dfa1a55e908a76","name":"stage_yaml","source":"b9dfa1a55e908a76.yaml","type":"application/yaml","size":3125},{"uid":"b6ad66429bb44de5","name":"rest_request","source":"b6ad66429bb44de5.yaml","type":"application/yaml","size":159},{"uid":"8431c7a9869ac861","name":"rest_response","source":"8431c7a9869ac861.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711010131910,"stop":1711010131920,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"8c43f0cb44a110d","name":"stage_yaml","source":"8c43f0cb44a110d.yaml","type":"application/yaml","size":640},{"uid":"d75914a302fe8963","name":"rest_request","source":"d75914a302fe8963.yaml","type":"application/yaml","size":229},{"uid":"9209905c1ab2d321","name":"rest_response","source":"9209905c1ab2d321.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711010131923,"stop":1711010132935,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"120d20524bb044bf","name":"stage_yaml","source":"120d20524bb044bf.yaml","type":"application/yaml","size":680},{"uid":"d21f5315876a8de5","name":"rest_request","source":"d21f5315876a8de5.yaml","type":"application/yaml","size":159},{"uid":"2233f725b051a83c","name":"rest_response","source":"2233f725b051a83c.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711010132937,"stop":1711010132950,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"d4174095f87099f3","name":"stage_yaml","source":"d4174095f87099f3.yaml","type":"application/yaml","size":3160},{"uid":"39c2bd01b325cea","name":"rest_request","source":"39c2bd01b325cea.yaml","type":"application/yaml","size":159},{"uid":"f34e569b428a2a79","name":"rest_response","source":"f34e569b428a2a79.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711010132951,"stop":1711010132959,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"d0cc3b31a393e5a7","name":"stage_yaml","source":"d0cc3b31a393e5a7.yaml","type":"application/yaml","size":276},{"uid":"c11b48c13a9b9d73","name":"rest_request","source":"c11b48c13a9b9d73.yaml","type":"application/yaml","size":173},{"uid":"ec61093691d0fbb8","name":"rest_response","source":"ec61093691d0fbb8.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711010132960,"stop":1711010132968,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"fa338dbbe3d54f95","name":"stage_yaml","source":"fa338dbbe3d54f95.yaml","type":"application/yaml","size":256},{"uid":"4ff89a7873b059eb","name":"rest_request","source":"4ff89a7873b059eb.yaml","type":"application/yaml","size":172},{"uid":"77390856112796ca","name":"rest_response","source":"77390856112796ca.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"c6547c83817b"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":345,"unknown":0,"total":360},"items":[{"uid":"d3018c8f24ad3c61","status":"passed","time":{"start":1710923752449,"stop":1710923759978,"duration":7529}},{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}},{"uid":"3693a0d7d20df2f5","status":"passed","time":{"start":1709454594886,"stop":1709454602407,"duration":7521}},{"uid":"9be3aae049011bee","status":"passed","time":{"start":1709368102024,"stop":1709368109557,"duration":7533}},{"uid":"653c091d9997b6f3","status":"passed","time":{"start":1709281736635,"stop":1709281744148,"duration":7513}}]},"tags":[]},"source":"71129cc12ca4cd89.json","parameterValues":[]}