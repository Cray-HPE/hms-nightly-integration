{"uid":"f81c8d6759daf3f","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1711442100492,"stop":1711442108034,"duration":7542},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711442100666,"stop":1711442100698,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"f562f9a53a64292b","name":"stage_yaml","source":"f562f9a53a64292b.yaml","type":"application/yaml","size":333},{"uid":"d7dcf3f0f933264b","name":"rest_request","source":"d7dcf3f0f933264b.yaml","type":"application/yaml","size":149},{"uid":"7a798acd437bea04","name":"rest_response","source":"7a798acd437bea04.yaml","type":"application/yaml","size":5773}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711442100698,"stop":1711442100707,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"38b183b2498cc70b","name":"stage_yaml","source":"38b183b2498cc70b.yaml","type":"application/yaml","size":228},{"uid":"ae7bde005e57d62c","name":"rest_request","source":"ae7bde005e57d62c.yaml","type":"application/yaml","size":173},{"uid":"5010795d5e235873","name":"rest_response","source":"5010795d5e235873.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711442100708,"stop":1711442100716,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"36057a745c83e2da","name":"stage_yaml","source":"36057a745c83e2da.yaml","type":"application/yaml","size":231},{"uid":"d3270944b3319f3d","name":"rest_request","source":"d3270944b3319f3d.yaml","type":"application/yaml","size":173},{"uid":"ae19ba486beba217","name":"rest_response","source":"ae19ba486beba217.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711442100717,"stop":1711442100728,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"3954d498d2267fa1","name":"stage_yaml","source":"3954d498d2267fa1.yaml","type":"application/yaml","size":543},{"uid":"f441b79880f3d22","name":"rest_request","source":"f441b79880f3d22.yaml","type":"application/yaml","size":166},{"uid":"369163638cc74748","name":"rest_response","source":"369163638cc74748.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711442100730,"stop":1711442101744,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"b2ce105294028e26","name":"stage_yaml","source":"b2ce105294028e26.yaml","type":"application/yaml","size":661},{"uid":"80fd557fd8dee2eb","name":"rest_request","source":"80fd557fd8dee2eb.yaml","type":"application/yaml","size":159},{"uid":"b4b91e205953c11a","name":"rest_response","source":"b4b91e205953c11a.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711442101745,"stop":1711442101760,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"9e513f8d10e7a255","name":"stage_yaml","source":"9e513f8d10e7a255.yaml","type":"application/yaml","size":3543},{"uid":"fe83f194ea99b30","name":"rest_request","source":"fe83f194ea99b30.yaml","type":"application/yaml","size":159},{"uid":"72b4383387ca627","name":"rest_response","source":"72b4383387ca627.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711442101761,"stop":1711442101771,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6aaa41359e6e9ebb","name":"stage_yaml","source":"6aaa41359e6e9ebb.yaml","type":"application/yaml","size":639},{"uid":"e07467e2d7dbfb66","name":"rest_request","source":"e07467e2d7dbfb66.yaml","type":"application/yaml","size":229},{"uid":"9acab62fefc320d","name":"rest_response","source":"9acab62fefc320d.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711442101774,"stop":1711442102789,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"3a7d3b0713801ca1","name":"stage_yaml","source":"3a7d3b0713801ca1.yaml","type":"application/yaml","size":679},{"uid":"e36ddb2f6dc6fee0","name":"rest_request","source":"e36ddb2f6dc6fee0.yaml","type":"application/yaml","size":159},{"uid":"3e448eacdb8f99c7","name":"rest_response","source":"3e448eacdb8f99c7.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711442102790,"stop":1711442102805,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"b077957559d963c6","name":"stage_yaml","source":"b077957559d963c6.yaml","type":"application/yaml","size":3157},{"uid":"317b8bdaf63484e2","name":"rest_request","source":"317b8bdaf63484e2.yaml","type":"application/yaml","size":159},{"uid":"b35d9977c4e22163","name":"rest_response","source":"b35d9977c4e22163.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711442102806,"stop":1711442102818,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"47e290b4f9fd0085","name":"stage_yaml","source":"47e290b4f9fd0085.yaml","type":"application/yaml","size":639},{"uid":"5ad8051cb4437068","name":"rest_request","source":"5ad8051cb4437068.yaml","type":"application/yaml","size":229},{"uid":"e6a48e9ccc89f53d","name":"rest_response","source":"e6a48e9ccc89f53d.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711442102820,"stop":1711442103834,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"a12ec7f769c0870f","name":"stage_yaml","source":"a12ec7f769c0870f.yaml","type":"application/yaml","size":679},{"uid":"5feb62c271957b51","name":"rest_request","source":"5feb62c271957b51.yaml","type":"application/yaml","size":159},{"uid":"a903e72ba4c2e48","name":"rest_response","source":"a903e72ba4c2e48.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711442103835,"stop":1711442103849,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"e45e27d8a3cbe61a","name":"stage_yaml","source":"e45e27d8a3cbe61a.yaml","type":"application/yaml","size":3157},{"uid":"c6a340b2672efd66","name":"rest_request","source":"c6a340b2672efd66.yaml","type":"application/yaml","size":159},{"uid":"1485adc58ffcc195","name":"rest_response","source":"1485adc58ffcc195.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711442103850,"stop":1711442103860,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"559929bccdaeda49","name":"stage_yaml","source":"559929bccdaeda49.yaml","type":"application/yaml","size":639},{"uid":"2749326d7e058070","name":"rest_request","source":"2749326d7e058070.yaml","type":"application/yaml","size":233},{"uid":"cf9df773b3cdad20","name":"rest_response","source":"cf9df773b3cdad20.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711442103863,"stop":1711442104874,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"e39e7682276a9fe4","name":"stage_yaml","source":"e39e7682276a9fe4.yaml","type":"application/yaml","size":685},{"uid":"596d7037a3bc47fe","name":"rest_request","source":"596d7037a3bc47fe.yaml","type":"application/yaml","size":159},{"uid":"45624da7651977a5","name":"rest_response","source":"45624da7651977a5.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711442104875,"stop":1711442104888,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"51dcd7be1f32bbfc","name":"stage_yaml","source":"51dcd7be1f32bbfc.yaml","type":"application/yaml","size":2234},{"uid":"577e981a06cb99f","name":"rest_request","source":"577e981a06cb99f.yaml","type":"application/yaml","size":159},{"uid":"a6b27f15019c9713","name":"rest_response","source":"a6b27f15019c9713.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711442104889,"stop":1711442104900,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"e1e6085749e4163c","name":"stage_yaml","source":"e1e6085749e4163c.yaml","type":"application/yaml","size":631},{"uid":"ecee15d2a549d852","name":"rest_request","source":"ecee15d2a549d852.yaml","type":"application/yaml","size":227},{"uid":"a2d99d41778a4d0f","name":"rest_response","source":"a2d99d41778a4d0f.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711442104902,"stop":1711442105914,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"e89a585237ebd64c","name":"stage_yaml","source":"e89a585237ebd64c.yaml","type":"application/yaml","size":685},{"uid":"d79fa8c64c311717","name":"rest_request","source":"d79fa8c64c311717.yaml","type":"application/yaml","size":159},{"uid":"97d31205fe0551a4","name":"rest_response","source":"97d31205fe0551a4.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711442105915,"stop":1711442105928,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"a184458645f52c13","name":"stage_yaml","source":"a184458645f52c13.yaml","type":"application/yaml","size":2230},{"uid":"ba22bbe21b7aaa87","name":"rest_request","source":"ba22bbe21b7aaa87.yaml","type":"application/yaml","size":159},{"uid":"552c5564796be5ff","name":"rest_response","source":"552c5564796be5ff.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711442105929,"stop":1711442105940,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"ccc4398e00dc69d8","name":"stage_yaml","source":"ccc4398e00dc69d8.yaml","type":"application/yaml","size":599},{"uid":"5942434c608dd948","name":"rest_request","source":"5942434c608dd948.yaml","type":"application/yaml","size":227},{"uid":"a2a5ad26df2d508c","name":"rest_response","source":"a2a5ad26df2d508c.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711442105943,"stop":1711442106956,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"1f0f0291b2d53f61","name":"stage_yaml","source":"1f0f0291b2d53f61.yaml","type":"application/yaml","size":679},{"uid":"b0b45f28b8cd6764","name":"rest_request","source":"b0b45f28b8cd6764.yaml","type":"application/yaml","size":159},{"uid":"b7d7aa1359583b47","name":"rest_response","source":"b7d7aa1359583b47.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711442106957,"stop":1711442106971,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"2e456614e24c3d97","name":"stage_yaml","source":"2e456614e24c3d97.yaml","type":"application/yaml","size":3125},{"uid":"cb9fc7e9a0b1a11f","name":"rest_request","source":"cb9fc7e9a0b1a11f.yaml","type":"application/yaml","size":159},{"uid":"1363a8e6f019d3b7","name":"rest_response","source":"1363a8e6f019d3b7.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711442106972,"stop":1711442106983,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"aa036d4c0480567c","name":"stage_yaml","source":"aa036d4c0480567c.yaml","type":"application/yaml","size":640},{"uid":"1df1bee31947460","name":"rest_request","source":"1df1bee31947460.yaml","type":"application/yaml","size":227},{"uid":"a9e86a4efe31ad29","name":"rest_response","source":"a9e86a4efe31ad29.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711442106986,"stop":1711442107998,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"d680ed4c1bc5ea50","name":"stage_yaml","source":"d680ed4c1bc5ea50.yaml","type":"application/yaml","size":680},{"uid":"5eff2c9d3054edc6","name":"rest_request","source":"5eff2c9d3054edc6.yaml","type":"application/yaml","size":159},{"uid":"9b3e87838b86f629","name":"rest_response","source":"9b3e87838b86f629.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711442107999,"stop":1711442108014,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"8c0fc111145f3884","name":"stage_yaml","source":"8c0fc111145f3884.yaml","type":"application/yaml","size":3160},{"uid":"f773de17bb8bd6af","name":"rest_request","source":"f773de17bb8bd6af.yaml","type":"application/yaml","size":159},{"uid":"69ecff3a20e22487","name":"rest_response","source":"69ecff3a20e22487.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711442108015,"stop":1711442108024,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"c98638254cc11317","name":"stage_yaml","source":"c98638254cc11317.yaml","type":"application/yaml","size":276},{"uid":"24db628f50c6a2e6","name":"rest_request","source":"24db628f50c6a2e6.yaml","type":"application/yaml","size":173},{"uid":"eb6d16936ade46eb","name":"rest_response","source":"eb6d16936ade46eb.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711442108025,"stop":1711442108033,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"d5f277b1677e1e3f","name":"stage_yaml","source":"d5f277b1677e1e3f.yaml","type":"application/yaml","size":256},{"uid":"e53d0128538427ea","name":"rest_request","source":"e53d0128538427ea.yaml","type":"application/yaml","size":172},{"uid":"4dbbc60719e68aaf","name":"rest_response","source":"4dbbc60719e68aaf.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"478fc18c8b40"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":350,"unknown":0,"total":365},"items":[{"uid":"f5d5743887bbf1bc","status":"passed","time":{"start":1711355853708,"stop":1711355861239,"duration":7531}},{"uid":"e5cb16d55553db81","status":"passed","time":{"start":1711269311798,"stop":1711269319333,"duration":7535}},{"uid":"6e3d715c2ae590b2","status":"passed","time":{"start":1711183002278,"stop":1711183009803,"duration":7525}},{"uid":"3bc886f27a692ed8","status":"passed","time":{"start":1711096543203,"stop":1711096550727,"duration":7524}},{"uid":"71129cc12ca4cd89","status":"passed","time":{"start":1711010125426,"stop":1711010132968,"duration":7542}},{"uid":"d3018c8f24ad3c61","status":"passed","time":{"start":1710923752449,"stop":1710923759978,"duration":7529}},{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}}]},"tags":[]},"source":"f81c8d6759daf3f.json","parameterValues":[]}