{"uid":"f5d5743887bbf1bc","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1711355853708,"stop":1711355861239,"duration":7531},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711355853881,"stop":1711355853918,"duration":37},"status":"passed","steps":[],"attachments":[{"uid":"5c091446a5fc8659","name":"stage_yaml","source":"5c091446a5fc8659.yaml","type":"application/yaml","size":333},{"uid":"98f1b5bea2454a39","name":"rest_request","source":"98f1b5bea2454a39.yaml","type":"application/yaml","size":149},{"uid":"2af04e4ba6971c4","name":"rest_response","source":"2af04e4ba6971c4.yaml","type":"application/yaml","size":5771}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711355853920,"stop":1711355853932,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"125777a10d665d65","name":"stage_yaml","source":"125777a10d665d65.yaml","type":"application/yaml","size":228},{"uid":"7b48644e5f3e402a","name":"rest_request","source":"7b48644e5f3e402a.yaml","type":"application/yaml","size":173},{"uid":"de449708db4d39ca","name":"rest_response","source":"de449708db4d39ca.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711355853933,"stop":1711355853941,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"247495774783d846","name":"stage_yaml","source":"247495774783d846.yaml","type":"application/yaml","size":231},{"uid":"3bd11e90510635d2","name":"rest_request","source":"3bd11e90510635d2.yaml","type":"application/yaml","size":173},{"uid":"26662b438c55d365","name":"rest_response","source":"26662b438c55d365.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711355853941,"stop":1711355853951,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"a8eb4d09e06d75a2","name":"stage_yaml","source":"a8eb4d09e06d75a2.yaml","type":"application/yaml","size":543},{"uid":"95f1fd79b32d7f24","name":"rest_request","source":"95f1fd79b32d7f24.yaml","type":"application/yaml","size":166},{"uid":"6b97d2383ec1c910","name":"rest_response","source":"6b97d2383ec1c910.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711355853953,"stop":1711355854966,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"c67b25a8fddcdd71","name":"stage_yaml","source":"c67b25a8fddcdd71.yaml","type":"application/yaml","size":661},{"uid":"cbfc9e3feb690024","name":"rest_request","source":"cbfc9e3feb690024.yaml","type":"application/yaml","size":159},{"uid":"2f7766dc37deeb40","name":"rest_response","source":"2f7766dc37deeb40.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711355854967,"stop":1711355854982,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"80dcc9c68d7fcf66","name":"stage_yaml","source":"80dcc9c68d7fcf66.yaml","type":"application/yaml","size":3543},{"uid":"fc483cf7b250196e","name":"rest_request","source":"fc483cf7b250196e.yaml","type":"application/yaml","size":159},{"uid":"55d2f70f6876ee6d","name":"rest_response","source":"55d2f70f6876ee6d.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711355854983,"stop":1711355854994,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"f3c2ed06e63a9539","name":"stage_yaml","source":"f3c2ed06e63a9539.yaml","type":"application/yaml","size":639},{"uid":"45149cfdaf2c46b","name":"rest_request","source":"45149cfdaf2c46b.yaml","type":"application/yaml","size":229},{"uid":"86798ff3bbeee761","name":"rest_response","source":"86798ff3bbeee761.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711355854996,"stop":1711355856008,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"c919ba6aee14773b","name":"stage_yaml","source":"c919ba6aee14773b.yaml","type":"application/yaml","size":679},{"uid":"6470b35e05ee8b98","name":"rest_request","source":"6470b35e05ee8b98.yaml","type":"application/yaml","size":159},{"uid":"472d1bd63b2dc02e","name":"rest_response","source":"472d1bd63b2dc02e.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711355856009,"stop":1711355856023,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"564de516026f4c5","name":"stage_yaml","source":"564de516026f4c5.yaml","type":"application/yaml","size":3157},{"uid":"b54f816a4c11a4ff","name":"rest_request","source":"b54f816a4c11a4ff.yaml","type":"application/yaml","size":159},{"uid":"a5544012cb995c3b","name":"rest_response","source":"a5544012cb995c3b.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711355856024,"stop":1711355856034,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"85a2b510966f0546","name":"stage_yaml","source":"85a2b510966f0546.yaml","type":"application/yaml","size":639},{"uid":"13db1a3a482d569","name":"rest_request","source":"13db1a3a482d569.yaml","type":"application/yaml","size":229},{"uid":"a4858ebf696c0506","name":"rest_response","source":"a4858ebf696c0506.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711355856036,"stop":1711355857049,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"8d7f502a6449147","name":"stage_yaml","source":"8d7f502a6449147.yaml","type":"application/yaml","size":679},{"uid":"d54f5c8534eb3c16","name":"rest_request","source":"d54f5c8534eb3c16.yaml","type":"application/yaml","size":159},{"uid":"725e8a4e303ac70c","name":"rest_response","source":"725e8a4e303ac70c.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711355857050,"stop":1711355857063,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"8b2af5277e209de","name":"stage_yaml","source":"8b2af5277e209de.yaml","type":"application/yaml","size":3157},{"uid":"ea8b2e3848fb200d","name":"rest_request","source":"ea8b2e3848fb200d.yaml","type":"application/yaml","size":159},{"uid":"57e403000976eb0b","name":"rest_response","source":"57e403000976eb0b.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711355857064,"stop":1711355857074,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"97116b96f6fc1179","name":"stage_yaml","source":"97116b96f6fc1179.yaml","type":"application/yaml","size":639},{"uid":"6c413f517dc7d478","name":"rest_request","source":"6c413f517dc7d478.yaml","type":"application/yaml","size":233},{"uid":"ea76427f39bdfbf4","name":"rest_response","source":"ea76427f39bdfbf4.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711355857077,"stop":1711355858088,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"dc4f1290082d155d","name":"stage_yaml","source":"dc4f1290082d155d.yaml","type":"application/yaml","size":685},{"uid":"cb2d598c6f622201","name":"rest_request","source":"cb2d598c6f622201.yaml","type":"application/yaml","size":159},{"uid":"f954a81896bda0d7","name":"rest_response","source":"f954a81896bda0d7.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711355858089,"stop":1711355858102,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"19ac1e3ed685f195","name":"stage_yaml","source":"19ac1e3ed685f195.yaml","type":"application/yaml","size":2234},{"uid":"81010a1f7a4244ea","name":"rest_request","source":"81010a1f7a4244ea.yaml","type":"application/yaml","size":159},{"uid":"278c05fe1556689e","name":"rest_response","source":"278c05fe1556689e.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711355858103,"stop":1711355858113,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"67ca89921c93b851","name":"stage_yaml","source":"67ca89921c93b851.yaml","type":"application/yaml","size":631},{"uid":"b512a5b2ee470811","name":"rest_request","source":"b512a5b2ee470811.yaml","type":"application/yaml","size":227},{"uid":"cdb17ec5b65cc8c9","name":"rest_response","source":"cdb17ec5b65cc8c9.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711355858115,"stop":1711355859126,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"79634e326d3bc534","name":"stage_yaml","source":"79634e326d3bc534.yaml","type":"application/yaml","size":685},{"uid":"73b63de036803b65","name":"rest_request","source":"73b63de036803b65.yaml","type":"application/yaml","size":159},{"uid":"240446ea759229fd","name":"rest_response","source":"240446ea759229fd.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711355859128,"stop":1711355859140,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"52925488946a941e","name":"stage_yaml","source":"52925488946a941e.yaml","type":"application/yaml","size":2230},{"uid":"f0140653e2f3e954","name":"rest_request","source":"f0140653e2f3e954.yaml","type":"application/yaml","size":159},{"uid":"ecc1a28ef4c8f23c","name":"rest_response","source":"ecc1a28ef4c8f23c.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711355859141,"stop":1711355859151,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"63175cc372035c4d","name":"stage_yaml","source":"63175cc372035c4d.yaml","type":"application/yaml","size":599},{"uid":"7800ce3171f9fb29","name":"rest_request","source":"7800ce3171f9fb29.yaml","type":"application/yaml","size":227},{"uid":"fe909901a52ca451","name":"rest_response","source":"fe909901a52ca451.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711355859153,"stop":1711355860166,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"69ed155c5ac18b84","name":"stage_yaml","source":"69ed155c5ac18b84.yaml","type":"application/yaml","size":679},{"uid":"3112bb2d4514e52a","name":"rest_request","source":"3112bb2d4514e52a.yaml","type":"application/yaml","size":159},{"uid":"96335aedafc9892c","name":"rest_response","source":"96335aedafc9892c.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711355860167,"stop":1711355860181,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"a9e29552321eecf4","name":"stage_yaml","source":"a9e29552321eecf4.yaml","type":"application/yaml","size":3125},{"uid":"3c7426855dfcf30a","name":"rest_request","source":"3c7426855dfcf30a.yaml","type":"application/yaml","size":159},{"uid":"62f20e8e886669af","name":"rest_response","source":"62f20e8e886669af.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711355860182,"stop":1711355860192,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"40010263113eb1e7","name":"stage_yaml","source":"40010263113eb1e7.yaml","type":"application/yaml","size":640},{"uid":"90cb5d344e30d58f","name":"rest_request","source":"90cb5d344e30d58f.yaml","type":"application/yaml","size":227},{"uid":"2d1a6490f083ae2","name":"rest_response","source":"2d1a6490f083ae2.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711355860194,"stop":1711355861206,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"5333655942086adb","name":"stage_yaml","source":"5333655942086adb.yaml","type":"application/yaml","size":680},{"uid":"cbca13b853cdeb51","name":"rest_request","source":"cbca13b853cdeb51.yaml","type":"application/yaml","size":159},{"uid":"190308d67d48d0c7","name":"rest_response","source":"190308d67d48d0c7.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711355861207,"stop":1711355861221,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"ad7c84fd2ad78a05","name":"stage_yaml","source":"ad7c84fd2ad78a05.yaml","type":"application/yaml","size":3160},{"uid":"257b4c6313282c86","name":"rest_request","source":"257b4c6313282c86.yaml","type":"application/yaml","size":159},{"uid":"349a0dfe2d5efdf2","name":"rest_response","source":"349a0dfe2d5efdf2.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711355861222,"stop":1711355861230,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"fb2d4866d42e3c4c","name":"stage_yaml","source":"fb2d4866d42e3c4c.yaml","type":"application/yaml","size":276},{"uid":"c85ecd0eaba1f46f","name":"rest_request","source":"c85ecd0eaba1f46f.yaml","type":"application/yaml","size":173},{"uid":"2cbdd8519b3071d7","name":"rest_response","source":"2cbdd8519b3071d7.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711355861231,"stop":1711355861239,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"8bc03a1c55b05867","name":"stage_yaml","source":"8bc03a1c55b05867.yaml","type":"application/yaml","size":256},{"uid":"47445b0462947479","name":"rest_request","source":"47445b0462947479.yaml","type":"application/yaml","size":173},{"uid":"48f69d36449b918e","name":"rest_response","source":"48f69d36449b918e.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"c2579f5c2294"},{"name":"thread","value":"9-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":349,"unknown":0,"total":364},"items":[{"uid":"e5cb16d55553db81","status":"passed","time":{"start":1711269311798,"stop":1711269319333,"duration":7535}},{"uid":"6e3d715c2ae590b2","status":"passed","time":{"start":1711183002278,"stop":1711183009803,"duration":7525}},{"uid":"3bc886f27a692ed8","status":"passed","time":{"start":1711096543203,"stop":1711096550727,"duration":7524}},{"uid":"71129cc12ca4cd89","status":"passed","time":{"start":1711010125426,"stop":1711010132968,"duration":7542}},{"uid":"d3018c8f24ad3c61","status":"passed","time":{"start":1710923752449,"stop":1710923759978,"duration":7529}},{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}}]},"tags":[]},"source":"f5d5743887bbf1bc.json","parameterValues":[]}