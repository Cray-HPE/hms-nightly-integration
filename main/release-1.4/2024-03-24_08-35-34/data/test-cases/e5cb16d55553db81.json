{"uid":"e5cb16d55553db81","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1711269311798,"stop":1711269319333,"duration":7535},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711269311973,"stop":1711269312005,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"2e7ae75f97ce3968","name":"stage_yaml","source":"2e7ae75f97ce3968.yaml","type":"application/yaml","size":333},{"uid":"9353b60e3a4a6c62","name":"rest_request","source":"9353b60e3a4a6c62.yaml","type":"application/yaml","size":149},{"uid":"a71c4a030ed2e887","name":"rest_response","source":"a71c4a030ed2e887.yaml","type":"application/yaml","size":5773}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711269312005,"stop":1711269312014,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"21853e7f5c737fb0","name":"stage_yaml","source":"21853e7f5c737fb0.yaml","type":"application/yaml","size":228},{"uid":"ac3f941b786edf62","name":"rest_request","source":"ac3f941b786edf62.yaml","type":"application/yaml","size":173},{"uid":"81edafb7dcb26c6b","name":"rest_response","source":"81edafb7dcb26c6b.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711269312014,"stop":1711269312023,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"e05b18e32159d268","name":"stage_yaml","source":"e05b18e32159d268.yaml","type":"application/yaml","size":231},{"uid":"993e64dcef0fa47e","name":"rest_request","source":"993e64dcef0fa47e.yaml","type":"application/yaml","size":173},{"uid":"65ab5a5d911487a2","name":"rest_response","source":"65ab5a5d911487a2.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711269312023,"stop":1711269312033,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"b0f674bfffa2bbd2","name":"stage_yaml","source":"b0f674bfffa2bbd2.yaml","type":"application/yaml","size":543},{"uid":"aaaedc2369c1457e","name":"rest_request","source":"aaaedc2369c1457e.yaml","type":"application/yaml","size":166},{"uid":"eef354b612738e26","name":"rest_response","source":"eef354b612738e26.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711269312036,"stop":1711269313048,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"c542dda9d33281a8","name":"stage_yaml","source":"c542dda9d33281a8.yaml","type":"application/yaml","size":661},{"uid":"6a555a953d72e73","name":"rest_request","source":"6a555a953d72e73.yaml","type":"application/yaml","size":159},{"uid":"f55f40a56b70fc21","name":"rest_response","source":"f55f40a56b70fc21.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711269313050,"stop":1711269313065,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"7fbc4ddc4005ed47","name":"stage_yaml","source":"7fbc4ddc4005ed47.yaml","type":"application/yaml","size":3543},{"uid":"c475e651fcbbf018","name":"rest_request","source":"c475e651fcbbf018.yaml","type":"application/yaml","size":159},{"uid":"773433873de4db1d","name":"rest_response","source":"773433873de4db1d.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711269313065,"stop":1711269313076,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"51059b4a8a05f27b","name":"stage_yaml","source":"51059b4a8a05f27b.yaml","type":"application/yaml","size":639},{"uid":"535d17b2e93a7469","name":"rest_request","source":"535d17b2e93a7469.yaml","type":"application/yaml","size":229},{"uid":"dfdb325d504de430","name":"rest_response","source":"dfdb325d504de430.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711269313079,"stop":1711269314091,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"773ca701e8b906d6","name":"stage_yaml","source":"773ca701e8b906d6.yaml","type":"application/yaml","size":679},{"uid":"567e67bc1ae71174","name":"rest_request","source":"567e67bc1ae71174.yaml","type":"application/yaml","size":159},{"uid":"6a7688068681875","name":"rest_response","source":"6a7688068681875.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711269314092,"stop":1711269314106,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"2d80f7bd0e777ff1","name":"stage_yaml","source":"2d80f7bd0e777ff1.yaml","type":"application/yaml","size":3157},{"uid":"5711741fe08eedd3","name":"rest_request","source":"5711741fe08eedd3.yaml","type":"application/yaml","size":159},{"uid":"970ddb277a29f351","name":"rest_response","source":"970ddb277a29f351.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711269314107,"stop":1711269314118,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"a5b8919826ff078","name":"stage_yaml","source":"a5b8919826ff078.yaml","type":"application/yaml","size":639},{"uid":"753e8d3e13e337b","name":"rest_request","source":"753e8d3e13e337b.yaml","type":"application/yaml","size":229},{"uid":"b7378d1dd8c0c09b","name":"rest_response","source":"b7378d1dd8c0c09b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711269314120,"stop":1711269315133,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"4572d5a9f9a7ead1","name":"stage_yaml","source":"4572d5a9f9a7ead1.yaml","type":"application/yaml","size":679},{"uid":"4c99c35e73bda84e","name":"rest_request","source":"4c99c35e73bda84e.yaml","type":"application/yaml","size":159},{"uid":"facca951bf6dc32c","name":"rest_response","source":"facca951bf6dc32c.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711269315134,"stop":1711269315148,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"f3fcd69c8ec96d40","name":"stage_yaml","source":"f3fcd69c8ec96d40.yaml","type":"application/yaml","size":3157},{"uid":"4a58b5bb3051c62b","name":"rest_request","source":"4a58b5bb3051c62b.yaml","type":"application/yaml","size":159},{"uid":"9851e642c7b664fa","name":"rest_response","source":"9851e642c7b664fa.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711269315149,"stop":1711269315160,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"bdfc51c977d5faf4","name":"stage_yaml","source":"bdfc51c977d5faf4.yaml","type":"application/yaml","size":639},{"uid":"10c46848f0d2d121","name":"rest_request","source":"10c46848f0d2d121.yaml","type":"application/yaml","size":233},{"uid":"8a7655b38c865f79","name":"rest_response","source":"8a7655b38c865f79.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711269315162,"stop":1711269316174,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"123003a321bb4fea","name":"stage_yaml","source":"123003a321bb4fea.yaml","type":"application/yaml","size":685},{"uid":"254a7da4ed3b9ba6","name":"rest_request","source":"254a7da4ed3b9ba6.yaml","type":"application/yaml","size":159},{"uid":"63beef9e187d422","name":"rest_response","source":"63beef9e187d422.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711269316175,"stop":1711269316188,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"c824d0b62d5db16a","name":"stage_yaml","source":"c824d0b62d5db16a.yaml","type":"application/yaml","size":2234},{"uid":"c4a449705a5d6241","name":"rest_request","source":"c4a449705a5d6241.yaml","type":"application/yaml","size":159},{"uid":"3d61ce613698dbec","name":"rest_response","source":"3d61ce613698dbec.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711269316189,"stop":1711269316199,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"490d29e27a0f980e","name":"stage_yaml","source":"490d29e27a0f980e.yaml","type":"application/yaml","size":631},{"uid":"b96fc1cb022e5f10","name":"rest_request","source":"b96fc1cb022e5f10.yaml","type":"application/yaml","size":227},{"uid":"a067a7a8f053fbb0","name":"rest_response","source":"a067a7a8f053fbb0.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711269316202,"stop":1711269317213,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"b76388d908efc476","name":"stage_yaml","source":"b76388d908efc476.yaml","type":"application/yaml","size":685},{"uid":"36763cfcdf9c45fd","name":"rest_request","source":"36763cfcdf9c45fd.yaml","type":"application/yaml","size":159},{"uid":"b4974b3e2ddfecbb","name":"rest_response","source":"b4974b3e2ddfecbb.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711269317214,"stop":1711269317227,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"bac43b0c45cd831c","name":"stage_yaml","source":"bac43b0c45cd831c.yaml","type":"application/yaml","size":2230},{"uid":"5c079059d7727f7","name":"rest_request","source":"5c079059d7727f7.yaml","type":"application/yaml","size":159},{"uid":"cf8be558c2d99127","name":"rest_response","source":"cf8be558c2d99127.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711269317228,"stop":1711269317238,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"4999a8bcf2cec113","name":"stage_yaml","source":"4999a8bcf2cec113.yaml","type":"application/yaml","size":599},{"uid":"141204e849e26e21","name":"rest_request","source":"141204e849e26e21.yaml","type":"application/yaml","size":227},{"uid":"5a71edde0b2792ae","name":"rest_response","source":"5a71edde0b2792ae.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711269317241,"stop":1711269318254,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"2cf1af56de10b9e9","name":"stage_yaml","source":"2cf1af56de10b9e9.yaml","type":"application/yaml","size":679},{"uid":"8fc033ca22992c8","name":"rest_request","source":"8fc033ca22992c8.yaml","type":"application/yaml","size":159},{"uid":"d1d4b8f42c6905b","name":"rest_response","source":"d1d4b8f42c6905b.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711269318255,"stop":1711269318270,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"d33776254c83c032","name":"stage_yaml","source":"d33776254c83c032.yaml","type":"application/yaml","size":3125},{"uid":"2e549b7eb0b96840","name":"rest_request","source":"2e549b7eb0b96840.yaml","type":"application/yaml","size":159},{"uid":"d59d5d2b8daf5f75","name":"rest_response","source":"d59d5d2b8daf5f75.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711269318271,"stop":1711269318281,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"87aaa1431b525ecc","name":"stage_yaml","source":"87aaa1431b525ecc.yaml","type":"application/yaml","size":640},{"uid":"5005e0da3bb086f2","name":"rest_request","source":"5005e0da3bb086f2.yaml","type":"application/yaml","size":227},{"uid":"9bc7f1a0120c1682","name":"rest_response","source":"9bc7f1a0120c1682.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711269318284,"stop":1711269319297,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"9e3b0cb056a8c751","name":"stage_yaml","source":"9e3b0cb056a8c751.yaml","type":"application/yaml","size":680},{"uid":"4b6a14b1490c65c2","name":"rest_request","source":"4b6a14b1490c65c2.yaml","type":"application/yaml","size":159},{"uid":"223efc5ae49e2e1a","name":"rest_response","source":"223efc5ae49e2e1a.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711269319298,"stop":1711269319313,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"c756b0c3bd63fa29","name":"stage_yaml","source":"c756b0c3bd63fa29.yaml","type":"application/yaml","size":3160},{"uid":"6378be8df5be3f20","name":"rest_request","source":"6378be8df5be3f20.yaml","type":"application/yaml","size":159},{"uid":"7ef1a3154f5cb745","name":"rest_response","source":"7ef1a3154f5cb745.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711269319314,"stop":1711269319322,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"eb54bd366e65cd28","name":"stage_yaml","source":"eb54bd366e65cd28.yaml","type":"application/yaml","size":276},{"uid":"58dccc8e00a915eb","name":"rest_request","source":"58dccc8e00a915eb.yaml","type":"application/yaml","size":173},{"uid":"8b0e70288f809e27","name":"rest_response","source":"8b0e70288f809e27.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711269319323,"stop":1711269319332,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"583f13aef771555d","name":"stage_yaml","source":"583f13aef771555d.yaml","type":"application/yaml","size":256},{"uid":"cd22d1fd261f9431","name":"rest_request","source":"cd22d1fd261f9431.yaml","type":"application/yaml","size":172},{"uid":"160ae6d2149dea97","name":"rest_response","source":"160ae6d2149dea97.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"69f4ed5520e8"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":348,"unknown":0,"total":363},"items":[{"uid":"6e3d715c2ae590b2","status":"passed","time":{"start":1711183002278,"stop":1711183009803,"duration":7525}},{"uid":"3bc886f27a692ed8","status":"passed","time":{"start":1711096543203,"stop":1711096550727,"duration":7524}},{"uid":"71129cc12ca4cd89","status":"passed","time":{"start":1711010125426,"stop":1711010132968,"duration":7542}},{"uid":"d3018c8f24ad3c61","status":"passed","time":{"start":1710923752449,"stop":1710923759978,"duration":7529}},{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}}]},"tags":[]},"source":"e5cb16d55553db81.json","parameterValues":[]}