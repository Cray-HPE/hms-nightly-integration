{"uid":"d3018c8f24ad3c61","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1710923752449,"stop":1710923759978,"duration":7529},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710923752623,"stop":1710923752655,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"899bb5d7a5688b12","name":"stage_yaml","source":"899bb5d7a5688b12.yaml","type":"application/yaml","size":333},{"uid":"34d81670bef4ae81","name":"rest_request","source":"34d81670bef4ae81.yaml","type":"application/yaml","size":149},{"uid":"3d79ee596e12b090","name":"rest_response","source":"3d79ee596e12b090.yaml","type":"application/yaml","size":5775}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710923752656,"stop":1710923752665,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"8a15500281b1e92f","name":"stage_yaml","source":"8a15500281b1e92f.yaml","type":"application/yaml","size":228},{"uid":"a6650deb09394340","name":"rest_request","source":"a6650deb09394340.yaml","type":"application/yaml","size":173},{"uid":"58ff8433c719b33d","name":"rest_response","source":"58ff8433c719b33d.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710923752665,"stop":1710923752673,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"6d95db1f12046275","name":"stage_yaml","source":"6d95db1f12046275.yaml","type":"application/yaml","size":231},{"uid":"962dd153cbfcb4a6","name":"rest_request","source":"962dd153cbfcb4a6.yaml","type":"application/yaml","size":173},{"uid":"cea95876de9cacc2","name":"rest_response","source":"cea95876de9cacc2.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710923752674,"stop":1710923752684,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"9fc3065b68162f40","name":"stage_yaml","source":"9fc3065b68162f40.yaml","type":"application/yaml","size":543},{"uid":"229c55a2f0b4f4fb","name":"rest_request","source":"229c55a2f0b4f4fb.yaml","type":"application/yaml","size":166},{"uid":"a87ccfe954ac02cd","name":"rest_response","source":"a87ccfe954ac02cd.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710923752687,"stop":1710923753700,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"1e059270367911a3","name":"stage_yaml","source":"1e059270367911a3.yaml","type":"application/yaml","size":661},{"uid":"602a9c3efb5fbc90","name":"rest_request","source":"602a9c3efb5fbc90.yaml","type":"application/yaml","size":159},{"uid":"f2798c7fc5bb97c2","name":"rest_response","source":"f2798c7fc5bb97c2.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710923753701,"stop":1710923753716,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"ad2cb9c448abd48c","name":"stage_yaml","source":"ad2cb9c448abd48c.yaml","type":"application/yaml","size":3543},{"uid":"82ea7ad74d96330","name":"rest_request","source":"82ea7ad74d96330.yaml","type":"application/yaml","size":159},{"uid":"ea0aa48f2150a2ce","name":"rest_response","source":"ea0aa48f2150a2ce.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710923753716,"stop":1710923753726,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"26c41c101261b3df","name":"stage_yaml","source":"26c41c101261b3df.yaml","type":"application/yaml","size":639},{"uid":"351ee17f5b445bcb","name":"rest_request","source":"351ee17f5b445bcb.yaml","type":"application/yaml","size":229},{"uid":"118e71622125b237","name":"rest_response","source":"118e71622125b237.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710923753729,"stop":1710923754741,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"896aa51d8e5fc838","name":"stage_yaml","source":"896aa51d8e5fc838.yaml","type":"application/yaml","size":679},{"uid":"51e4d08057483725","name":"rest_request","source":"51e4d08057483725.yaml","type":"application/yaml","size":159},{"uid":"4860eef5a74fc343","name":"rest_response","source":"4860eef5a74fc343.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710923754742,"stop":1710923754757,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"b4bb6413f9374ba5","name":"stage_yaml","source":"b4bb6413f9374ba5.yaml","type":"application/yaml","size":3157},{"uid":"be8a8f7a4ffa02a0","name":"rest_request","source":"be8a8f7a4ffa02a0.yaml","type":"application/yaml","size":159},{"uid":"2e6ad9280e949164","name":"rest_response","source":"2e6ad9280e949164.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710923754758,"stop":1710923754768,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"8496c4f07f6c7484","name":"stage_yaml","source":"8496c4f07f6c7484.yaml","type":"application/yaml","size":639},{"uid":"22fe53fd8bf821f2","name":"rest_request","source":"22fe53fd8bf821f2.yaml","type":"application/yaml","size":229},{"uid":"5c414e35e71400e3","name":"rest_response","source":"5c414e35e71400e3.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710923754770,"stop":1710923755783,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"9d05d623b4f3cf58","name":"stage_yaml","source":"9d05d623b4f3cf58.yaml","type":"application/yaml","size":679},{"uid":"939e471fb1a4ed9e","name":"rest_request","source":"939e471fb1a4ed9e.yaml","type":"application/yaml","size":159},{"uid":"738c397d951594a","name":"rest_response","source":"738c397d951594a.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710923755784,"stop":1710923755798,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"7e8ac49c465fca8f","name":"stage_yaml","source":"7e8ac49c465fca8f.yaml","type":"application/yaml","size":3157},{"uid":"58912f1f7579388d","name":"rest_request","source":"58912f1f7579388d.yaml","type":"application/yaml","size":159},{"uid":"a1a523a149c8b210","name":"rest_response","source":"a1a523a149c8b210.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710923755799,"stop":1710923755808,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"afaac981158be27","name":"stage_yaml","source":"afaac981158be27.yaml","type":"application/yaml","size":639},{"uid":"de5e66f75ec20f63","name":"rest_request","source":"de5e66f75ec20f63.yaml","type":"application/yaml","size":233},{"uid":"2920ef943d8b16f3","name":"rest_response","source":"2920ef943d8b16f3.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710923755811,"stop":1710923756821,"duration":1010},"status":"passed","steps":[],"attachments":[{"uid":"b755a135da5d9801","name":"stage_yaml","source":"b755a135da5d9801.yaml","type":"application/yaml","size":685},{"uid":"389a40617c48aa5b","name":"rest_request","source":"389a40617c48aa5b.yaml","type":"application/yaml","size":159},{"uid":"183c22cb71e5a664","name":"rest_response","source":"183c22cb71e5a664.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710923756823,"stop":1710923756836,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"1387d03d693ba95","name":"stage_yaml","source":"1387d03d693ba95.yaml","type":"application/yaml","size":2234},{"uid":"78876e5af0514923","name":"rest_request","source":"78876e5af0514923.yaml","type":"application/yaml","size":159},{"uid":"b7eb049caef78038","name":"rest_response","source":"b7eb049caef78038.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710923756837,"stop":1710923756848,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"f96534af5066863f","name":"stage_yaml","source":"f96534af5066863f.yaml","type":"application/yaml","size":631},{"uid":"e4bbb494890128c6","name":"rest_request","source":"e4bbb494890128c6.yaml","type":"application/yaml","size":227},{"uid":"5326978323b2ff7e","name":"rest_response","source":"5326978323b2ff7e.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710923756850,"stop":1710923757862,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"60dfd93821796ad8","name":"stage_yaml","source":"60dfd93821796ad8.yaml","type":"application/yaml","size":685},{"uid":"1d42c5a1414ab806","name":"rest_request","source":"1d42c5a1414ab806.yaml","type":"application/yaml","size":159},{"uid":"2187b3ca31121397","name":"rest_response","source":"2187b3ca31121397.yaml","type":"application/yaml","size":570}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710923757863,"stop":1710923757876,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"c4b029cf236be6f4","name":"stage_yaml","source":"c4b029cf236be6f4.yaml","type":"application/yaml","size":2230},{"uid":"e2cfa590469ebd2f","name":"rest_request","source":"e2cfa590469ebd2f.yaml","type":"application/yaml","size":159},{"uid":"2a715d2636e2c8fc","name":"rest_response","source":"2a715d2636e2c8fc.yaml","type":"application/yaml","size":570}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710923757877,"stop":1710923757886,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"a08c077e07be05df","name":"stage_yaml","source":"a08c077e07be05df.yaml","type":"application/yaml","size":599},{"uid":"431661754e3856b8","name":"rest_request","source":"431661754e3856b8.yaml","type":"application/yaml","size":227},{"uid":"be252e2d92d851c2","name":"rest_response","source":"be252e2d92d851c2.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710923757889,"stop":1710923758901,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"1c5614925c17c160","name":"stage_yaml","source":"1c5614925c17c160.yaml","type":"application/yaml","size":679},{"uid":"14f4a16338790769","name":"rest_request","source":"14f4a16338790769.yaml","type":"application/yaml","size":159},{"uid":"fe4f7d83ffbd5942","name":"rest_response","source":"fe4f7d83ffbd5942.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710923758903,"stop":1710923758916,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"faf66461461daa9c","name":"stage_yaml","source":"faf66461461daa9c.yaml","type":"application/yaml","size":3125},{"uid":"196640d8875cc1dd","name":"rest_request","source":"196640d8875cc1dd.yaml","type":"application/yaml","size":159},{"uid":"baacd7a2c42cae50","name":"rest_response","source":"baacd7a2c42cae50.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710923758917,"stop":1710923758928,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"2fed30e8a66eccbb","name":"stage_yaml","source":"2fed30e8a66eccbb.yaml","type":"application/yaml","size":640},{"uid":"e3e563602bec70c","name":"rest_request","source":"e3e563602bec70c.yaml","type":"application/yaml","size":227},{"uid":"288f61890c0cf31b","name":"rest_response","source":"288f61890c0cf31b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710923758930,"stop":1710923759943,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"d3ecf1f82424b782","name":"stage_yaml","source":"d3ecf1f82424b782.yaml","type":"application/yaml","size":680},{"uid":"b3915fe601ac5ed2","name":"rest_request","source":"b3915fe601ac5ed2.yaml","type":"application/yaml","size":159},{"uid":"95115aad0df57270","name":"rest_response","source":"95115aad0df57270.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710923759944,"stop":1710923759959,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"5a300fccef5f0daa","name":"stage_yaml","source":"5a300fccef5f0daa.yaml","type":"application/yaml","size":3160},{"uid":"e3384b5dab527ae4","name":"rest_request","source":"e3384b5dab527ae4.yaml","type":"application/yaml","size":159},{"uid":"a0e0b50658882a37","name":"rest_response","source":"a0e0b50658882a37.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710923759960,"stop":1710923759968,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"54f9a55f405f4c2c","name":"stage_yaml","source":"54f9a55f405f4c2c.yaml","type":"application/yaml","size":276},{"uid":"fe8cecc4b21e76f2","name":"rest_request","source":"fe8cecc4b21e76f2.yaml","type":"application/yaml","size":173},{"uid":"5cf0c3894ba4b6a2","name":"rest_response","source":"5cf0c3894ba4b6a2.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710923759969,"stop":1710923759977,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"94f3ff3eff7c40f3","name":"stage_yaml","source":"94f3ff3eff7c40f3.yaml","type":"application/yaml","size":256},{"uid":"6dc32d748081ed25","name":"rest_request","source":"6dc32d748081ed25.yaml","type":"application/yaml","size":172},{"uid":"b26357f75a2fbdf1","name":"rest_response","source":"b26357f75a2fbdf1.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"fd3e1b648cd5"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":344,"unknown":0,"total":359},"items":[{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}},{"uid":"3693a0d7d20df2f5","status":"passed","time":{"start":1709454594886,"stop":1709454602407,"duration":7521}},{"uid":"9be3aae049011bee","status":"passed","time":{"start":1709368102024,"stop":1709368109557,"duration":7533}},{"uid":"653c091d9997b6f3","status":"passed","time":{"start":1709281736635,"stop":1709281744148,"duration":7513}},{"uid":"b118e6ba18c33680","status":"passed","time":{"start":1709195298130,"stop":1709195305654,"duration":7524}}]},"tags":[]},"source":"d3018c8f24ad3c61.json","parameterValues":[]}