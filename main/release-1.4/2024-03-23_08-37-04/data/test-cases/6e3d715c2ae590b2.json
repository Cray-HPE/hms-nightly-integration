{"uid":"6e3d715c2ae590b2","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1711183002278,"stop":1711183009803,"duration":7525},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711183002451,"stop":1711183002483,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"8b18a725ab3c0a0a","name":"stage_yaml","source":"8b18a725ab3c0a0a.yaml","type":"application/yaml","size":333},{"uid":"67cc3f59cc5338d5","name":"rest_request","source":"67cc3f59cc5338d5.yaml","type":"application/yaml","size":149},{"uid":"261e18c24be210bd","name":"rest_response","source":"261e18c24be210bd.yaml","type":"application/yaml","size":5772}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711183002484,"stop":1711183002492,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"ce7160b358f05d42","name":"stage_yaml","source":"ce7160b358f05d42.yaml","type":"application/yaml","size":228},{"uid":"d2b046ecca21362","name":"rest_request","source":"d2b046ecca21362.yaml","type":"application/yaml","size":173},{"uid":"effa3038805e363b","name":"rest_response","source":"effa3038805e363b.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711183002493,"stop":1711183002500,"duration":7},"status":"passed","steps":[],"attachments":[{"uid":"f13a8d7d6725fda4","name":"stage_yaml","source":"f13a8d7d6725fda4.yaml","type":"application/yaml","size":231},{"uid":"fc8c7ff48166abb6","name":"rest_request","source":"fc8c7ff48166abb6.yaml","type":"application/yaml","size":173},{"uid":"ffc2f825f6680f3e","name":"rest_response","source":"ffc2f825f6680f3e.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711183002501,"stop":1711183002511,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"14726e5810f3e932","name":"stage_yaml","source":"14726e5810f3e932.yaml","type":"application/yaml","size":543},{"uid":"858c0c25427338bb","name":"rest_request","source":"858c0c25427338bb.yaml","type":"application/yaml","size":166},{"uid":"d999f074b5cd404c","name":"rest_response","source":"d999f074b5cd404c.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711183002513,"stop":1711183003526,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"a2bcf9ed0d54823d","name":"stage_yaml","source":"a2bcf9ed0d54823d.yaml","type":"application/yaml","size":661},{"uid":"ff0f00d41c40e15b","name":"rest_request","source":"ff0f00d41c40e15b.yaml","type":"application/yaml","size":159},{"uid":"fbdcfafe2a386cd4","name":"rest_response","source":"fbdcfafe2a386cd4.yaml","type":"application/yaml","size":680}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711183003527,"stop":1711183003542,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"19a14095d97a9907","name":"stage_yaml","source":"19a14095d97a9907.yaml","type":"application/yaml","size":3543},{"uid":"2d9057ce0cf512a4","name":"rest_request","source":"2d9057ce0cf512a4.yaml","type":"application/yaml","size":159},{"uid":"76d5cf4970b01d88","name":"rest_response","source":"76d5cf4970b01d88.yaml","type":"application/yaml","size":680}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711183003542,"stop":1711183003553,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"732f10786bd48931","name":"stage_yaml","source":"732f10786bd48931.yaml","type":"application/yaml","size":639},{"uid":"9b7683d9d3ed517d","name":"rest_request","source":"9b7683d9d3ed517d.yaml","type":"application/yaml","size":229},{"uid":"d81489b819ca7218","name":"rest_response","source":"d81489b819ca7218.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711183003555,"stop":1711183004568,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"4137f7b6aa52717d","name":"stage_yaml","source":"4137f7b6aa52717d.yaml","type":"application/yaml","size":679},{"uid":"430aed09e4720d77","name":"rest_request","source":"430aed09e4720d77.yaml","type":"application/yaml","size":159},{"uid":"79e4d538ad047a76","name":"rest_response","source":"79e4d538ad047a76.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711183004569,"stop":1711183004583,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"c32bb03f9d9f13f1","name":"stage_yaml","source":"c32bb03f9d9f13f1.yaml","type":"application/yaml","size":3157},{"uid":"870f26da1acc02f8","name":"rest_request","source":"870f26da1acc02f8.yaml","type":"application/yaml","size":159},{"uid":"3ff709376bb860bf","name":"rest_response","source":"3ff709376bb860bf.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711183004584,"stop":1711183004594,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6be8e7f1b258e47a","name":"stage_yaml","source":"6be8e7f1b258e47a.yaml","type":"application/yaml","size":639},{"uid":"eac97e47d8c3684b","name":"rest_request","source":"eac97e47d8c3684b.yaml","type":"application/yaml","size":229},{"uid":"b7cdd143bb0febee","name":"rest_response","source":"b7cdd143bb0febee.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711183004596,"stop":1711183005609,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"948759f64270c853","name":"stage_yaml","source":"948759f64270c853.yaml","type":"application/yaml","size":679},{"uid":"396f2d860f58b68f","name":"rest_request","source":"396f2d860f58b68f.yaml","type":"application/yaml","size":159},{"uid":"959cace545ac0bd9","name":"rest_response","source":"959cace545ac0bd9.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711183005610,"stop":1711183005624,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"6a0601de4e35e1da","name":"stage_yaml","source":"6a0601de4e35e1da.yaml","type":"application/yaml","size":3157},{"uid":"f133ede90bf336d6","name":"rest_request","source":"f133ede90bf336d6.yaml","type":"application/yaml","size":159},{"uid":"ef72b21e636f292c","name":"rest_response","source":"ef72b21e636f292c.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711183005625,"stop":1711183005635,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"17a20b00c8852236","name":"stage_yaml","source":"17a20b00c8852236.yaml","type":"application/yaml","size":639},{"uid":"148849d759263444","name":"rest_request","source":"148849d759263444.yaml","type":"application/yaml","size":233},{"uid":"c4c4098a1d18f5fc","name":"rest_response","source":"c4c4098a1d18f5fc.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711183005637,"stop":1711183006648,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"23413de06c452cd","name":"stage_yaml","source":"23413de06c452cd.yaml","type":"application/yaml","size":685},{"uid":"229ee4582b2daf96","name":"rest_request","source":"229ee4582b2daf96.yaml","type":"application/yaml","size":159},{"uid":"51ee50a6289cd7b5","name":"rest_response","source":"51ee50a6289cd7b5.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711183006649,"stop":1711183006662,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"697a1b40af68fcb2","name":"stage_yaml","source":"697a1b40af68fcb2.yaml","type":"application/yaml","size":2234},{"uid":"7d5e5e672f1fb0b5","name":"rest_request","source":"7d5e5e672f1fb0b5.yaml","type":"application/yaml","size":159},{"uid":"c6d4cbb349d9026e","name":"rest_response","source":"c6d4cbb349d9026e.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711183006663,"stop":1711183006673,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6d02645cb7b80264","name":"stage_yaml","source":"6d02645cb7b80264.yaml","type":"application/yaml","size":631},{"uid":"d5faef02e8e4e880","name":"rest_request","source":"d5faef02e8e4e880.yaml","type":"application/yaml","size":227},{"uid":"2aa5e2b79074f31e","name":"rest_response","source":"2aa5e2b79074f31e.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711183006675,"stop":1711183007687,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"e2e93b068abc8a45","name":"stage_yaml","source":"e2e93b068abc8a45.yaml","type":"application/yaml","size":685},{"uid":"9aa6714db3b835c5","name":"rest_request","source":"9aa6714db3b835c5.yaml","type":"application/yaml","size":159},{"uid":"a50dfa6c959c8553","name":"rest_response","source":"a50dfa6c959c8553.yaml","type":"application/yaml","size":569}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711183007688,"stop":1711183007700,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"d15d1ffc936b71f","name":"stage_yaml","source":"d15d1ffc936b71f.yaml","type":"application/yaml","size":2230},{"uid":"c4ecb539d375eca8","name":"rest_request","source":"c4ecb539d375eca8.yaml","type":"application/yaml","size":159},{"uid":"50ae2a1f98e9364","name":"rest_response","source":"50ae2a1f98e9364.yaml","type":"application/yaml","size":569}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711183007701,"stop":1711183007711,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"d472869d45bfbd94","name":"stage_yaml","source":"d472869d45bfbd94.yaml","type":"application/yaml","size":599},{"uid":"e02f0e66745ab218","name":"rest_request","source":"e02f0e66745ab218.yaml","type":"application/yaml","size":227},{"uid":"d7e51e21cff32cf","name":"rest_response","source":"d7e51e21cff32cf.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711183007714,"stop":1711183008727,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"c57f97aeaeb6f74b","name":"stage_yaml","source":"c57f97aeaeb6f74b.yaml","type":"application/yaml","size":679},{"uid":"a1fa83d3ffe3398f","name":"rest_request","source":"a1fa83d3ffe3398f.yaml","type":"application/yaml","size":159},{"uid":"a58a5b5341d2a7b4","name":"rest_response","source":"a58a5b5341d2a7b4.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711183008728,"stop":1711183008742,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"abc2ea30fe7e170","name":"stage_yaml","source":"abc2ea30fe7e170.yaml","type":"application/yaml","size":3125},{"uid":"310ebef64334479e","name":"rest_request","source":"310ebef64334479e.yaml","type":"application/yaml","size":159},{"uid":"b1e8b2f444938990","name":"rest_response","source":"b1e8b2f444938990.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711183008743,"stop":1711183008753,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"2172dc6b3a47c8c","name":"stage_yaml","source":"2172dc6b3a47c8c.yaml","type":"application/yaml","size":640},{"uid":"2668990dba4bdb5e","name":"rest_request","source":"2668990dba4bdb5e.yaml","type":"application/yaml","size":229},{"uid":"248a34d31ac0a262","name":"rest_response","source":"248a34d31ac0a262.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711183008756,"stop":1711183009769,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"594eafd35d4393c1","name":"stage_yaml","source":"594eafd35d4393c1.yaml","type":"application/yaml","size":680},{"uid":"9680504f001b774e","name":"rest_request","source":"9680504f001b774e.yaml","type":"application/yaml","size":159},{"uid":"ac61bf25351b120c","name":"rest_response","source":"ac61bf25351b120c.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711183009770,"stop":1711183009784,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"dd852c3e4b926c06","name":"stage_yaml","source":"dd852c3e4b926c06.yaml","type":"application/yaml","size":3160},{"uid":"ac20d0b316a46bdd","name":"rest_request","source":"ac20d0b316a46bdd.yaml","type":"application/yaml","size":159},{"uid":"9d8afd6f4c939fec","name":"rest_response","source":"9d8afd6f4c939fec.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711183009785,"stop":1711183009794,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"6259382e281e566b","name":"stage_yaml","source":"6259382e281e566b.yaml","type":"application/yaml","size":276},{"uid":"2455bbfc0ac86ceb","name":"rest_request","source":"2455bbfc0ac86ceb.yaml","type":"application/yaml","size":173},{"uid":"835e5761d2025d38","name":"rest_response","source":"835e5761d2025d38.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711183009794,"stop":1711183009803,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"59eef98ce3381295","name":"stage_yaml","source":"59eef98ce3381295.yaml","type":"application/yaml","size":256},{"uid":"2161f45b96f97532","name":"rest_request","source":"2161f45b96f97532.yaml","type":"application/yaml","size":172},{"uid":"1e81006dbcd5d843","name":"rest_response","source":"1e81006dbcd5d843.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"54842df36fa4"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":347,"unknown":0,"total":362},"items":[{"uid":"3bc886f27a692ed8","status":"passed","time":{"start":1711096543203,"stop":1711096550727,"duration":7524}},{"uid":"71129cc12ca4cd89","status":"passed","time":{"start":1711010125426,"stop":1711010132968,"duration":7542}},{"uid":"d3018c8f24ad3c61","status":"passed","time":{"start":1710923752449,"stop":1710923759978,"duration":7529}},{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}},{"uid":"3693a0d7d20df2f5","status":"passed","time":{"start":1709454594886,"stop":1709454602407,"duration":7521}}]},"tags":[]},"source":"6e3d715c2ae590b2.json","parameterValues":[]}