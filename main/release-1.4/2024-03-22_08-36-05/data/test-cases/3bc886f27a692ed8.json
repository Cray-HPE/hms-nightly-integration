{"uid":"3bc886f27a692ed8","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1711096543203,"stop":1711096550727,"duration":7524},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711096543377,"stop":1711096543409,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"ee3c5d05f4ee5bb9","name":"stage_yaml","source":"ee3c5d05f4ee5bb9.yaml","type":"application/yaml","size":333},{"uid":"329218bb6ddaf62","name":"rest_request","source":"329218bb6ddaf62.yaml","type":"application/yaml","size":149},{"uid":"8e1a49ff0a173451","name":"rest_response","source":"8e1a49ff0a173451.yaml","type":"application/yaml","size":5770}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711096543410,"stop":1711096543418,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"8b4741661af85cae","name":"stage_yaml","source":"8b4741661af85cae.yaml","type":"application/yaml","size":228},{"uid":"632c0f982de135b2","name":"rest_request","source":"632c0f982de135b2.yaml","type":"application/yaml","size":173},{"uid":"551c5e255957f2a2","name":"rest_response","source":"551c5e255957f2a2.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711096543419,"stop":1711096543427,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"3b44d94c56e66e91","name":"stage_yaml","source":"3b44d94c56e66e91.yaml","type":"application/yaml","size":231},{"uid":"5de7ed627dea0152","name":"rest_request","source":"5de7ed627dea0152.yaml","type":"application/yaml","size":173},{"uid":"bd50aa6d518e3011","name":"rest_response","source":"bd50aa6d518e3011.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711096543428,"stop":1711096543439,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"40529b0f5e3310a2","name":"stage_yaml","source":"40529b0f5e3310a2.yaml","type":"application/yaml","size":543},{"uid":"ef01148c658ba12","name":"rest_request","source":"ef01148c658ba12.yaml","type":"application/yaml","size":166},{"uid":"96f8843ab00446ac","name":"rest_response","source":"96f8843ab00446ac.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711096543441,"stop":1711096544454,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"6c8770021d732a8f","name":"stage_yaml","source":"6c8770021d732a8f.yaml","type":"application/yaml","size":661},{"uid":"a06cdb68aaaa8c85","name":"rest_request","source":"a06cdb68aaaa8c85.yaml","type":"application/yaml","size":159},{"uid":"806659c4b5d458e4","name":"rest_response","source":"806659c4b5d458e4.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711096544454,"stop":1711096544469,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"adbd846f876c5fa3","name":"stage_yaml","source":"adbd846f876c5fa3.yaml","type":"application/yaml","size":3543},{"uid":"8e334f7d790b0b62","name":"rest_request","source":"8e334f7d790b0b62.yaml","type":"application/yaml","size":159},{"uid":"6ad69262daa8ae9a","name":"rest_response","source":"6ad69262daa8ae9a.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711096544470,"stop":1711096544480,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"10f380615033362f","name":"stage_yaml","source":"10f380615033362f.yaml","type":"application/yaml","size":639},{"uid":"f8fd0676525263dc","name":"rest_request","source":"f8fd0676525263dc.yaml","type":"application/yaml","size":229},{"uid":"120d49d12c4df7ac","name":"rest_response","source":"120d49d12c4df7ac.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711096544483,"stop":1711096545495,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"a41afde8110d0e77","name":"stage_yaml","source":"a41afde8110d0e77.yaml","type":"application/yaml","size":679},{"uid":"c7c9078fb9cfffa8","name":"rest_request","source":"c7c9078fb9cfffa8.yaml","type":"application/yaml","size":159},{"uid":"4b5163bfa87aecd4","name":"rest_response","source":"4b5163bfa87aecd4.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711096545496,"stop":1711096545510,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"735432c09ed9cbbb","name":"stage_yaml","source":"735432c09ed9cbbb.yaml","type":"application/yaml","size":3157},{"uid":"95c77e6b73ecab19","name":"rest_request","source":"95c77e6b73ecab19.yaml","type":"application/yaml","size":159},{"uid":"8bb1045a9c0cd1ba","name":"rest_response","source":"8bb1045a9c0cd1ba.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711096545511,"stop":1711096545521,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"2852a1099caf8d04","name":"stage_yaml","source":"2852a1099caf8d04.yaml","type":"application/yaml","size":639},{"uid":"8fddcee9dc25b413","name":"rest_request","source":"8fddcee9dc25b413.yaml","type":"application/yaml","size":229},{"uid":"bd79639f85ed3f09","name":"rest_response","source":"bd79639f85ed3f09.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711096545524,"stop":1711096546536,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"c7db19527d1d0327","name":"stage_yaml","source":"c7db19527d1d0327.yaml","type":"application/yaml","size":679},{"uid":"d44073b58cf229d2","name":"rest_request","source":"d44073b58cf229d2.yaml","type":"application/yaml","size":159},{"uid":"b74076effc7c8793","name":"rest_response","source":"b74076effc7c8793.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711096546537,"stop":1711096546551,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"10ed0a563fa7aa9e","name":"stage_yaml","source":"10ed0a563fa7aa9e.yaml","type":"application/yaml","size":3157},{"uid":"edd9b45224a18762","name":"rest_request","source":"edd9b45224a18762.yaml","type":"application/yaml","size":159},{"uid":"26ce9bbb3819b520","name":"rest_response","source":"26ce9bbb3819b520.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711096546551,"stop":1711096546562,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"5f18701f5ef90b34","name":"stage_yaml","source":"5f18701f5ef90b34.yaml","type":"application/yaml","size":639},{"uid":"effd6778031d0a2d","name":"rest_request","source":"effd6778031d0a2d.yaml","type":"application/yaml","size":233},{"uid":"f5b70ee0acf3b3f4","name":"rest_response","source":"f5b70ee0acf3b3f4.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711096546564,"stop":1711096547575,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"626533c507a406b1","name":"stage_yaml","source":"626533c507a406b1.yaml","type":"application/yaml","size":685},{"uid":"fc90b44c8757be88","name":"rest_request","source":"fc90b44c8757be88.yaml","type":"application/yaml","size":159},{"uid":"6b75da15ae16d068","name":"rest_response","source":"6b75da15ae16d068.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711096547576,"stop":1711096547589,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"25a77d3e179cd3d8","name":"stage_yaml","source":"25a77d3e179cd3d8.yaml","type":"application/yaml","size":2234},{"uid":"34a2eb845f6080ae","name":"rest_request","source":"34a2eb845f6080ae.yaml","type":"application/yaml","size":159},{"uid":"28b47e050f423b9","name":"rest_response","source":"28b47e050f423b9.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711096547590,"stop":1711096547600,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"606ca87c82d852c6","name":"stage_yaml","source":"606ca87c82d852c6.yaml","type":"application/yaml","size":631},{"uid":"eb36e572414650d8","name":"rest_request","source":"eb36e572414650d8.yaml","type":"application/yaml","size":227},{"uid":"690892de5cf35ffa","name":"rest_response","source":"690892de5cf35ffa.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711096547602,"stop":1711096548613,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"cca94ffa46f98acc","name":"stage_yaml","source":"cca94ffa46f98acc.yaml","type":"application/yaml","size":685},{"uid":"325782b45dbfe830","name":"rest_request","source":"325782b45dbfe830.yaml","type":"application/yaml","size":159},{"uid":"71d40377489df35f","name":"rest_response","source":"71d40377489df35f.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711096548614,"stop":1711096548627,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"2565ffaf69dd32e4","name":"stage_yaml","source":"2565ffaf69dd32e4.yaml","type":"application/yaml","size":2230},{"uid":"6d3b5f53df3e6a9e","name":"rest_request","source":"6d3b5f53df3e6a9e.yaml","type":"application/yaml","size":159},{"uid":"b0531b036000dc5a","name":"rest_response","source":"b0531b036000dc5a.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711096548628,"stop":1711096548638,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"8e50677a0248e79b","name":"stage_yaml","source":"8e50677a0248e79b.yaml","type":"application/yaml","size":599},{"uid":"80c3755ab878bc05","name":"rest_request","source":"80c3755ab878bc05.yaml","type":"application/yaml","size":227},{"uid":"217221907d927824","name":"rest_response","source":"217221907d927824.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711096548640,"stop":1711096549652,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"2b9e2553616a4a2a","name":"stage_yaml","source":"2b9e2553616a4a2a.yaml","type":"application/yaml","size":679},{"uid":"35157e90e5f89010","name":"rest_request","source":"35157e90e5f89010.yaml","type":"application/yaml","size":159},{"uid":"b10f4ef734bac7c8","name":"rest_response","source":"b10f4ef734bac7c8.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711096549653,"stop":1711096549667,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"d27aaecabfb68f2f","name":"stage_yaml","source":"d27aaecabfb68f2f.yaml","type":"application/yaml","size":3125},{"uid":"9318b18e17e0bd9e","name":"rest_request","source":"9318b18e17e0bd9e.yaml","type":"application/yaml","size":159},{"uid":"ff363ab98debb0fd","name":"rest_response","source":"ff363ab98debb0fd.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711096549668,"stop":1711096549678,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"a94f366bb232835d","name":"stage_yaml","source":"a94f366bb232835d.yaml","type":"application/yaml","size":640},{"uid":"657eb0f9882d2ca4","name":"rest_request","source":"657eb0f9882d2ca4.yaml","type":"application/yaml","size":227},{"uid":"9fd9047208300972","name":"rest_response","source":"9fd9047208300972.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711096549680,"stop":1711096550693,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"168f215cbbbe3936","name":"stage_yaml","source":"168f215cbbbe3936.yaml","type":"application/yaml","size":680},{"uid":"e3aa76256cc42f52","name":"rest_request","source":"e3aa76256cc42f52.yaml","type":"application/yaml","size":159},{"uid":"7b1ddbfea72929cf","name":"rest_response","source":"7b1ddbfea72929cf.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711096550694,"stop":1711096550708,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"c2e95d8264d7b74","name":"stage_yaml","source":"c2e95d8264d7b74.yaml","type":"application/yaml","size":3160},{"uid":"f153d428d8e5ce5f","name":"rest_request","source":"f153d428d8e5ce5f.yaml","type":"application/yaml","size":159},{"uid":"d52fd244134f90bf","name":"rest_response","source":"d52fd244134f90bf.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711096550709,"stop":1711096550717,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"2db1739192449d47","name":"stage_yaml","source":"2db1739192449d47.yaml","type":"application/yaml","size":276},{"uid":"3395b686cf765f8b","name":"rest_request","source":"3395b686cf765f8b.yaml","type":"application/yaml","size":173},{"uid":"f98f91840c72c269","name":"rest_response","source":"f98f91840c72c269.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711096550718,"stop":1711096550726,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"146fd106145b836a","name":"stage_yaml","source":"146fd106145b836a.yaml","type":"application/yaml","size":256},{"uid":"63d0db7128ca1138","name":"rest_request","source":"63d0db7128ca1138.yaml","type":"application/yaml","size":172},{"uid":"4353ff0d5d34768e","name":"rest_response","source":"4353ff0d5d34768e.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"36239f715c5b"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":346,"unknown":0,"total":361},"items":[{"uid":"71129cc12ca4cd89","status":"passed","time":{"start":1711010125426,"stop":1711010132968,"duration":7542}},{"uid":"d3018c8f24ad3c61","status":"passed","time":{"start":1710923752449,"stop":1710923759978,"duration":7529}},{"uid":"c426324e7375df49","status":"passed","time":{"start":1710837316793,"stop":1710837324314,"duration":7521}},{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}},{"uid":"3693a0d7d20df2f5","status":"passed","time":{"start":1709454594886,"stop":1709454602407,"duration":7521}},{"uid":"9be3aae049011bee","status":"passed","time":{"start":1709368102024,"stop":1709368109557,"duration":7533}}]},"tags":[]},"source":"3bc886f27a692ed8.json","parameterValues":[]}