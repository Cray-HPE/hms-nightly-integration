{"uid":"f93f4c1c5eba29cc","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1710750999230,"stop":1710751006770,"duration":7540},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710750999407,"stop":1710750999440,"duration":33},"status":"passed","steps":[],"attachments":[{"uid":"2d56908f9120a35e","name":"stage_yaml","source":"2d56908f9120a35e.yaml","type":"application/yaml","size":333},{"uid":"669b249fa7c4ae46","name":"rest_request","source":"669b249fa7c4ae46.yaml","type":"application/yaml","size":149},{"uid":"e7e46d04db4b2df9","name":"rest_response","source":"e7e46d04db4b2df9.yaml","type":"application/yaml","size":5773}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710750999441,"stop":1710750999449,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"6cc8e559b53b751b","name":"stage_yaml","source":"6cc8e559b53b751b.yaml","type":"application/yaml","size":228},{"uid":"a603b4d048fa4b88","name":"rest_request","source":"a603b4d048fa4b88.yaml","type":"application/yaml","size":173},{"uid":"b43d9402f6e1c758","name":"rest_response","source":"b43d9402f6e1c758.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710750999450,"stop":1710750999458,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"114b296fb2d5d030","name":"stage_yaml","source":"114b296fb2d5d030.yaml","type":"application/yaml","size":231},{"uid":"4e796c5f3ef0a9fc","name":"rest_request","source":"4e796c5f3ef0a9fc.yaml","type":"application/yaml","size":173},{"uid":"ed700bcbcd7a8a35","name":"rest_response","source":"ed700bcbcd7a8a35.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710750999459,"stop":1710750999469,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"9f806d81cd2a8879","name":"stage_yaml","source":"9f806d81cd2a8879.yaml","type":"application/yaml","size":543},{"uid":"7f568481f54015d1","name":"rest_request","source":"7f568481f54015d1.yaml","type":"application/yaml","size":166},{"uid":"5dd89f5edd15ac47","name":"rest_response","source":"5dd89f5edd15ac47.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710750999472,"stop":1710751000485,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"7c9219bff2278106","name":"stage_yaml","source":"7c9219bff2278106.yaml","type":"application/yaml","size":661},{"uid":"2cdc3f9add9cf0b","name":"rest_request","source":"2cdc3f9add9cf0b.yaml","type":"application/yaml","size":159},{"uid":"cffa14cd7e911aa0","name":"rest_response","source":"cffa14cd7e911aa0.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710751000486,"stop":1710751000502,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"26efe610fd5840b2","name":"stage_yaml","source":"26efe610fd5840b2.yaml","type":"application/yaml","size":3543},{"uid":"401db5c5d8abd375","name":"rest_request","source":"401db5c5d8abd375.yaml","type":"application/yaml","size":159},{"uid":"9c0a33de9769a9e2","name":"rest_response","source":"9c0a33de9769a9e2.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710751000503,"stop":1710751000513,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"1ebe645f030da03d","name":"stage_yaml","source":"1ebe645f030da03d.yaml","type":"application/yaml","size":639},{"uid":"2ac95a70309bb56","name":"rest_request","source":"2ac95a70309bb56.yaml","type":"application/yaml","size":229},{"uid":"f2148677068d6d8a","name":"rest_response","source":"f2148677068d6d8a.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710751000515,"stop":1710751001527,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"f992005d47dabcda","name":"stage_yaml","source":"f992005d47dabcda.yaml","type":"application/yaml","size":679},{"uid":"23a65c96906b7517","name":"rest_request","source":"23a65c96906b7517.yaml","type":"application/yaml","size":159},{"uid":"4a1a6912218323fa","name":"rest_response","source":"4a1a6912218323fa.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710751001528,"stop":1710751001543,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"9d12e2deaa92e84a","name":"stage_yaml","source":"9d12e2deaa92e84a.yaml","type":"application/yaml","size":3157},{"uid":"b6e3585eede6c47","name":"rest_request","source":"b6e3585eede6c47.yaml","type":"application/yaml","size":159},{"uid":"679073ae4826b525","name":"rest_response","source":"679073ae4826b525.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710751001543,"stop":1710751001554,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"5183aa7f1e3ec920","name":"stage_yaml","source":"5183aa7f1e3ec920.yaml","type":"application/yaml","size":639},{"uid":"f96703423a23375f","name":"rest_request","source":"f96703423a23375f.yaml","type":"application/yaml","size":229},{"uid":"d81ac91d5e340596","name":"rest_response","source":"d81ac91d5e340596.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710751001556,"stop":1710751002569,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"3fa44ca5776b6c2c","name":"stage_yaml","source":"3fa44ca5776b6c2c.yaml","type":"application/yaml","size":679},{"uid":"46294cc5243408b0","name":"rest_request","source":"46294cc5243408b0.yaml","type":"application/yaml","size":159},{"uid":"f86f729908e7ff71","name":"rest_response","source":"f86f729908e7ff71.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710751002570,"stop":1710751002584,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"e359052bba940a4a","name":"stage_yaml","source":"e359052bba940a4a.yaml","type":"application/yaml","size":3157},{"uid":"bb01abd1606c7f86","name":"rest_request","source":"bb01abd1606c7f86.yaml","type":"application/yaml","size":159},{"uid":"97844a86cad30a10","name":"rest_response","source":"97844a86cad30a10.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710751002585,"stop":1710751002596,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"34b36b83b1382a45","name":"stage_yaml","source":"34b36b83b1382a45.yaml","type":"application/yaml","size":639},{"uid":"cc1fd83f1560713","name":"rest_request","source":"cc1fd83f1560713.yaml","type":"application/yaml","size":233},{"uid":"e0cbbe28cb5fb4c2","name":"rest_response","source":"e0cbbe28cb5fb4c2.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710751002598,"stop":1710751003610,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"6cbb1ab251b90e6a","name":"stage_yaml","source":"6cbb1ab251b90e6a.yaml","type":"application/yaml","size":685},{"uid":"94cc266ecde00c53","name":"rest_request","source":"94cc266ecde00c53.yaml","type":"application/yaml","size":159},{"uid":"e1d502739afc74cf","name":"rest_response","source":"e1d502739afc74cf.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710751003611,"stop":1710751003624,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"aaaba429e3a4d38e","name":"stage_yaml","source":"aaaba429e3a4d38e.yaml","type":"application/yaml","size":2234},{"uid":"ea61d7ebdae4580c","name":"rest_request","source":"ea61d7ebdae4580c.yaml","type":"application/yaml","size":159},{"uid":"75d112bc6cb6f2cf","name":"rest_response","source":"75d112bc6cb6f2cf.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710751003625,"stop":1710751003636,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"f294f840a3870586","name":"stage_yaml","source":"f294f840a3870586.yaml","type":"application/yaml","size":631},{"uid":"de279d6740d5aa14","name":"rest_request","source":"de279d6740d5aa14.yaml","type":"application/yaml","size":227},{"uid":"8a0c1f840dbfe28d","name":"rest_response","source":"8a0c1f840dbfe28d.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710751003639,"stop":1710751004650,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"d6a1756e2b7859ad","name":"stage_yaml","source":"d6a1756e2b7859ad.yaml","type":"application/yaml","size":685},{"uid":"c086b391504ade2a","name":"rest_request","source":"c086b391504ade2a.yaml","type":"application/yaml","size":159},{"uid":"7163ea14b06c94f8","name":"rest_response","source":"7163ea14b06c94f8.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710751004651,"stop":1710751004664,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"50e37bdea4c01317","name":"stage_yaml","source":"50e37bdea4c01317.yaml","type":"application/yaml","size":2230},{"uid":"d8bf50f0c9f25179","name":"rest_request","source":"d8bf50f0c9f25179.yaml","type":"application/yaml","size":159},{"uid":"6e134fc130e045fd","name":"rest_response","source":"6e134fc130e045fd.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710751004665,"stop":1710751004676,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"9f7c0b7f01ef841f","name":"stage_yaml","source":"9f7c0b7f01ef841f.yaml","type":"application/yaml","size":599},{"uid":"864554b08e48ddee","name":"rest_request","source":"864554b08e48ddee.yaml","type":"application/yaml","size":227},{"uid":"3748d272e19a73cb","name":"rest_response","source":"3748d272e19a73cb.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710751004678,"stop":1710751005691,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"f2fa18385430aaca","name":"stage_yaml","source":"f2fa18385430aaca.yaml","type":"application/yaml","size":679},{"uid":"7de7c06ec6a9d54e","name":"rest_request","source":"7de7c06ec6a9d54e.yaml","type":"application/yaml","size":159},{"uid":"873a617e05624975","name":"rest_response","source":"873a617e05624975.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710751005693,"stop":1710751005707,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"ce6efabf6444f18a","name":"stage_yaml","source":"ce6efabf6444f18a.yaml","type":"application/yaml","size":3125},{"uid":"df578d57afdf6013","name":"rest_request","source":"df578d57afdf6013.yaml","type":"application/yaml","size":159},{"uid":"2c265e32e0bb3742","name":"rest_response","source":"2c265e32e0bb3742.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710751005708,"stop":1710751005719,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"de2e2be6650ce6a2","name":"stage_yaml","source":"de2e2be6650ce6a2.yaml","type":"application/yaml","size":640},{"uid":"116ed02ebe8eb9a1","name":"rest_request","source":"116ed02ebe8eb9a1.yaml","type":"application/yaml","size":227},{"uid":"8a7a759c2f97fe92","name":"rest_response","source":"8a7a759c2f97fe92.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710751005721,"stop":1710751006735,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"395c243838f5d705","name":"stage_yaml","source":"395c243838f5d705.yaml","type":"application/yaml","size":680},{"uid":"66569f8c26e08f2a","name":"rest_request","source":"66569f8c26e08f2a.yaml","type":"application/yaml","size":159},{"uid":"39f2194d6e30d51a","name":"rest_response","source":"39f2194d6e30d51a.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710751006736,"stop":1710751006751,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"90d86a4aa536aaa4","name":"stage_yaml","source":"90d86a4aa536aaa4.yaml","type":"application/yaml","size":3160},{"uid":"3474154198a1b1c2","name":"rest_request","source":"3474154198a1b1c2.yaml","type":"application/yaml","size":159},{"uid":"779b4d9dc45439b0","name":"rest_response","source":"779b4d9dc45439b0.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710751006752,"stop":1710751006760,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"66de64d5cdd87b7d","name":"stage_yaml","source":"66de64d5cdd87b7d.yaml","type":"application/yaml","size":276},{"uid":"7e7c6cb830cac76b","name":"rest_request","source":"7e7c6cb830cac76b.yaml","type":"application/yaml","size":173},{"uid":"876f2d890908f8cd","name":"rest_response","source":"876f2d890908f8cd.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710751006761,"stop":1710751006769,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"90fb95d29411e1c2","name":"stage_yaml","source":"90fb95d29411e1c2.yaml","type":"application/yaml","size":256},{"uid":"c3d5eac25395e56b","name":"rest_request","source":"c3d5eac25395e56b.yaml","type":"application/yaml","size":173},{"uid":"37ff8ab9f8418077","name":"rest_response","source":"37ff8ab9f8418077.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"2e0be9137194"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":342,"unknown":0,"total":357},"items":[{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}},{"uid":"3693a0d7d20df2f5","status":"passed","time":{"start":1709454594886,"stop":1709454602407,"duration":7521}},{"uid":"9be3aae049011bee","status":"passed","time":{"start":1709368102024,"stop":1709368109557,"duration":7533}},{"uid":"653c091d9997b6f3","status":"passed","time":{"start":1709281736635,"stop":1709281744148,"duration":7513}},{"uid":"b118e6ba18c33680","status":"passed","time":{"start":1709195298130,"stop":1709195305654,"duration":7524}},{"uid":"ddd13eef237d8f23","status":"passed","time":{"start":1709108939967,"stop":1709108947497,"duration":7530}},{"uid":"910ff1d8680715f9","status":"passed","time":{"start":1709022512581,"stop":1709022520108,"duration":7527}}]},"tags":[]},"source":"f93f4c1c5eba29cc.json","parameterValues":[]}