{"uid":"c426324e7375df49","name":"Verify power-cap for a single node","fullName":"api.4-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"c6d875da97f650251a49a7570403f1b8","time":{"start":1710837316793,"stop":1710837324314,"duration":7521},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710837316966,"stop":1710837316998,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"8c7baaafa6db4f04","name":"stage_yaml","source":"8c7baaafa6db4f04.yaml","type":"application/yaml","size":333},{"uid":"905218300e64e904","name":"rest_request","source":"905218300e64e904.yaml","type":"application/yaml","size":149},{"uid":"ef5b28c3ff331dca","name":"rest_response","source":"ef5b28c3ff331dca.yaml","type":"application/yaml","size":5768}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710837316998,"stop":1710837317006,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"fa8b6de818da4fe5","name":"stage_yaml","source":"fa8b6de818da4fe5.yaml","type":"application/yaml","size":228},{"uid":"df529b9a3ce2074f","name":"rest_request","source":"df529b9a3ce2074f.yaml","type":"application/yaml","size":173},{"uid":"9252a806f122a8db","name":"rest_response","source":"9252a806f122a8db.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710837317007,"stop":1710837317016,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"77c5ae1710349e2e","name":"stage_yaml","source":"77c5ae1710349e2e.yaml","type":"application/yaml","size":231},{"uid":"c05331cc54942e2c","name":"rest_request","source":"c05331cc54942e2c.yaml","type":"application/yaml","size":173},{"uid":"6b8b3d9ca1461af0","name":"rest_response","source":"6b8b3d9ca1461af0.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710837317017,"stop":1710837317027,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"499b67d24f626ec","name":"stage_yaml","source":"499b67d24f626ec.yaml","type":"application/yaml","size":543},{"uid":"db923d8fb629a9a8","name":"rest_request","source":"db923d8fb629a9a8.yaml","type":"application/yaml","size":166},{"uid":"aa69a21974d63d0f","name":"rest_response","source":"aa69a21974d63d0f.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710837317029,"stop":1710837318041,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"812961f044b77c01","name":"stage_yaml","source":"812961f044b77c01.yaml","type":"application/yaml","size":661},{"uid":"1e8ebaf341c0ea76","name":"rest_request","source":"1e8ebaf341c0ea76.yaml","type":"application/yaml","size":159},{"uid":"950e998707835758","name":"rest_response","source":"950e998707835758.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710837318043,"stop":1710837318058,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"eabfe7930cf3094b","name":"stage_yaml","source":"eabfe7930cf3094b.yaml","type":"application/yaml","size":3543},{"uid":"efd0edda7af5d9e0","name":"rest_request","source":"efd0edda7af5d9e0.yaml","type":"application/yaml","size":159},{"uid":"1c2dbddc35118e1c","name":"rest_response","source":"1c2dbddc35118e1c.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710837318059,"stop":1710837318069,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"914c76ff7fb1479f","name":"stage_yaml","source":"914c76ff7fb1479f.yaml","type":"application/yaml","size":639},{"uid":"5add63a0b648f65d","name":"rest_request","source":"5add63a0b648f65d.yaml","type":"application/yaml","size":229},{"uid":"67ea47f7ab131c65","name":"rest_response","source":"67ea47f7ab131c65.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710837318071,"stop":1710837319085,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"8857e97a2bfc46f8","name":"stage_yaml","source":"8857e97a2bfc46f8.yaml","type":"application/yaml","size":679},{"uid":"c20eecc0c861e9f5","name":"rest_request","source":"c20eecc0c861e9f5.yaml","type":"application/yaml","size":159},{"uid":"dd090588d2e3c76a","name":"rest_response","source":"dd090588d2e3c76a.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710837319086,"stop":1710837319100,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"8e3023960944b272","name":"stage_yaml","source":"8e3023960944b272.yaml","type":"application/yaml","size":3157},{"uid":"813698e29493f622","name":"rest_request","source":"813698e29493f622.yaml","type":"application/yaml","size":159},{"uid":"88d72167fc0cfa91","name":"rest_response","source":"88d72167fc0cfa91.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710837319101,"stop":1710837319111,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"7fa920f3040588d6","name":"stage_yaml","source":"7fa920f3040588d6.yaml","type":"application/yaml","size":639},{"uid":"49da1fb6fe473731","name":"rest_request","source":"49da1fb6fe473731.yaml","type":"application/yaml","size":229},{"uid":"6c227b7015735c2f","name":"rest_response","source":"6c227b7015735c2f.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710837319113,"stop":1710837320125,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"d04e4b5ff3534458","name":"stage_yaml","source":"d04e4b5ff3534458.yaml","type":"application/yaml","size":679},{"uid":"4ceb0e3bbc0b325","name":"rest_request","source":"4ceb0e3bbc0b325.yaml","type":"application/yaml","size":159},{"uid":"283975c3070b60d8","name":"rest_response","source":"283975c3070b60d8.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710837320126,"stop":1710837320139,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"83bebe0e3051948b","name":"stage_yaml","source":"83bebe0e3051948b.yaml","type":"application/yaml","size":3157},{"uid":"80ec301d9fc03322","name":"rest_request","source":"80ec301d9fc03322.yaml","type":"application/yaml","size":159},{"uid":"669b8c5955f3c5ef","name":"rest_response","source":"669b8c5955f3c5ef.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710837320140,"stop":1710837320150,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"3f0d12d682b58479","name":"stage_yaml","source":"3f0d12d682b58479.yaml","type":"application/yaml","size":639},{"uid":"5dcff6e3dbfffdb3","name":"rest_request","source":"5dcff6e3dbfffdb3.yaml","type":"application/yaml","size":233},{"uid":"d119db7d217c3f43","name":"rest_response","source":"d119db7d217c3f43.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710837320152,"stop":1710837321163,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"d0cca39bf245c49","name":"stage_yaml","source":"d0cca39bf245c49.yaml","type":"application/yaml","size":685},{"uid":"f5f0c006377ef09d","name":"rest_request","source":"f5f0c006377ef09d.yaml","type":"application/yaml","size":159},{"uid":"9bd239c437b97451","name":"rest_response","source":"9bd239c437b97451.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710837321164,"stop":1710837321177,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"8f024d566925ef97","name":"stage_yaml","source":"8f024d566925ef97.yaml","type":"application/yaml","size":2234},{"uid":"c1210db825f2c810","name":"rest_request","source":"c1210db825f2c810.yaml","type":"application/yaml","size":159},{"uid":"3f91ab338ea6e6f4","name":"rest_response","source":"3f91ab338ea6e6f4.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710837321177,"stop":1710837321187,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"5e1ce97c152dc3ba","name":"stage_yaml","source":"5e1ce97c152dc3ba.yaml","type":"application/yaml","size":631},{"uid":"32157f1f1334ff30","name":"rest_request","source":"32157f1f1334ff30.yaml","type":"application/yaml","size":227},{"uid":"d223f098de98d88a","name":"rest_response","source":"d223f098de98d88a.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710837321190,"stop":1710837322201,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"a7b17ff34451be2e","name":"stage_yaml","source":"a7b17ff34451be2e.yaml","type":"application/yaml","size":685},{"uid":"84d05f2ddf17eaae","name":"rest_request","source":"84d05f2ddf17eaae.yaml","type":"application/yaml","size":159},{"uid":"3d0fece8e758d35f","name":"rest_response","source":"3d0fece8e758d35f.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710837322202,"stop":1710837322214,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"6ea03ba14a552db5","name":"stage_yaml","source":"6ea03ba14a552db5.yaml","type":"application/yaml","size":2230},{"uid":"fcc0c7a37f36d48a","name":"rest_request","source":"fcc0c7a37f36d48a.yaml","type":"application/yaml","size":159},{"uid":"ecb47b4c3acef217","name":"rest_response","source":"ecb47b4c3acef217.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710837322215,"stop":1710837322225,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"3ab2bdf9baaf88ef","name":"stage_yaml","source":"3ab2bdf9baaf88ef.yaml","type":"application/yaml","size":599},{"uid":"b8f0f0afd4345ba","name":"rest_request","source":"b8f0f0afd4345ba.yaml","type":"application/yaml","size":227},{"uid":"b748ba319f80eae5","name":"rest_response","source":"b748ba319f80eae5.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710837322227,"stop":1710837323240,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"b005fd772c4bc825","name":"stage_yaml","source":"b005fd772c4bc825.yaml","type":"application/yaml","size":679},{"uid":"be214d635326a438","name":"rest_request","source":"be214d635326a438.yaml","type":"application/yaml","size":159},{"uid":"8ba338f9889774cc","name":"rest_response","source":"8ba338f9889774cc.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710837323241,"stop":1710837323254,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"9e951d920cb592a2","name":"stage_yaml","source":"9e951d920cb592a2.yaml","type":"application/yaml","size":3125},{"uid":"c6683bed5532651c","name":"rest_request","source":"c6683bed5532651c.yaml","type":"application/yaml","size":159},{"uid":"8a258584fe4360c4","name":"rest_response","source":"8a258584fe4360c4.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710837323255,"stop":1710837323265,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"9b6b153b60e1aa4c","name":"stage_yaml","source":"9b6b153b60e1aa4c.yaml","type":"application/yaml","size":640},{"uid":"6764f9b28813d5db","name":"rest_request","source":"6764f9b28813d5db.yaml","type":"application/yaml","size":227},{"uid":"99dee26c6a06f160","name":"rest_response","source":"99dee26c6a06f160.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710837323267,"stop":1710837324280,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"819a8e8a75e63d1b","name":"stage_yaml","source":"819a8e8a75e63d1b.yaml","type":"application/yaml","size":680},{"uid":"ed51671e2500a540","name":"rest_request","source":"ed51671e2500a540.yaml","type":"application/yaml","size":159},{"uid":"18dbf3a66cb384eb","name":"rest_response","source":"18dbf3a66cb384eb.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710837324281,"stop":1710837324295,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"835727e01083c918","name":"stage_yaml","source":"835727e01083c918.yaml","type":"application/yaml","size":3160},{"uid":"7257e20a60707237","name":"rest_request","source":"7257e20a60707237.yaml","type":"application/yaml","size":159},{"uid":"eb00e584794da906","name":"rest_response","source":"eb00e584794da906.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710837324296,"stop":1710837324304,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"4423f18b36593ee0","name":"stage_yaml","source":"4423f18b36593ee0.yaml","type":"application/yaml","size":276},{"uid":"1ed01239ba695ea6","name":"rest_request","source":"1ed01239ba695ea6.yaml","type":"application/yaml","size":173},{"uid":"1d747df119f74b61","name":"rest_response","source":"1d747df119f74b61.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710837324305,"stop":1710837324313,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"1493a45ae2e37d21","name":"stage_yaml","source":"1493a45ae2e37d21.yaml","type":"application/yaml","size":256},{"uid":"c8236b22378d66b3","name":"rest_request","source":"c8236b22378d66b3.yaml","type":"application/yaml","size":172},{"uid":"a96e3ca625908398","name":"rest_response","source":"a96e3ca625908398.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"af554c56ae81"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.4-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":15,"broken":0,"skipped":0,"passed":343,"unknown":0,"total":358},"items":[{"uid":"f93f4c1c5eba29cc","status":"passed","time":{"start":1710750999230,"stop":1710751006770,"duration":7540}},{"uid":"9e20165192047008","status":"passed","time":{"start":1710664431673,"stop":1710664439202,"duration":7529}},{"uid":"6a5dcc6dcdb30426","status":"passed","time":{"start":1710578140457,"stop":1710578147974,"duration":7517}},{"uid":"49ea175c771e47bd","status":"passed","time":{"start":1710491767177,"stop":1710491774702,"duration":7525}},{"uid":"b20e11af0e422ee3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7abc7fc3ee50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Cannot find required key 'powerCapLimits'. Path: '/components/0'.\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1710405226983,"stop":1710405229284,"duration":2301}},{"uid":"2c02118087d443f6","status":"passed","time":{"start":1710318517480,"stop":1710318526033,"duration":8553}},{"uid":"b304da4c928bd876","status":"passed","time":{"start":1710232047293,"stop":1710232054815,"duration":7522}},{"uid":"e947305f3ea73a7","status":"passed","time":{"start":1710145732364,"stop":1710145739873,"duration":7509}},{"uid":"203f3879f19acfb","status":"passed","time":{"start":1710059269882,"stop":1710059277406,"duration":7524}},{"uid":"3423604daf4958bd","status":"passed","time":{"start":1709972885265,"stop":1709972892780,"duration":7515}},{"uid":"6599813f282afbb4","status":"passed","time":{"start":1709886513858,"stop":1709886521380,"duration":7522}},{"uid":"b707ea4b27b3cd93","status":"passed","time":{"start":1709800096906,"stop":1709800104426,"duration":7520}},{"uid":"3cee4c4ad3d5110c","status":"passed","time":{"start":1709713795899,"stop":1709713803417,"duration":7518}},{"uid":"51688ca99bc54b04","status":"passed","time":{"start":1709627284488,"stop":1709627292008,"duration":7520}},{"uid":"224d61e3641c5a22","status":"passed","time":{"start":1709541693513,"stop":1709541701038,"duration":7525}},{"uid":"3693a0d7d20df2f5","status":"passed","time":{"start":1709454594886,"stop":1709454602407,"duration":7521}},{"uid":"9be3aae049011bee","status":"passed","time":{"start":1709368102024,"stop":1709368109557,"duration":7533}},{"uid":"653c091d9997b6f3","status":"passed","time":{"start":1709281736635,"stop":1709281744148,"duration":7513}},{"uid":"b118e6ba18c33680","status":"passed","time":{"start":1709195298130,"stop":1709195305654,"duration":7524}},{"uid":"ddd13eef237d8f23","status":"passed","time":{"start":1709108939967,"stop":1709108947497,"duration":7530}}]},"tags":[]},"source":"c426324e7375df49.json","parameterValues":[]}