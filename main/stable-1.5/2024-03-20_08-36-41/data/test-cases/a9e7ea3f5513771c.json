{"uid":"a9e7ea3f5513771c","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1710923768133,"stop":1710923775662,"duration":7529},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710923768307,"stop":1710923768338,"duration":31},"status":"passed","steps":[],"attachments":[{"uid":"b56b6e695da33d9c","name":"stage_yaml","source":"b56b6e695da33d9c.yaml","type":"application/yaml","size":333},{"uid":"68bc57d5f7de9101","name":"rest_request","source":"68bc57d5f7de9101.yaml","type":"application/yaml","size":149},{"uid":"872d46c57306a359","name":"rest_response","source":"872d46c57306a359.yaml","type":"application/yaml","size":5775}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710923768339,"stop":1710923768347,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"4db9481247830a9a","name":"stage_yaml","source":"4db9481247830a9a.yaml","type":"application/yaml","size":228},{"uid":"f98598870cb54768","name":"rest_request","source":"f98598870cb54768.yaml","type":"application/yaml","size":173},{"uid":"1ff99147c7297fe3","name":"rest_response","source":"1ff99147c7297fe3.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710923768348,"stop":1710923768356,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"4843fc01ca5e8bd0","name":"stage_yaml","source":"4843fc01ca5e8bd0.yaml","type":"application/yaml","size":231},{"uid":"10ed9c6fbbf0fc04","name":"rest_request","source":"10ed9c6fbbf0fc04.yaml","type":"application/yaml","size":173},{"uid":"83d56b18a42b6243","name":"rest_response","source":"83d56b18a42b6243.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710923768357,"stop":1710923768366,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"60116c245d976c6c","name":"stage_yaml","source":"60116c245d976c6c.yaml","type":"application/yaml","size":543},{"uid":"280f23775e7cfda8","name":"rest_request","source":"280f23775e7cfda8.yaml","type":"application/yaml","size":166},{"uid":"80f91d46855c7f26","name":"rest_response","source":"80f91d46855c7f26.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710923768368,"stop":1710923769381,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"47ee41d4bc732c7","name":"stage_yaml","source":"47ee41d4bc732c7.yaml","type":"application/yaml","size":661},{"uid":"ffeebd6a8192bb71","name":"rest_request","source":"ffeebd6a8192bb71.yaml","type":"application/yaml","size":159},{"uid":"ed6d08bc707d62da","name":"rest_response","source":"ed6d08bc707d62da.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710923769382,"stop":1710923769397,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"4bb8c519c377f516","name":"stage_yaml","source":"4bb8c519c377f516.yaml","type":"application/yaml","size":3543},{"uid":"d6a9d3c4cf81843d","name":"rest_request","source":"d6a9d3c4cf81843d.yaml","type":"application/yaml","size":159},{"uid":"580a333573fe745c","name":"rest_response","source":"580a333573fe745c.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710923769398,"stop":1710923769410,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"bba656cb4543b383","name":"stage_yaml","source":"bba656cb4543b383.yaml","type":"application/yaml","size":639},{"uid":"6a24d44c8c4cf0ed","name":"rest_request","source":"6a24d44c8c4cf0ed.yaml","type":"application/yaml","size":229},{"uid":"3db1d148312c42df","name":"rest_response","source":"3db1d148312c42df.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710923769412,"stop":1710923770426,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"cbd4d6deb006bd44","name":"stage_yaml","source":"cbd4d6deb006bd44.yaml","type":"application/yaml","size":679},{"uid":"d6e54886d7c64ef8","name":"rest_request","source":"d6e54886d7c64ef8.yaml","type":"application/yaml","size":159},{"uid":"f63c4012dd3da471","name":"rest_response","source":"f63c4012dd3da471.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710923770427,"stop":1710923770441,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"26c6c96673745a1b","name":"stage_yaml","source":"26c6c96673745a1b.yaml","type":"application/yaml","size":3157},{"uid":"a4f465ac5b6ba457","name":"rest_request","source":"a4f465ac5b6ba457.yaml","type":"application/yaml","size":159},{"uid":"da7280a3878a1cd9","name":"rest_response","source":"da7280a3878a1cd9.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710923770442,"stop":1710923770452,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"d324aecde766e9d1","name":"stage_yaml","source":"d324aecde766e9d1.yaml","type":"application/yaml","size":639},{"uid":"7837c00124403ea4","name":"rest_request","source":"7837c00124403ea4.yaml","type":"application/yaml","size":229},{"uid":"d278b75329991a3","name":"rest_response","source":"d278b75329991a3.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710923770455,"stop":1710923771468,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"8c38ebd780b9e6a5","name":"stage_yaml","source":"8c38ebd780b9e6a5.yaml","type":"application/yaml","size":679},{"uid":"cda6484193a0c543","name":"rest_request","source":"cda6484193a0c543.yaml","type":"application/yaml","size":159},{"uid":"5d77815b48e95fd2","name":"rest_response","source":"5d77815b48e95fd2.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710923771469,"stop":1710923771483,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"1d6f7859f4c7b138","name":"stage_yaml","source":"1d6f7859f4c7b138.yaml","type":"application/yaml","size":3157},{"uid":"143fa7005069c77a","name":"rest_request","source":"143fa7005069c77a.yaml","type":"application/yaml","size":159},{"uid":"f2e23ecb1c6cf5bc","name":"rest_response","source":"f2e23ecb1c6cf5bc.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710923771483,"stop":1710923771494,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"a62a528540f87c86","name":"stage_yaml","source":"a62a528540f87c86.yaml","type":"application/yaml","size":639},{"uid":"394a162c69677f1e","name":"rest_request","source":"394a162c69677f1e.yaml","type":"application/yaml","size":233},{"uid":"333dd7994199651","name":"rest_response","source":"333dd7994199651.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710923771496,"stop":1710923772508,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"8e1e62432e80b86d","name":"stage_yaml","source":"8e1e62432e80b86d.yaml","type":"application/yaml","size":685},{"uid":"f491250e9221db30","name":"rest_request","source":"f491250e9221db30.yaml","type":"application/yaml","size":159},{"uid":"6edffc47b8e211f","name":"rest_response","source":"6edffc47b8e211f.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710923772509,"stop":1710923772521,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"54f7a961f556417a","name":"stage_yaml","source":"54f7a961f556417a.yaml","type":"application/yaml","size":2234},{"uid":"9f3f37c91c28161c","name":"rest_request","source":"9f3f37c91c28161c.yaml","type":"application/yaml","size":159},{"uid":"58cb26b1cf3122d4","name":"rest_response","source":"58cb26b1cf3122d4.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710923772522,"stop":1710923772532,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"7129d8755f233de2","name":"stage_yaml","source":"7129d8755f233de2.yaml","type":"application/yaml","size":631},{"uid":"9d64fcdc7c9172eb","name":"rest_request","source":"9d64fcdc7c9172eb.yaml","type":"application/yaml","size":227},{"uid":"7dcdd26dfe8466c2","name":"rest_response","source":"7dcdd26dfe8466c2.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710923772534,"stop":1710923773545,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"4b5b29449055dc2d","name":"stage_yaml","source":"4b5b29449055dc2d.yaml","type":"application/yaml","size":685},{"uid":"91e5f1bc355c161f","name":"rest_request","source":"91e5f1bc355c161f.yaml","type":"application/yaml","size":159},{"uid":"9447ee4081291eda","name":"rest_response","source":"9447ee4081291eda.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710923773546,"stop":1710923773559,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"e5062d5681045f2c","name":"stage_yaml","source":"e5062d5681045f2c.yaml","type":"application/yaml","size":2230},{"uid":"a40ac31bac61d1ae","name":"rest_request","source":"a40ac31bac61d1ae.yaml","type":"application/yaml","size":159},{"uid":"1b6ae7fa0f809821","name":"rest_response","source":"1b6ae7fa0f809821.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710923773560,"stop":1710923773570,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"2233a359deb0529e","name":"stage_yaml","source":"2233a359deb0529e.yaml","type":"application/yaml","size":599},{"uid":"2e1b7ea262af6df4","name":"rest_request","source":"2e1b7ea262af6df4.yaml","type":"application/yaml","size":227},{"uid":"2d10440d3958fae1","name":"rest_response","source":"2d10440d3958fae1.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710923773572,"stop":1710923774585,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"c19eb4aa3dc87b4b","name":"stage_yaml","source":"c19eb4aa3dc87b4b.yaml","type":"application/yaml","size":679},{"uid":"f10aac666ac9bb1a","name":"rest_request","source":"f10aac666ac9bb1a.yaml","type":"application/yaml","size":159},{"uid":"b0df7cb740799005","name":"rest_response","source":"b0df7cb740799005.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710923774586,"stop":1710923774600,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"c466862d8fb30d11","name":"stage_yaml","source":"c466862d8fb30d11.yaml","type":"application/yaml","size":3125},{"uid":"e52d8c5702d87843","name":"rest_request","source":"e52d8c5702d87843.yaml","type":"application/yaml","size":159},{"uid":"ab8b0cb687cdb160","name":"rest_response","source":"ab8b0cb687cdb160.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710923774601,"stop":1710923774612,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"4a93ad4e50d6da4f","name":"stage_yaml","source":"4a93ad4e50d6da4f.yaml","type":"application/yaml","size":640},{"uid":"127dc0e4610139d4","name":"rest_request","source":"127dc0e4610139d4.yaml","type":"application/yaml","size":227},{"uid":"6394a4a18579288e","name":"rest_response","source":"6394a4a18579288e.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710923774614,"stop":1710923775627,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"e15b56161bb9bd90","name":"stage_yaml","source":"e15b56161bb9bd90.yaml","type":"application/yaml","size":680},{"uid":"641bf04f7d34448c","name":"rest_request","source":"641bf04f7d34448c.yaml","type":"application/yaml","size":159},{"uid":"cc6aa5fdab5bfdef","name":"rest_response","source":"cc6aa5fdab5bfdef.yaml","type":"application/yaml","size":613}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710923775629,"stop":1710923775642,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"8679282f47aaa7a1","name":"stage_yaml","source":"8679282f47aaa7a1.yaml","type":"application/yaml","size":3160},{"uid":"ce109be053d51af","name":"rest_request","source":"ce109be053d51af.yaml","type":"application/yaml","size":159},{"uid":"1b42e84afc37a1a8","name":"rest_response","source":"1b42e84afc37a1a8.yaml","type":"application/yaml","size":613}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710923775643,"stop":1710923775652,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"876e48e6e611e73","name":"stage_yaml","source":"876e48e6e611e73.yaml","type":"application/yaml","size":276},{"uid":"6aa9d04c2f04b72e","name":"rest_request","source":"6aa9d04c2f04b72e.yaml","type":"application/yaml","size":173},{"uid":"ccff6fd966bd57c3","name":"rest_response","source":"ccff6fd966bd57c3.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710923775653,"stop":1710923775662,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"90ed2b35bb75b7b5","name":"stage_yaml","source":"90ed2b35bb75b7b5.yaml","type":"application/yaml","size":256},{"uid":"f4055847bf190505","name":"rest_request","source":"f4055847bf190505.yaml","type":"application/yaml","size":173},{"uid":"5e6707598cfced99","name":"rest_response","source":"5e6707598cfced99.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"114bd4491a97"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":249,"unknown":0,"total":261},"items":[{"uid":"899a2bb90d4903b","status":"passed","time":{"start":1710837467505,"stop":1710837475030,"duration":7525}},{"uid":"422f10d7514d6748","status":"passed","time":{"start":1710750889872,"stop":1710750897412,"duration":7540}},{"uid":"32cacdc2c4c70e69","status":"passed","time":{"start":1710664579528,"stop":1710664587058,"duration":7530}},{"uid":"39bf2032189f66c6","status":"passed","time":{"start":1710578153397,"stop":1710578160926,"duration":7529}},{"uid":"adc9cc27a3624a4","status":"passed","time":{"start":1710491803126,"stop":1710491810659,"duration":7533}},{"uid":"b9a0bd7f4f9b72d5","status":"passed","time":{"start":1710405415255,"stop":1710405422777,"duration":7522}},{"uid":"86db003187594457","status":"passed","time":{"start":1710318525596,"stop":1710318533156,"duration":7560}},{"uid":"7e9340c63a8e2d73","status":"passed","time":{"start":1710232050345,"stop":1710232057866,"duration":7521}},{"uid":"4c65a85489270035","status":"passed","time":{"start":1710145709514,"stop":1710145717035,"duration":7521}},{"uid":"fc43821b03f3b857","status":"passed","time":{"start":1710059300887,"stop":1710059308403,"duration":7516}},{"uid":"140896651c8ffbc2","status":"passed","time":{"start":1709972892285,"stop":1709972899806,"duration":7521}},{"uid":"e9b77ab31cb43c65","status":"passed","time":{"start":1709886507180,"stop":1709886514693,"duration":7513}},{"uid":"85649831832e12cf","status":"passed","time":{"start":1709800070823,"stop":1709800078340,"duration":7517}},{"uid":"9eba4aab02b3cf00","status":"passed","time":{"start":1709713771262,"stop":1709713778784,"duration":7522}},{"uid":"5abaa9cdabcd6eb5","status":"passed","time":{"start":1709627312404,"stop":1709627319942,"duration":7538}},{"uid":"64b5756b04235656","status":"passed","time":{"start":1709541686173,"stop":1709541693696,"duration":7523}},{"uid":"f2c0dc2d16479cac","status":"passed","time":{"start":1709454519686,"stop":1709454527216,"duration":7530}},{"uid":"d08af2531eea84fd","status":"passed","time":{"start":1709368099681,"stop":1709368107213,"duration":7532}},{"uid":"5820811ee57624f7","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f1c84b75d30>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1709281755559,"stop":1709281764969,"duration":9410}},{"uid":"6ddd8db2472f2cbb","status":"passed","time":{"start":1709195331178,"stop":1709195338702,"duration":7524}}]},"tags":[]},"source":"a9e7ea3f5513771c.json","parameterValues":[]}