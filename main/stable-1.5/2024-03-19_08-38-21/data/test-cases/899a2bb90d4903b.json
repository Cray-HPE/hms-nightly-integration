{"uid":"899a2bb90d4903b","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1710837467505,"stop":1710837475030,"duration":7525},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710837467678,"stop":1710837467710,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"d5e5952fb8becf2e","name":"stage_yaml","source":"d5e5952fb8becf2e.yaml","type":"application/yaml","size":333},{"uid":"b8d900aae3ac1c32","name":"rest_request","source":"b8d900aae3ac1c32.yaml","type":"application/yaml","size":149},{"uid":"e60d5ca0847ba95e","name":"rest_response","source":"e60d5ca0847ba95e.yaml","type":"application/yaml","size":5769}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710837467710,"stop":1710837467718,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"523038a9daed2177","name":"stage_yaml","source":"523038a9daed2177.yaml","type":"application/yaml","size":228},{"uid":"c5dd9d394773ca37","name":"rest_request","source":"c5dd9d394773ca37.yaml","type":"application/yaml","size":173},{"uid":"e0302c2b93a4cb28","name":"rest_response","source":"e0302c2b93a4cb28.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710837467719,"stop":1710837467727,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"b1160d2541dd9243","name":"stage_yaml","source":"b1160d2541dd9243.yaml","type":"application/yaml","size":231},{"uid":"8aea3f3a3ac0822d","name":"rest_request","source":"8aea3f3a3ac0822d.yaml","type":"application/yaml","size":173},{"uid":"f7805c470c39cef4","name":"rest_response","source":"f7805c470c39cef4.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710837467728,"stop":1710837467738,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"a60b0cddc42aec1f","name":"stage_yaml","source":"a60b0cddc42aec1f.yaml","type":"application/yaml","size":543},{"uid":"ef7e0ca9bd52e8f8","name":"rest_request","source":"ef7e0ca9bd52e8f8.yaml","type":"application/yaml","size":166},{"uid":"e811ecb1b9d45e7b","name":"rest_response","source":"e811ecb1b9d45e7b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710837467740,"stop":1710837468752,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"70bbb74db9900051","name":"stage_yaml","source":"70bbb74db9900051.yaml","type":"application/yaml","size":661},{"uid":"a24f8e054135a1d2","name":"rest_request","source":"a24f8e054135a1d2.yaml","type":"application/yaml","size":159},{"uid":"93592b845e176c15","name":"rest_response","source":"93592b845e176c15.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710837468753,"stop":1710837468768,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"4d4c7d385ff80eb2","name":"stage_yaml","source":"4d4c7d385ff80eb2.yaml","type":"application/yaml","size":3543},{"uid":"cff2c2a3389c2f06","name":"rest_request","source":"cff2c2a3389c2f06.yaml","type":"application/yaml","size":159},{"uid":"236a0edfc9e627d0","name":"rest_response","source":"236a0edfc9e627d0.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710837468769,"stop":1710837468779,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"3b19cfa82d09a5df","name":"stage_yaml","source":"3b19cfa82d09a5df.yaml","type":"application/yaml","size":639},{"uid":"f58acd0fe80e01b7","name":"rest_request","source":"f58acd0fe80e01b7.yaml","type":"application/yaml","size":229},{"uid":"1e0cf9f461d7d972","name":"rest_response","source":"1e0cf9f461d7d972.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710837468781,"stop":1710837469793,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"c039d667e35f8445","name":"stage_yaml","source":"c039d667e35f8445.yaml","type":"application/yaml","size":679},{"uid":"b12de8e00469aea5","name":"rest_request","source":"b12de8e00469aea5.yaml","type":"application/yaml","size":159},{"uid":"93bad0628694bf79","name":"rest_response","source":"93bad0628694bf79.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710837469794,"stop":1710837469810,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"acd95f70a5c75387","name":"stage_yaml","source":"acd95f70a5c75387.yaml","type":"application/yaml","size":3157},{"uid":"6eb51adb662633e8","name":"rest_request","source":"6eb51adb662633e8.yaml","type":"application/yaml","size":159},{"uid":"cd95413e3b5ab5bf","name":"rest_response","source":"cd95413e3b5ab5bf.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710837469810,"stop":1710837469820,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"f2b9fa58abd7d2c3","name":"stage_yaml","source":"f2b9fa58abd7d2c3.yaml","type":"application/yaml","size":639},{"uid":"71d43b86589e6a23","name":"rest_request","source":"71d43b86589e6a23.yaml","type":"application/yaml","size":229},{"uid":"c7a4e8e96dfc07a","name":"rest_response","source":"c7a4e8e96dfc07a.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710837469823,"stop":1710837470837,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"68df0ea6b12a4ef5","name":"stage_yaml","source":"68df0ea6b12a4ef5.yaml","type":"application/yaml","size":679},{"uid":"883784239a0e29b8","name":"rest_request","source":"883784239a0e29b8.yaml","type":"application/yaml","size":159},{"uid":"fe21f4afe60d9f95","name":"rest_response","source":"fe21f4afe60d9f95.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710837470838,"stop":1710837470852,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"9a8733a8f90d72e3","name":"stage_yaml","source":"9a8733a8f90d72e3.yaml","type":"application/yaml","size":3157},{"uid":"f1bcd785becf42","name":"rest_request","source":"f1bcd785becf42.yaml","type":"application/yaml","size":159},{"uid":"8c4949d7ab9020c3","name":"rest_response","source":"8c4949d7ab9020c3.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710837470853,"stop":1710837470863,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"d610ae18e392015e","name":"stage_yaml","source":"d610ae18e392015e.yaml","type":"application/yaml","size":639},{"uid":"baef393bc99b50f9","name":"rest_request","source":"baef393bc99b50f9.yaml","type":"application/yaml","size":233},{"uid":"6c497965dfccf708","name":"rest_response","source":"6c497965dfccf708.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710837470865,"stop":1710837471876,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"ac8f8108f18ea898","name":"stage_yaml","source":"ac8f8108f18ea898.yaml","type":"application/yaml","size":685},{"uid":"679df31b31e7ac5c","name":"rest_request","source":"679df31b31e7ac5c.yaml","type":"application/yaml","size":159},{"uid":"e93c8a228bafbc83","name":"rest_response","source":"e93c8a228bafbc83.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710837471877,"stop":1710837471890,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"b1a5651bd6ae83f8","name":"stage_yaml","source":"b1a5651bd6ae83f8.yaml","type":"application/yaml","size":2234},{"uid":"daaa970f166ec8a8","name":"rest_request","source":"daaa970f166ec8a8.yaml","type":"application/yaml","size":159},{"uid":"f2ea4e226d6f1507","name":"rest_response","source":"f2ea4e226d6f1507.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710837471891,"stop":1710837471901,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"f863c47fd0fbe9f5","name":"stage_yaml","source":"f863c47fd0fbe9f5.yaml","type":"application/yaml","size":631},{"uid":"5343737d84c98f82","name":"rest_request","source":"5343737d84c98f82.yaml","type":"application/yaml","size":227},{"uid":"61ec116f1162dab8","name":"rest_response","source":"61ec116f1162dab8.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710837471904,"stop":1710837472915,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"4dafaebfef95f780","name":"stage_yaml","source":"4dafaebfef95f780.yaml","type":"application/yaml","size":685},{"uid":"c9dfbf863a3560dd","name":"rest_request","source":"c9dfbf863a3560dd.yaml","type":"application/yaml","size":159},{"uid":"ba59903fdbce8ba5","name":"rest_response","source":"ba59903fdbce8ba5.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710837472916,"stop":1710837472928,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"229549e9d9590c81","name":"stage_yaml","source":"229549e9d9590c81.yaml","type":"application/yaml","size":2230},{"uid":"4bad6c27d7c818b9","name":"rest_request","source":"4bad6c27d7c818b9.yaml","type":"application/yaml","size":159},{"uid":"e80d114a00736af9","name":"rest_response","source":"e80d114a00736af9.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710837472929,"stop":1710837472939,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"e91dd0bd9531053f","name":"stage_yaml","source":"e91dd0bd9531053f.yaml","type":"application/yaml","size":599},{"uid":"683d50ee2a816d6f","name":"rest_request","source":"683d50ee2a816d6f.yaml","type":"application/yaml","size":227},{"uid":"b45e5510de69662b","name":"rest_response","source":"b45e5510de69662b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710837472942,"stop":1710837473954,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"9416fc61f9e954bb","name":"stage_yaml","source":"9416fc61f9e954bb.yaml","type":"application/yaml","size":679},{"uid":"ef89051da4219fde","name":"rest_request","source":"ef89051da4219fde.yaml","type":"application/yaml","size":159},{"uid":"6239e4cbe7d5e011","name":"rest_response","source":"6239e4cbe7d5e011.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710837473955,"stop":1710837473969,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"9ee199d6268b75d5","name":"stage_yaml","source":"9ee199d6268b75d5.yaml","type":"application/yaml","size":3125},{"uid":"6f70f928be5580ff","name":"rest_request","source":"6f70f928be5580ff.yaml","type":"application/yaml","size":159},{"uid":"4d19b8e4d40c52cf","name":"rest_response","source":"4d19b8e4d40c52cf.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710837473970,"stop":1710837473980,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"d316ab56f6d8f760","name":"stage_yaml","source":"d316ab56f6d8f760.yaml","type":"application/yaml","size":640},{"uid":"eab81b959172d96","name":"rest_request","source":"eab81b959172d96.yaml","type":"application/yaml","size":227},{"uid":"24234a5e166d2945","name":"rest_response","source":"24234a5e166d2945.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710837473983,"stop":1710837474996,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"d31830eb4733137c","name":"stage_yaml","source":"d31830eb4733137c.yaml","type":"application/yaml","size":680},{"uid":"752f19ed18dd8a71","name":"rest_request","source":"752f19ed18dd8a71.yaml","type":"application/yaml","size":159},{"uid":"b69fc8b640b80f4","name":"rest_response","source":"b69fc8b640b80f4.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710837474997,"stop":1710837475011,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"b1f42749e61bf906","name":"stage_yaml","source":"b1f42749e61bf906.yaml","type":"application/yaml","size":3160},{"uid":"c62a40a1129e763e","name":"rest_request","source":"c62a40a1129e763e.yaml","type":"application/yaml","size":159},{"uid":"754f07d120a1e7df","name":"rest_response","source":"754f07d120a1e7df.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710837475012,"stop":1710837475020,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"7d6a32d2ddb78c55","name":"stage_yaml","source":"7d6a32d2ddb78c55.yaml","type":"application/yaml","size":276},{"uid":"d249b0c73ffd0a66","name":"rest_request","source":"d249b0c73ffd0a66.yaml","type":"application/yaml","size":173},{"uid":"bd4a67e7b64f19d5","name":"rest_response","source":"bd4a67e7b64f19d5.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710837475021,"stop":1710837475029,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"c20ba6099d4350a6","name":"stage_yaml","source":"c20ba6099d4350a6.yaml","type":"application/yaml","size":256},{"uid":"17b125efbd646f6b","name":"rest_request","source":"17b125efbd646f6b.yaml","type":"application/yaml","size":172},{"uid":"6cf2adecb0e54d91","name":"rest_response","source":"6cf2adecb0e54d91.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"3786b3728363"},{"name":"thread","value":"9-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":248,"unknown":0,"total":260},"items":[{"uid":"422f10d7514d6748","status":"passed","time":{"start":1710750889872,"stop":1710750897412,"duration":7540}},{"uid":"32cacdc2c4c70e69","status":"passed","time":{"start":1710664579528,"stop":1710664587058,"duration":7530}},{"uid":"39bf2032189f66c6","status":"passed","time":{"start":1710578153397,"stop":1710578160926,"duration":7529}},{"uid":"adc9cc27a3624a4","status":"passed","time":{"start":1710491803126,"stop":1710491810659,"duration":7533}},{"uid":"b9a0bd7f4f9b72d5","status":"passed","time":{"start":1710405415255,"stop":1710405422777,"duration":7522}},{"uid":"86db003187594457","status":"passed","time":{"start":1710318525596,"stop":1710318533156,"duration":7560}},{"uid":"7e9340c63a8e2d73","status":"passed","time":{"start":1710232050345,"stop":1710232057866,"duration":7521}},{"uid":"4c65a85489270035","status":"passed","time":{"start":1710145709514,"stop":1710145717035,"duration":7521}},{"uid":"fc43821b03f3b857","status":"passed","time":{"start":1710059300887,"stop":1710059308403,"duration":7516}},{"uid":"140896651c8ffbc2","status":"passed","time":{"start":1709972892285,"stop":1709972899806,"duration":7521}},{"uid":"e9b77ab31cb43c65","status":"passed","time":{"start":1709886507180,"stop":1709886514693,"duration":7513}},{"uid":"85649831832e12cf","status":"passed","time":{"start":1709800070823,"stop":1709800078340,"duration":7517}},{"uid":"9eba4aab02b3cf00","status":"passed","time":{"start":1709713771262,"stop":1709713778784,"duration":7522}},{"uid":"5abaa9cdabcd6eb5","status":"passed","time":{"start":1709627312404,"stop":1709627319942,"duration":7538}},{"uid":"64b5756b04235656","status":"passed","time":{"start":1709541686173,"stop":1709541693696,"duration":7523}},{"uid":"f2c0dc2d16479cac","status":"passed","time":{"start":1709454519686,"stop":1709454527216,"duration":7530}},{"uid":"d08af2531eea84fd","status":"passed","time":{"start":1709368099681,"stop":1709368107213,"duration":7532}},{"uid":"5820811ee57624f7","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f1c84b75d30>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1709281755559,"stop":1709281764969,"duration":9410}},{"uid":"6ddd8db2472f2cbb","status":"passed","time":{"start":1709195331178,"stop":1709195338702,"duration":7524}},{"uid":"c553809dbdd783b9","status":"passed","time":{"start":1709108942418,"stop":1709108949939,"duration":7521}}]},"tags":[]},"source":"899a2bb90d4903b.json","parameterValues":[]}