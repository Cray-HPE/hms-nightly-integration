{"uid":"422f10d7514d6748","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1710750889872,"stop":1710750897412,"duration":7540},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710750890048,"stop":1710750890081,"duration":33},"status":"passed","steps":[],"attachments":[{"uid":"d62f0f127e202842","name":"stage_yaml","source":"d62f0f127e202842.yaml","type":"application/yaml","size":333},{"uid":"4f406462ade300ba","name":"rest_request","source":"4f406462ade300ba.yaml","type":"application/yaml","size":149},{"uid":"af39a6e9913b0a24","name":"rest_response","source":"af39a6e9913b0a24.yaml","type":"application/yaml","size":5769}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710750890082,"stop":1710750890090,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"e61effacb7b46106","name":"stage_yaml","source":"e61effacb7b46106.yaml","type":"application/yaml","size":228},{"uid":"f4e7bd4df62b4070","name":"rest_request","source":"f4e7bd4df62b4070.yaml","type":"application/yaml","size":173},{"uid":"15d1531c40bda635","name":"rest_response","source":"15d1531c40bda635.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710750890091,"stop":1710750890099,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"23a397fdfe0afb77","name":"stage_yaml","source":"23a397fdfe0afb77.yaml","type":"application/yaml","size":231},{"uid":"4f17cf2dbf1507cf","name":"rest_request","source":"4f17cf2dbf1507cf.yaml","type":"application/yaml","size":173},{"uid":"b5db8ab48da6846f","name":"rest_response","source":"b5db8ab48da6846f.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710750890100,"stop":1710750890111,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"3a9566136b1c273a","name":"stage_yaml","source":"3a9566136b1c273a.yaml","type":"application/yaml","size":543},{"uid":"fcbfeebf381f5c01","name":"rest_request","source":"fcbfeebf381f5c01.yaml","type":"application/yaml","size":166},{"uid":"1ded908f51b1dd69","name":"rest_response","source":"1ded908f51b1dd69.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710750890113,"stop":1710750891127,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"5180e3763d1be5d0","name":"stage_yaml","source":"5180e3763d1be5d0.yaml","type":"application/yaml","size":661},{"uid":"5b8b2197d6e57fc0","name":"rest_request","source":"5b8b2197d6e57fc0.yaml","type":"application/yaml","size":159},{"uid":"cded26f4c6e8132b","name":"rest_response","source":"cded26f4c6e8132b.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710750891128,"stop":1710750891143,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"f7228e0f44ad2b90","name":"stage_yaml","source":"f7228e0f44ad2b90.yaml","type":"application/yaml","size":3543},{"uid":"9ad8d764d3bcdba9","name":"rest_request","source":"9ad8d764d3bcdba9.yaml","type":"application/yaml","size":159},{"uid":"44164cb64c02d60b","name":"rest_response","source":"44164cb64c02d60b.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710750891144,"stop":1710750891155,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"85d86a829e8d4851","name":"stage_yaml","source":"85d86a829e8d4851.yaml","type":"application/yaml","size":639},{"uid":"be5a378e7016c1ac","name":"rest_request","source":"be5a378e7016c1ac.yaml","type":"application/yaml","size":229},{"uid":"705887c248feaaa","name":"rest_response","source":"705887c248feaaa.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710750891157,"stop":1710750892170,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"bf23615951969940","name":"stage_yaml","source":"bf23615951969940.yaml","type":"application/yaml","size":679},{"uid":"620bcb19d12cb4c3","name":"rest_request","source":"620bcb19d12cb4c3.yaml","type":"application/yaml","size":159},{"uid":"ef19e2248c1261e2","name":"rest_response","source":"ef19e2248c1261e2.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710750892172,"stop":1710750892186,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"f96331ff8ee5c959","name":"stage_yaml","source":"f96331ff8ee5c959.yaml","type":"application/yaml","size":3157},{"uid":"e43965b7776474d9","name":"rest_request","source":"e43965b7776474d9.yaml","type":"application/yaml","size":159},{"uid":"52fc9067b7e67d4f","name":"rest_response","source":"52fc9067b7e67d4f.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710750892187,"stop":1710750892197,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"8e8d286fa05593d","name":"stage_yaml","source":"8e8d286fa05593d.yaml","type":"application/yaml","size":639},{"uid":"db6d2f7adc0214f","name":"rest_request","source":"db6d2f7adc0214f.yaml","type":"application/yaml","size":229},{"uid":"348867fd7b0b412c","name":"rest_response","source":"348867fd7b0b412c.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710750892199,"stop":1710750893213,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"db2ab470e3203c1d","name":"stage_yaml","source":"db2ab470e3203c1d.yaml","type":"application/yaml","size":679},{"uid":"c1201f06f6f857b9","name":"rest_request","source":"c1201f06f6f857b9.yaml","type":"application/yaml","size":159},{"uid":"66a48d8a3c6d4927","name":"rest_response","source":"66a48d8a3c6d4927.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710750893214,"stop":1710750893228,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"b2445f00efb3a006","name":"stage_yaml","source":"b2445f00efb3a006.yaml","type":"application/yaml","size":3157},{"uid":"6922731b77a8f1ef","name":"rest_request","source":"6922731b77a8f1ef.yaml","type":"application/yaml","size":159},{"uid":"be942608fe2973d2","name":"rest_response","source":"be942608fe2973d2.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710750893229,"stop":1710750893239,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"8147377390cf69b2","name":"stage_yaml","source":"8147377390cf69b2.yaml","type":"application/yaml","size":639},{"uid":"2f4438338e6c6aad","name":"rest_request","source":"2f4438338e6c6aad.yaml","type":"application/yaml","size":233},{"uid":"36f08966e1b42706","name":"rest_response","source":"36f08966e1b42706.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710750893242,"stop":1710750894253,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"bd6186886dff66ae","name":"stage_yaml","source":"bd6186886dff66ae.yaml","type":"application/yaml","size":685},{"uid":"17932ce98a5955d5","name":"rest_request","source":"17932ce98a5955d5.yaml","type":"application/yaml","size":159},{"uid":"f1e9ed1be80198c7","name":"rest_response","source":"f1e9ed1be80198c7.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710750894254,"stop":1710750894267,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"c946633d7e3f4814","name":"stage_yaml","source":"c946633d7e3f4814.yaml","type":"application/yaml","size":2234},{"uid":"2642990c291e1f41","name":"rest_request","source":"2642990c291e1f41.yaml","type":"application/yaml","size":159},{"uid":"d51d1241229d165","name":"rest_response","source":"d51d1241229d165.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710750894268,"stop":1710750894279,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"907dd056705842bc","name":"stage_yaml","source":"907dd056705842bc.yaml","type":"application/yaml","size":631},{"uid":"27485d40fcc77a94","name":"rest_request","source":"27485d40fcc77a94.yaml","type":"application/yaml","size":227},{"uid":"5e81eb6042822b4b","name":"rest_response","source":"5e81eb6042822b4b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710750894281,"stop":1710750895293,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"268877dbe80488ae","name":"stage_yaml","source":"268877dbe80488ae.yaml","type":"application/yaml","size":685},{"uid":"ef4fb04e3e4b1dd1","name":"rest_request","source":"ef4fb04e3e4b1dd1.yaml","type":"application/yaml","size":159},{"uid":"a5def5e460c5b1db","name":"rest_response","source":"a5def5e460c5b1db.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710750895294,"stop":1710750895307,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"6333be66761f390d","name":"stage_yaml","source":"6333be66761f390d.yaml","type":"application/yaml","size":2230},{"uid":"67df9dc8ed19a13d","name":"rest_request","source":"67df9dc8ed19a13d.yaml","type":"application/yaml","size":159},{"uid":"7ba49dc76d3c8557","name":"rest_response","source":"7ba49dc76d3c8557.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710750895308,"stop":1710750895319,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"d50166871673671e","name":"stage_yaml","source":"d50166871673671e.yaml","type":"application/yaml","size":599},{"uid":"e19e2fb840166af","name":"rest_request","source":"e19e2fb840166af.yaml","type":"application/yaml","size":227},{"uid":"7fa3c9343958b91c","name":"rest_response","source":"7fa3c9343958b91c.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710750895322,"stop":1710750896335,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"aa5c532ffc0bf066","name":"stage_yaml","source":"aa5c532ffc0bf066.yaml","type":"application/yaml","size":679},{"uid":"11888bd94fa5308a","name":"rest_request","source":"11888bd94fa5308a.yaml","type":"application/yaml","size":159},{"uid":"48caa197a6237423","name":"rest_response","source":"48caa197a6237423.yaml","type":"application/yaml","size":613}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710750896336,"stop":1710750896350,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"1faf840136beb8d9","name":"stage_yaml","source":"1faf840136beb8d9.yaml","type":"application/yaml","size":3125},{"uid":"ff4e88940f3f2758","name":"rest_request","source":"ff4e88940f3f2758.yaml","type":"application/yaml","size":159},{"uid":"d8c252830b5c1737","name":"rest_response","source":"d8c252830b5c1737.yaml","type":"application/yaml","size":613}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710750896351,"stop":1710750896362,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"d52d59f45883cc4d","name":"stage_yaml","source":"d52d59f45883cc4d.yaml","type":"application/yaml","size":640},{"uid":"69c1d21237d7743a","name":"rest_request","source":"69c1d21237d7743a.yaml","type":"application/yaml","size":227},{"uid":"c0649df759ebc611","name":"rest_response","source":"c0649df759ebc611.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710750896364,"stop":1710750897377,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"b1f0dac00282fe8b","name":"stage_yaml","source":"b1f0dac00282fe8b.yaml","type":"application/yaml","size":680},{"uid":"bcb32c1bc811f05","name":"rest_request","source":"bcb32c1bc811f05.yaml","type":"application/yaml","size":159},{"uid":"ab0c552f3c25c359","name":"rest_response","source":"ab0c552f3c25c359.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710750897379,"stop":1710750897393,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"fa336c1f6bf26f91","name":"stage_yaml","source":"fa336c1f6bf26f91.yaml","type":"application/yaml","size":3160},{"uid":"35a1b89a6a103829","name":"rest_request","source":"35a1b89a6a103829.yaml","type":"application/yaml","size":159},{"uid":"3987b824a3ff9b96","name":"rest_response","source":"3987b824a3ff9b96.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710750897394,"stop":1710750897403,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"eb41525d61f16588","name":"stage_yaml","source":"eb41525d61f16588.yaml","type":"application/yaml","size":276},{"uid":"435155555a03e8bf","name":"rest_request","source":"435155555a03e8bf.yaml","type":"application/yaml","size":173},{"uid":"a7607d5809f5c9b1","name":"rest_response","source":"a7607d5809f5c9b1.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710750897404,"stop":1710750897412,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"6377bb9bdee61dcf","name":"stage_yaml","source":"6377bb9bdee61dcf.yaml","type":"application/yaml","size":256},{"uid":"15968f0d40502026","name":"rest_request","source":"15968f0d40502026.yaml","type":"application/yaml","size":173},{"uid":"7b7465b48cfafded","name":"rest_response","source":"7b7465b48cfafded.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"8ee89bfbd3aa"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":247,"unknown":0,"total":259},"items":[{"uid":"32cacdc2c4c70e69","status":"passed","time":{"start":1710664579528,"stop":1710664587058,"duration":7530}},{"uid":"39bf2032189f66c6","status":"passed","time":{"start":1710578153397,"stop":1710578160926,"duration":7529}},{"uid":"adc9cc27a3624a4","status":"passed","time":{"start":1710491803126,"stop":1710491810659,"duration":7533}},{"uid":"b9a0bd7f4f9b72d5","status":"passed","time":{"start":1710405415255,"stop":1710405422777,"duration":7522}},{"uid":"86db003187594457","status":"passed","time":{"start":1710318525596,"stop":1710318533156,"duration":7560}},{"uid":"7e9340c63a8e2d73","status":"passed","time":{"start":1710232050345,"stop":1710232057866,"duration":7521}},{"uid":"4c65a85489270035","status":"passed","time":{"start":1710145709514,"stop":1710145717035,"duration":7521}},{"uid":"fc43821b03f3b857","status":"passed","time":{"start":1710059300887,"stop":1710059308403,"duration":7516}},{"uid":"140896651c8ffbc2","status":"passed","time":{"start":1709972892285,"stop":1709972899806,"duration":7521}},{"uid":"e9b77ab31cb43c65","status":"passed","time":{"start":1709886507180,"stop":1709886514693,"duration":7513}},{"uid":"85649831832e12cf","status":"passed","time":{"start":1709800070823,"stop":1709800078340,"duration":7517}},{"uid":"9eba4aab02b3cf00","status":"passed","time":{"start":1709713771262,"stop":1709713778784,"duration":7522}},{"uid":"5abaa9cdabcd6eb5","status":"passed","time":{"start":1709627312404,"stop":1709627319942,"duration":7538}},{"uid":"64b5756b04235656","status":"passed","time":{"start":1709541686173,"stop":1709541693696,"duration":7523}},{"uid":"f2c0dc2d16479cac","status":"passed","time":{"start":1709454519686,"stop":1709454527216,"duration":7530}},{"uid":"d08af2531eea84fd","status":"passed","time":{"start":1709368099681,"stop":1709368107213,"duration":7532}},{"uid":"5820811ee57624f7","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f1c84b75d30>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1709281755559,"stop":1709281764969,"duration":9410}},{"uid":"6ddd8db2472f2cbb","status":"passed","time":{"start":1709195331178,"stop":1709195338702,"duration":7524}},{"uid":"c553809dbdd783b9","status":"passed","time":{"start":1709108942418,"stop":1709108949939,"duration":7521}},{"uid":"44398011ddfabf35","status":"passed","time":{"start":1709022561301,"stop":1709022568826,"duration":7525}}]},"tags":[]},"source":"422f10d7514d6748.json","parameterValues":[]}