{"uid":"4ed741631971d09","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1711528561528,"stop":1711528569059,"duration":7531},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711528561706,"stop":1711528561738,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"63f37dd0529d0bfa","name":"stage_yaml","source":"63f37dd0529d0bfa.yaml","type":"application/yaml","size":333},{"uid":"f3b6b302832e9c31","name":"rest_request","source":"f3b6b302832e9c31.yaml","type":"application/yaml","size":149},{"uid":"43061f67f3aad98a","name":"rest_response","source":"43061f67f3aad98a.yaml","type":"application/yaml","size":5776}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711528561738,"stop":1711528561746,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"d53a897541823edc","name":"stage_yaml","source":"d53a897541823edc.yaml","type":"application/yaml","size":228},{"uid":"a5809786058639a3","name":"rest_request","source":"a5809786058639a3.yaml","type":"application/yaml","size":173},{"uid":"109815b65b300c5f","name":"rest_response","source":"109815b65b300c5f.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711528561747,"stop":1711528561755,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"676a999a4c4f8aa6","name":"stage_yaml","source":"676a999a4c4f8aa6.yaml","type":"application/yaml","size":231},{"uid":"a52fe40a667c9d12","name":"rest_request","source":"a52fe40a667c9d12.yaml","type":"application/yaml","size":173},{"uid":"c7baeaad0632d39b","name":"rest_response","source":"c7baeaad0632d39b.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711528561756,"stop":1711528561767,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"32f79740016e2198","name":"stage_yaml","source":"32f79740016e2198.yaml","type":"application/yaml","size":543},{"uid":"ba52a06006091539","name":"rest_request","source":"ba52a06006091539.yaml","type":"application/yaml","size":166},{"uid":"3044bde47762c48f","name":"rest_response","source":"3044bde47762c48f.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711528561769,"stop":1711528562782,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"3ec647269faa04cd","name":"stage_yaml","source":"3ec647269faa04cd.yaml","type":"application/yaml","size":661},{"uid":"eab9173ad8b28fe2","name":"rest_request","source":"eab9173ad8b28fe2.yaml","type":"application/yaml","size":159},{"uid":"3b1360d98c67311e","name":"rest_response","source":"3b1360d98c67311e.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711528562783,"stop":1711528562798,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"1a14a496b078a11b","name":"stage_yaml","source":"1a14a496b078a11b.yaml","type":"application/yaml","size":3543},{"uid":"7187e3fd753ef9fe","name":"rest_request","source":"7187e3fd753ef9fe.yaml","type":"application/yaml","size":159},{"uid":"672c236eda145f1d","name":"rest_response","source":"672c236eda145f1d.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711528562799,"stop":1711528562809,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6271088994375c48","name":"stage_yaml","source":"6271088994375c48.yaml","type":"application/yaml","size":639},{"uid":"64f21aba33c2c88f","name":"rest_request","source":"64f21aba33c2c88f.yaml","type":"application/yaml","size":229},{"uid":"6d8134e96e9586d6","name":"rest_response","source":"6d8134e96e9586d6.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711528562811,"stop":1711528563825,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"c6dea0b8d72c9767","name":"stage_yaml","source":"c6dea0b8d72c9767.yaml","type":"application/yaml","size":679},{"uid":"12cbfc7df7763462","name":"rest_request","source":"12cbfc7df7763462.yaml","type":"application/yaml","size":159},{"uid":"54495661a578aba3","name":"rest_response","source":"54495661a578aba3.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711528563826,"stop":1711528563840,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"1ca869a284c51fbf","name":"stage_yaml","source":"1ca869a284c51fbf.yaml","type":"application/yaml","size":3157},{"uid":"81dc19fea03a37f9","name":"rest_request","source":"81dc19fea03a37f9.yaml","type":"application/yaml","size":159},{"uid":"e40936684663e86a","name":"rest_response","source":"e40936684663e86a.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711528563841,"stop":1711528563851,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"c4ab87ef8e37e92e","name":"stage_yaml","source":"c4ab87ef8e37e92e.yaml","type":"application/yaml","size":639},{"uid":"12c8f23efbac54fb","name":"rest_request","source":"12c8f23efbac54fb.yaml","type":"application/yaml","size":229},{"uid":"498d523dc51bb815","name":"rest_response","source":"498d523dc51bb815.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711528563853,"stop":1711528564866,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"3151830d34bac667","name":"stage_yaml","source":"3151830d34bac667.yaml","type":"application/yaml","size":679},{"uid":"2a83b55a40c81871","name":"rest_request","source":"2a83b55a40c81871.yaml","type":"application/yaml","size":159},{"uid":"85a9e755115b72c1","name":"rest_response","source":"85a9e755115b72c1.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711528564867,"stop":1711528564880,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"e8e481a410ececf8","name":"stage_yaml","source":"e8e481a410ececf8.yaml","type":"application/yaml","size":3157},{"uid":"3d9cf430a529076b","name":"rest_request","source":"3d9cf430a529076b.yaml","type":"application/yaml","size":159},{"uid":"d97a380010bef853","name":"rest_response","source":"d97a380010bef853.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711528564881,"stop":1711528564891,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"4826ab8f7cc3586e","name":"stage_yaml","source":"4826ab8f7cc3586e.yaml","type":"application/yaml","size":639},{"uid":"fb114f8558d9b97","name":"rest_request","source":"fb114f8558d9b97.yaml","type":"application/yaml","size":233},{"uid":"e9ea87974496b325","name":"rest_response","source":"e9ea87974496b325.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711528564894,"stop":1711528565905,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"3ab997be7e351a1a","name":"stage_yaml","source":"3ab997be7e351a1a.yaml","type":"application/yaml","size":685},{"uid":"87e36d2d0c97d8d","name":"rest_request","source":"87e36d2d0c97d8d.yaml","type":"application/yaml","size":159},{"uid":"6734582221fc18af","name":"rest_response","source":"6734582221fc18af.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711528565906,"stop":1711528565918,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"84052afc440f2456","name":"stage_yaml","source":"84052afc440f2456.yaml","type":"application/yaml","size":2234},{"uid":"b6c5f230e2b0efbe","name":"rest_request","source":"b6c5f230e2b0efbe.yaml","type":"application/yaml","size":159},{"uid":"95e3b9ff8dbd0796","name":"rest_response","source":"95e3b9ff8dbd0796.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711528565919,"stop":1711528565929,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"e0b8c1ca174979b7","name":"stage_yaml","source":"e0b8c1ca174979b7.yaml","type":"application/yaml","size":631},{"uid":"df12c59979a4a498","name":"rest_request","source":"df12c59979a4a498.yaml","type":"application/yaml","size":227},{"uid":"ce2eb749d50c362b","name":"rest_response","source":"ce2eb749d50c362b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711528565932,"stop":1711528566943,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"274941809c6af16","name":"stage_yaml","source":"274941809c6af16.yaml","type":"application/yaml","size":685},{"uid":"91881cf22dc1353a","name":"rest_request","source":"91881cf22dc1353a.yaml","type":"application/yaml","size":159},{"uid":"318ab1a43c913c09","name":"rest_response","source":"318ab1a43c913c09.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711528566944,"stop":1711528566957,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"3fbd691980a4b56c","name":"stage_yaml","source":"3fbd691980a4b56c.yaml","type":"application/yaml","size":2230},{"uid":"a7bfbb9b59fb25c7","name":"rest_request","source":"a7bfbb9b59fb25c7.yaml","type":"application/yaml","size":159},{"uid":"dc31db298ccc6d49","name":"rest_response","source":"dc31db298ccc6d49.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711528566957,"stop":1711528566968,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"55f6934650bba313","name":"stage_yaml","source":"55f6934650bba313.yaml","type":"application/yaml","size":599},{"uid":"2c413bc53c11b400","name":"rest_request","source":"2c413bc53c11b400.yaml","type":"application/yaml","size":227},{"uid":"774c308654a2b336","name":"rest_response","source":"774c308654a2b336.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711528566970,"stop":1711528567983,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"1cf53959e127372","name":"stage_yaml","source":"1cf53959e127372.yaml","type":"application/yaml","size":679},{"uid":"52c3006478adcd9a","name":"rest_request","source":"52c3006478adcd9a.yaml","type":"application/yaml","size":159},{"uid":"6c1da046612617d1","name":"rest_response","source":"6c1da046612617d1.yaml","type":"application/yaml","size":612}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711528567984,"stop":1711528567998,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"3f6f0f5d586ff6f3","name":"stage_yaml","source":"3f6f0f5d586ff6f3.yaml","type":"application/yaml","size":3125},{"uid":"e5d30c87cf4b865d","name":"rest_request","source":"e5d30c87cf4b865d.yaml","type":"application/yaml","size":159},{"uid":"15044c497230a35a","name":"rest_response","source":"15044c497230a35a.yaml","type":"application/yaml","size":612}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711528567999,"stop":1711528568009,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"e24cfe749dcfa683","name":"stage_yaml","source":"e24cfe749dcfa683.yaml","type":"application/yaml","size":640},{"uid":"7d0dfd5ae503b5c5","name":"rest_request","source":"7d0dfd5ae503b5c5.yaml","type":"application/yaml","size":227},{"uid":"2b24b3583f7223ad","name":"rest_response","source":"2b24b3583f7223ad.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711528568011,"stop":1711528569025,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"48ef7256978139a0","name":"stage_yaml","source":"48ef7256978139a0.yaml","type":"application/yaml","size":680},{"uid":"944f404d72e7c0b5","name":"rest_request","source":"944f404d72e7c0b5.yaml","type":"application/yaml","size":159},{"uid":"be803b3caed5aeef","name":"rest_response","source":"be803b3caed5aeef.yaml","type":"application/yaml","size":612}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711528569026,"stop":1711528569040,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"e16bd79459b97322","name":"stage_yaml","source":"e16bd79459b97322.yaml","type":"application/yaml","size":3160},{"uid":"c5bdc4a731574a44","name":"rest_request","source":"c5bdc4a731574a44.yaml","type":"application/yaml","size":159},{"uid":"505d79e9791201f7","name":"rest_response","source":"505d79e9791201f7.yaml","type":"application/yaml","size":612}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711528569041,"stop":1711528569049,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"502d8df05bf000bf","name":"stage_yaml","source":"502d8df05bf000bf.yaml","type":"application/yaml","size":276},{"uid":"25fa730088d38bf4","name":"rest_request","source":"25fa730088d38bf4.yaml","type":"application/yaml","size":173},{"uid":"5ffbcd8de1248a50","name":"rest_response","source":"5ffbcd8de1248a50.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711528569050,"stop":1711528569058,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"caead5d5820d79c4","name":"stage_yaml","source":"caead5d5820d79c4.yaml","type":"application/yaml","size":256},{"uid":"8eefcc6949bb28a","name":"rest_request","source":"8eefcc6949bb28a.yaml","type":"application/yaml","size":173},{"uid":"601902a44e589a7c","name":"rest_response","source":"601902a44e589a7c.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"555ca3b5e5a4"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":24,"broken":0,"skipped":0,"passed":291,"unknown":0,"total":315},"items":[{"uid":"63d6c4da42c86e5b","status":"passed","time":{"start":1711442216363,"stop":1711442223887,"duration":7524}},{"uid":"bdcf4b3d50d9f4e4","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7fc0f78f1e50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1711355758894,"stop":1711355768292,"duration":9398}},{"uid":"e8b1a165ced852c2","status":"passed","time":{"start":1711269366481,"stop":1711269374004,"duration":7523}},{"uid":"5eedcd182ab1d026","status":"passed","time":{"start":1711182820301,"stop":1711182827822,"duration":7521}},{"uid":"1e300ccf73710132","status":"passed","time":{"start":1711096713221,"stop":1711096720708,"duration":7487}},{"uid":"73ca9cdf0d7f6ff6","status":"passed","time":{"start":1711010099288,"stop":1711010106813,"duration":7525}},{"uid":"7da7b705a442206b","status":"passed","time":{"start":1710923741174,"stop":1710923748706,"duration":7532}},{"uid":"daa16175fa1c64a3","status":"passed","time":{"start":1710837342858,"stop":1710837350385,"duration":7527}},{"uid":"ab24d59b82423592","status":"passed","time":{"start":1710751007797,"stop":1710751015324,"duration":7527}},{"uid":"999f0712eb510528","status":"passed","time":{"start":1710664514035,"stop":1710664521549,"duration":7514}},{"uid":"2eec06889f4cecb1","status":"passed","time":{"start":1710578140047,"stop":1710578147577,"duration":7530}},{"uid":"938ae40e48e600a3","status":"passed","time":{"start":1710491645193,"stop":1710491652710,"duration":7517}},{"uid":"47eaa7f4f1f8d19c","status":"passed","time":{"start":1710405345297,"stop":1710405353836,"duration":8539}},{"uid":"8e76cd9a2f55a9e9","status":"passed","time":{"start":1710318925029,"stop":1710318932554,"duration":7525}},{"uid":"463f6b5f370cca84","status":"passed","time":{"start":1710232500226,"stop":1710232507751,"duration":7525}},{"uid":"aa563a08b41c0a7d","status":"passed","time":{"start":1710146060368,"stop":1710146067897,"duration":7529}},{"uid":"459f49593df9eddc","status":"passed","time":{"start":1710059697527,"stop":1710059705053,"duration":7526}},{"uid":"3064108c3971fb8a","status":"passed","time":{"start":1709973332893,"stop":1709973340404,"duration":7511}},{"uid":"6bb1710d9832ab1a","status":"passed","time":{"start":1709886954729,"stop":1709886962247,"duration":7518}},{"uid":"a0d52d3dd43d60d3","status":"passed","time":{"start":1709800490226,"stop":1709800497751,"duration":7525}}]},"tags":[]},"source":"4ed741631971d09.json","parameterValues":[]}