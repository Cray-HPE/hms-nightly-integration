- name: Ensure that the SLS network data for a specific network can be retrieved
  request:
    url: "{sls_base_url}/v1/networks/{network}"
    method: GET
    verify: !bool "{verify}"
  response:
    status_code: 200
    verify_response_with:
      function: tavern.testutils.helpers:validate_pykwalify
      extra_kwargs:
        schema:
          type: map
          mapping:
            Name:
              type: str
            FullName:
              type: str
            IPRanges:
              type: seq
              matching: all
              sequence:
                - type: str
                  pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+/[0-9]+"
            Type:
              type: str
            LastUpdated:
              type: int
            LastUpdatedTime:
              type: str
              required: True
              pattern: "[0-9]{{4}}-[0-9]{{2}}-[0-9]{{2}} [0-9]{{2}}:[0-9]{{2}}:[0-9]{{2}}.[0-9]+ \\+[0-9]{{4}} \\+[0-9]{{4}}|[0-9]{{4}}-[0-9]{{2}}-[0-9]{{2}} [0-9]{{2}}:[0-9]{{2}}:[0-9]{{2}}.[0-9]+ \\+[0-9]{{4}} UTC"
            ExtraProperties:
              type: map
              required: False
              allowempty: True
              mapping:
                CIDR:
                  type: str
                  required: False
                  pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+/[0-9]+"
                MTU:
                  type: int
                  required: False
                MyASN:
                  type: int
                  required: False
                PeerASN:
                  type: int
                  required: False
                Subnets:
                  type: seq
                  required: False
                  matching: all
                  sequence:
                    - type: map
                      allowempty: True
                      mapping:
                        CIDR:
                          type: str
                          required: False
                          pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+/[0-9]+"
                        DHCPEnd:
                          type: str
                          required: False
                          pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+"
                        DHCPStart:
                          type: str
                          required: False
                          pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+"
                        FullName:
                          type: str
                          required: False
                        Gateway:
                          type: str
                          required: False
                          pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+"
                        IPReservations:
                          type: seq
                          required: False
                          matching: all
                          sequence:
                            - type: map
                              mapping:
                                Aliases:
                                  type: seq
                                  matching: all
                                  sequence:
                                    - type: str
                                Comment:
                                  type: str
                                IPAddress:
                                  type: str
                                  pattern: "[0-9]+.[0-9]+.[0-9]+.[0-9]+"
                                Name:
                                  type: str
                        MetalLBPoolName:
                          type: str
                          required: False
                        Name:
                          type: str
                          required: False
                        ReservationEnd:
                          type: str
                          required: False
                        ReservationStart:
                          type: str
                          required: False
                        VlanID:
                          type: int
                          required: False
                SystemDefaultRoute:
                  type: str
                  required: False
                VlanRange:
                  type: seq
                  required: False
                  matching: all
                  sequence:
                    - type: int