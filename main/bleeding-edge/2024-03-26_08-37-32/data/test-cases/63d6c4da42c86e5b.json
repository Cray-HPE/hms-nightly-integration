{"uid":"63d6c4da42c86e5b","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1711442216363,"stop":1711442223887,"duration":7524},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1711442216537,"stop":1711442216569,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"8e938bef1664dc34","name":"stage_yaml","source":"8e938bef1664dc34.yaml","type":"application/yaml","size":333},{"uid":"7f440f64ff94cbef","name":"rest_request","source":"7f440f64ff94cbef.yaml","type":"application/yaml","size":149},{"uid":"55bdc9bc497942b0","name":"rest_response","source":"55bdc9bc497942b0.yaml","type":"application/yaml","size":5772}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1711442216570,"stop":1711442216578,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"7926cae40b844f34","name":"stage_yaml","source":"7926cae40b844f34.yaml","type":"application/yaml","size":228},{"uid":"2afd28fa9e99bb61","name":"rest_request","source":"2afd28fa9e99bb61.yaml","type":"application/yaml","size":173},{"uid":"d8405c1d2b40b142","name":"rest_response","source":"d8405c1d2b40b142.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1711442216578,"stop":1711442216586,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"ff8de020398ee39c","name":"stage_yaml","source":"ff8de020398ee39c.yaml","type":"application/yaml","size":231},{"uid":"9444abe802962b","name":"rest_request","source":"9444abe802962b.yaml","type":"application/yaml","size":173},{"uid":"887f5ef500c8263c","name":"rest_response","source":"887f5ef500c8263c.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1711442216587,"stop":1711442216597,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"1e57c8a47f74caf3","name":"stage_yaml","source":"1e57c8a47f74caf3.yaml","type":"application/yaml","size":543},{"uid":"929c03efba801b71","name":"rest_request","source":"929c03efba801b71.yaml","type":"application/yaml","size":166},{"uid":"83be211cd2d00f33","name":"rest_response","source":"83be211cd2d00f33.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1711442216600,"stop":1711442217613,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"c38731520887d07f","name":"stage_yaml","source":"c38731520887d07f.yaml","type":"application/yaml","size":661},{"uid":"dc2c3e6042da5df6","name":"rest_request","source":"dc2c3e6042da5df6.yaml","type":"application/yaml","size":159},{"uid":"466bf318bb232986","name":"rest_response","source":"466bf318bb232986.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1711442217614,"stop":1711442217629,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"7a896257c3c2b88e","name":"stage_yaml","source":"7a896257c3c2b88e.yaml","type":"application/yaml","size":3543},{"uid":"83f578e96684d6bf","name":"rest_request","source":"83f578e96684d6bf.yaml","type":"application/yaml","size":159},{"uid":"d1b2f7e2b42aeb63","name":"rest_response","source":"d1b2f7e2b42aeb63.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1711442217629,"stop":1711442217640,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"45f5411da4d6a779","name":"stage_yaml","source":"45f5411da4d6a779.yaml","type":"application/yaml","size":639},{"uid":"fa59d2a1d815cd80","name":"rest_request","source":"fa59d2a1d815cd80.yaml","type":"application/yaml","size":229},{"uid":"1aed31389af63537","name":"rest_response","source":"1aed31389af63537.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1711442217642,"stop":1711442218655,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"ea001780556c435b","name":"stage_yaml","source":"ea001780556c435b.yaml","type":"application/yaml","size":679},{"uid":"15d1f3e7c8805a74","name":"rest_request","source":"15d1f3e7c8805a74.yaml","type":"application/yaml","size":159},{"uid":"a7c08b49e2eb6385","name":"rest_response","source":"a7c08b49e2eb6385.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1711442218656,"stop":1711442218670,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"76b03689717bef64","name":"stage_yaml","source":"76b03689717bef64.yaml","type":"application/yaml","size":3157},{"uid":"11d4dd8ef762b3e","name":"rest_request","source":"11d4dd8ef762b3e.yaml","type":"application/yaml","size":159},{"uid":"54b80e58175936c4","name":"rest_response","source":"54b80e58175936c4.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1711442218671,"stop":1711442218681,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"30e78022fe28f98b","name":"stage_yaml","source":"30e78022fe28f98b.yaml","type":"application/yaml","size":639},{"uid":"569998e9080a882a","name":"rest_request","source":"569998e9080a882a.yaml","type":"application/yaml","size":229},{"uid":"cfd4ec3ded4e14e0","name":"rest_response","source":"cfd4ec3ded4e14e0.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1711442218683,"stop":1711442219696,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"9e172241f26cec3","name":"stage_yaml","source":"9e172241f26cec3.yaml","type":"application/yaml","size":679},{"uid":"3ad365caaa5f7d42","name":"rest_request","source":"3ad365caaa5f7d42.yaml","type":"application/yaml","size":159},{"uid":"87f21bb19039d716","name":"rest_response","source":"87f21bb19039d716.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1711442219697,"stop":1711442219710,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"bd7ac122742ab788","name":"stage_yaml","source":"bd7ac122742ab788.yaml","type":"application/yaml","size":3157},{"uid":"4193c319d521b276","name":"rest_request","source":"4193c319d521b276.yaml","type":"application/yaml","size":159},{"uid":"c6b99a803efba3ac","name":"rest_response","source":"c6b99a803efba3ac.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1711442219711,"stop":1711442219721,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"d4107885c80a8b90","name":"stage_yaml","source":"d4107885c80a8b90.yaml","type":"application/yaml","size":639},{"uid":"403b3315c1b708bf","name":"rest_request","source":"403b3315c1b708bf.yaml","type":"application/yaml","size":233},{"uid":"4fc5e4b06c1e7c4a","name":"rest_response","source":"4fc5e4b06c1e7c4a.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1711442219724,"stop":1711442220735,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"54c1c03177840c1d","name":"stage_yaml","source":"54c1c03177840c1d.yaml","type":"application/yaml","size":685},{"uid":"8cedec932b3caf5b","name":"rest_request","source":"8cedec932b3caf5b.yaml","type":"application/yaml","size":159},{"uid":"1527de4f2e02daba","name":"rest_response","source":"1527de4f2e02daba.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1711442220736,"stop":1711442220748,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"394d47160fb7c63f","name":"stage_yaml","source":"394d47160fb7c63f.yaml","type":"application/yaml","size":2234},{"uid":"c3287da32bf81cad","name":"rest_request","source":"c3287da32bf81cad.yaml","type":"application/yaml","size":159},{"uid":"e7d07be68bdec71f","name":"rest_response","source":"e7d07be68bdec71f.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1711442220749,"stop":1711442220759,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"f1338e5db2a5cc97","name":"stage_yaml","source":"f1338e5db2a5cc97.yaml","type":"application/yaml","size":631},{"uid":"2aaef2cc5b2f950","name":"rest_request","source":"2aaef2cc5b2f950.yaml","type":"application/yaml","size":227},{"uid":"b61bc4c656f30903","name":"rest_response","source":"b61bc4c656f30903.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1711442220762,"stop":1711442221773,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"632cf5189b988ea","name":"stage_yaml","source":"632cf5189b988ea.yaml","type":"application/yaml","size":685},{"uid":"6ad8d5ee334478","name":"rest_request","source":"6ad8d5ee334478.yaml","type":"application/yaml","size":159},{"uid":"5ab04f775eeb7258","name":"rest_response","source":"5ab04f775eeb7258.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1711442221774,"stop":1711442221786,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"5890ee441347ebe","name":"stage_yaml","source":"5890ee441347ebe.yaml","type":"application/yaml","size":2230},{"uid":"af552f0f24dafd6","name":"rest_request","source":"af552f0f24dafd6.yaml","type":"application/yaml","size":159},{"uid":"74f3cf83bce8ea4a","name":"rest_response","source":"74f3cf83bce8ea4a.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1711442221787,"stop":1711442221797,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6459881bed808987","name":"stage_yaml","source":"6459881bed808987.yaml","type":"application/yaml","size":599},{"uid":"34ea0f7e73990223","name":"rest_request","source":"34ea0f7e73990223.yaml","type":"application/yaml","size":227},{"uid":"1c697d9be2d6a520","name":"rest_response","source":"1c697d9be2d6a520.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1711442221800,"stop":1711442222812,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"ecffbadba553b128","name":"stage_yaml","source":"ecffbadba553b128.yaml","type":"application/yaml","size":679},{"uid":"5c54851f953c8f12","name":"rest_request","source":"5c54851f953c8f12.yaml","type":"application/yaml","size":159},{"uid":"1bcd08e3430980be","name":"rest_response","source":"1bcd08e3430980be.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1711442222813,"stop":1711442222827,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"8bb7873bb8f25617","name":"stage_yaml","source":"8bb7873bb8f25617.yaml","type":"application/yaml","size":3125},{"uid":"9bf451fc454af454","name":"rest_request","source":"9bf451fc454af454.yaml","type":"application/yaml","size":159},{"uid":"6e3fea16bdd3bebc","name":"rest_response","source":"6e3fea16bdd3bebc.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1711442222827,"stop":1711442222837,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"abcd19a7879a4d46","name":"stage_yaml","source":"abcd19a7879a4d46.yaml","type":"application/yaml","size":640},{"uid":"9f13dddf112c2753","name":"rest_request","source":"9f13dddf112c2753.yaml","type":"application/yaml","size":227},{"uid":"bfde186b06639ac","name":"rest_response","source":"bfde186b06639ac.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1711442222840,"stop":1711442223853,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"10934043f1081418","name":"stage_yaml","source":"10934043f1081418.yaml","type":"application/yaml","size":680},{"uid":"4dc2761cf733c7ca","name":"rest_request","source":"4dc2761cf733c7ca.yaml","type":"application/yaml","size":159},{"uid":"ca8aed80c9a9f57d","name":"rest_response","source":"ca8aed80c9a9f57d.yaml","type":"application/yaml","size":612}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1711442223854,"stop":1711442223868,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"d8e25df96ebfe572","name":"stage_yaml","source":"d8e25df96ebfe572.yaml","type":"application/yaml","size":3160},{"uid":"b2549b93ec85fed7","name":"rest_request","source":"b2549b93ec85fed7.yaml","type":"application/yaml","size":159},{"uid":"133024b4aff49718","name":"rest_response","source":"133024b4aff49718.yaml","type":"application/yaml","size":612}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1711442223868,"stop":1711442223877,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"1fbc4a7e3525a005","name":"stage_yaml","source":"1fbc4a7e3525a005.yaml","type":"application/yaml","size":276},{"uid":"c3898e157f121864","name":"rest_request","source":"c3898e157f121864.yaml","type":"application/yaml","size":173},{"uid":"428bc3a9d9415fb3","name":"rest_response","source":"428bc3a9d9415fb3.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1711442223878,"stop":1711442223886,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"fb006baaecfc4978","name":"stage_yaml","source":"fb006baaecfc4978.yaml","type":"application/yaml","size":256},{"uid":"519f83104a862315","name":"rest_request","source":"519f83104a862315.yaml","type":"application/yaml","size":172},{"uid":"8ce0cdf13e0c2cf6","name":"rest_response","source":"8ce0cdf13e0c2cf6.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"ca422752ce1b"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":24,"broken":0,"skipped":0,"passed":290,"unknown":0,"total":314},"items":[{"uid":"bdcf4b3d50d9f4e4","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7fc0f78f1e50>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1711355758894,"stop":1711355768292,"duration":9398}},{"uid":"e8b1a165ced852c2","status":"passed","time":{"start":1711269366481,"stop":1711269374004,"duration":7523}},{"uid":"5eedcd182ab1d026","status":"passed","time":{"start":1711182820301,"stop":1711182827822,"duration":7521}},{"uid":"1e300ccf73710132","status":"passed","time":{"start":1711096713221,"stop":1711096720708,"duration":7487}},{"uid":"73ca9cdf0d7f6ff6","status":"passed","time":{"start":1711010099288,"stop":1711010106813,"duration":7525}},{"uid":"7da7b705a442206b","status":"passed","time":{"start":1710923741174,"stop":1710923748706,"duration":7532}},{"uid":"daa16175fa1c64a3","status":"passed","time":{"start":1710837342858,"stop":1710837350385,"duration":7527}},{"uid":"ab24d59b82423592","status":"passed","time":{"start":1710751007797,"stop":1710751015324,"duration":7527}},{"uid":"999f0712eb510528","status":"passed","time":{"start":1710664514035,"stop":1710664521549,"duration":7514}},{"uid":"2eec06889f4cecb1","status":"passed","time":{"start":1710578140047,"stop":1710578147577,"duration":7530}},{"uid":"938ae40e48e600a3","status":"passed","time":{"start":1710491645193,"stop":1710491652710,"duration":7517}},{"uid":"47eaa7f4f1f8d19c","status":"passed","time":{"start":1710405345297,"stop":1710405353836,"duration":8539}},{"uid":"8e76cd9a2f55a9e9","status":"passed","time":{"start":1710318925029,"stop":1710318932554,"duration":7525}},{"uid":"463f6b5f370cca84","status":"passed","time":{"start":1710232500226,"stop":1710232507751,"duration":7525}},{"uid":"aa563a08b41c0a7d","status":"passed","time":{"start":1710146060368,"stop":1710146067897,"duration":7529}},{"uid":"459f49593df9eddc","status":"passed","time":{"start":1710059697527,"stop":1710059705053,"duration":7526}},{"uid":"3064108c3971fb8a","status":"passed","time":{"start":1709973332893,"stop":1709973340404,"duration":7511}},{"uid":"6bb1710d9832ab1a","status":"passed","time":{"start":1709886954729,"stop":1709886962247,"duration":7518}},{"uid":"a0d52d3dd43d60d3","status":"passed","time":{"start":1709800490226,"stop":1709800497751,"duration":7525}},{"uid":"b0ce999d6b596e4f","status":"passed","time":{"start":1709714182036,"stop":1709714189554,"duration":7518}}]},"tags":[]},"source":"63d6c4da42c86e5b.json","parameterValues":[]}