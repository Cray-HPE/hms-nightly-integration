{"uid":"ac9a90658ed856c8","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1689669040652,"stop":1689669048319,"duration":7667},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1689669040862,"stop":1689669040901,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"6a8b0576dc0af41c","name":"stage_yaml","source":"6a8b0576dc0af41c.yaml","type":"application/yaml","size":333},{"uid":"6cd7f58209cd4f61","name":"rest_request","source":"6cd7f58209cd4f61.yaml","type":"application/yaml","size":149},{"uid":"a61cc05fc8d294bd","name":"rest_response","source":"a61cc05fc8d294bd.yaml","type":"application/yaml","size":5773}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1689669040902,"stop":1689669040912,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"ec73479e2cd2124e","name":"stage_yaml","source":"ec73479e2cd2124e.yaml","type":"application/yaml","size":228},{"uid":"57b0badd172a49b7","name":"rest_request","source":"57b0badd172a49b7.yaml","type":"application/yaml","size":173},{"uid":"da99b3fef33e3c0f","name":"rest_response","source":"da99b3fef33e3c0f.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1689669040913,"stop":1689669040923,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"b58de4bb7c7239e9","name":"stage_yaml","source":"b58de4bb7c7239e9.yaml","type":"application/yaml","size":231},{"uid":"41492dab0dcae5e7","name":"rest_request","source":"41492dab0dcae5e7.yaml","type":"application/yaml","size":173},{"uid":"edcba5f71580df46","name":"rest_response","source":"edcba5f71580df46.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1689669040924,"stop":1689669040937,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"680f089eca793342","name":"stage_yaml","source":"680f089eca793342.yaml","type":"application/yaml","size":543},{"uid":"156f7257c05b9357","name":"rest_request","source":"156f7257c05b9357.yaml","type":"application/yaml","size":166},{"uid":"723e86922ba94c81","name":"rest_response","source":"723e86922ba94c81.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1689669040940,"stop":1689669041959,"duration":1019},"status":"passed","steps":[],"attachments":[{"uid":"706ef6780b9c58fb","name":"stage_yaml","source":"706ef6780b9c58fb.yaml","type":"application/yaml","size":661},{"uid":"30e201304103717e","name":"rest_request","source":"30e201304103717e.yaml","type":"application/yaml","size":159},{"uid":"e9b9f1503b502c44","name":"rest_response","source":"e9b9f1503b502c44.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1689669041960,"stop":1689669041979,"duration":19},"status":"passed","steps":[],"attachments":[{"uid":"a9303df5522e6db0","name":"stage_yaml","source":"a9303df5522e6db0.yaml","type":"application/yaml","size":3543},{"uid":"da9d1a998073ebd7","name":"rest_request","source":"da9d1a998073ebd7.yaml","type":"application/yaml","size":159},{"uid":"d4a19d64bd405e82","name":"rest_response","source":"d4a19d64bd405e82.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1689669041980,"stop":1689669041993,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"3c3568b58da939de","name":"stage_yaml","source":"3c3568b58da939de.yaml","type":"application/yaml","size":639},{"uid":"81dc9f164aec31ed","name":"rest_request","source":"81dc9f164aec31ed.yaml","type":"application/yaml","size":229},{"uid":"b77980e06a190e01","name":"rest_response","source":"b77980e06a190e01.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1689669041995,"stop":1689669043011,"duration":1016},"status":"passed","steps":[],"attachments":[{"uid":"f5ea4644e024452f","name":"stage_yaml","source":"f5ea4644e024452f.yaml","type":"application/yaml","size":679},{"uid":"bb0b986774cf8b96","name":"rest_request","source":"bb0b986774cf8b96.yaml","type":"application/yaml","size":159},{"uid":"a40a4afe5b436b2c","name":"rest_response","source":"a40a4afe5b436b2c.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1689669043013,"stop":1689669043030,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"591f2435290dc5a5","name":"stage_yaml","source":"591f2435290dc5a5.yaml","type":"application/yaml","size":3157},{"uid":"7c830cde0a1b6270","name":"rest_request","source":"7c830cde0a1b6270.yaml","type":"application/yaml","size":159},{"uid":"8bec41bcc02f584b","name":"rest_response","source":"8bec41bcc02f584b.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1689669043031,"stop":1689669043045,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"ba874b08c74506e1","name":"stage_yaml","source":"ba874b08c74506e1.yaml","type":"application/yaml","size":639},{"uid":"de1b8240984e9ca9","name":"rest_request","source":"de1b8240984e9ca9.yaml","type":"application/yaml","size":229},{"uid":"2a4e8b053c894960","name":"rest_response","source":"2a4e8b053c894960.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1689669043048,"stop":1689669044062,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"e79cfd2041e5f18a","name":"stage_yaml","source":"e79cfd2041e5f18a.yaml","type":"application/yaml","size":679},{"uid":"4f1c22b4100e1937","name":"rest_request","source":"4f1c22b4100e1937.yaml","type":"application/yaml","size":159},{"uid":"444c569824018691","name":"rest_response","source":"444c569824018691.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1689669044064,"stop":1689669044082,"duration":18},"status":"passed","steps":[],"attachments":[{"uid":"42f1ea32d6f1b84c","name":"stage_yaml","source":"42f1ea32d6f1b84c.yaml","type":"application/yaml","size":3157},{"uid":"9661e1d93af7276","name":"rest_request","source":"9661e1d93af7276.yaml","type":"application/yaml","size":159},{"uid":"cd8ed436b81c6704","name":"rest_response","source":"cd8ed436b81c6704.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1689669044083,"stop":1689669044096,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"5aeb6e6f558e20d0","name":"stage_yaml","source":"5aeb6e6f558e20d0.yaml","type":"application/yaml","size":639},{"uid":"51b9547e1f742779","name":"rest_request","source":"51b9547e1f742779.yaml","type":"application/yaml","size":233},{"uid":"37899174817f5426","name":"rest_response","source":"37899174817f5426.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1689669044099,"stop":1689669045113,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"f7cff78abe3be559","name":"stage_yaml","source":"f7cff78abe3be559.yaml","type":"application/yaml","size":685},{"uid":"be95b786b9fa0f6e","name":"rest_request","source":"be95b786b9fa0f6e.yaml","type":"application/yaml","size":159},{"uid":"4e1c2f71dce8cbd8","name":"rest_response","source":"4e1c2f71dce8cbd8.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1689669045115,"stop":1689669045132,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"a5e5e537e855fad","name":"stage_yaml","source":"a5e5e537e855fad.yaml","type":"application/yaml","size":2234},{"uid":"a43c3cfd769e22e5","name":"rest_request","source":"a43c3cfd769e22e5.yaml","type":"application/yaml","size":159},{"uid":"cc231780186e2a42","name":"rest_response","source":"cc231780186e2a42.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1689669045133,"stop":1689669045146,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"6df2fe4ce4de9108","name":"stage_yaml","source":"6df2fe4ce4de9108.yaml","type":"application/yaml","size":631},{"uid":"b3231cea2c1103f5","name":"rest_request","source":"b3231cea2c1103f5.yaml","type":"application/yaml","size":227},{"uid":"4ef4cd6cd8a99ed8","name":"rest_response","source":"4ef4cd6cd8a99ed8.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1689669045148,"stop":1689669046162,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"52029df84a1185d9","name":"stage_yaml","source":"52029df84a1185d9.yaml","type":"application/yaml","size":685},{"uid":"116b4a89b61961f4","name":"rest_request","source":"116b4a89b61961f4.yaml","type":"application/yaml","size":159},{"uid":"ebb56cbfb2e27897","name":"rest_response","source":"ebb56cbfb2e27897.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1689669046164,"stop":1689669046182,"duration":18},"status":"passed","steps":[],"attachments":[{"uid":"65cd9beee4cbb72d","name":"stage_yaml","source":"65cd9beee4cbb72d.yaml","type":"application/yaml","size":2230},{"uid":"da7b6c35d225518e","name":"rest_request","source":"da7b6c35d225518e.yaml","type":"application/yaml","size":159},{"uid":"5b256072545d06b","name":"rest_response","source":"5b256072545d06b.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1689669046183,"stop":1689669046196,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"1e47ffb0b936afb5","name":"stage_yaml","source":"1e47ffb0b936afb5.yaml","type":"application/yaml","size":599},{"uid":"1fb2467933b560ec","name":"rest_request","source":"1fb2467933b560ec.yaml","type":"application/yaml","size":227},{"uid":"cd9ec9d052ff3c6e","name":"rest_response","source":"cd9ec9d052ff3c6e.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1689669046200,"stop":1689669047215,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"a74a91805b14edea","name":"stage_yaml","source":"a74a91805b14edea.yaml","type":"application/yaml","size":679},{"uid":"1ec81a017486fca7","name":"rest_request","source":"1ec81a017486fca7.yaml","type":"application/yaml","size":159},{"uid":"1814025cfcfaaeac","name":"rest_response","source":"1814025cfcfaaeac.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1689669047217,"stop":1689669047236,"duration":19},"status":"passed","steps":[],"attachments":[{"uid":"e255a2559251dfb4","name":"stage_yaml","source":"e255a2559251dfb4.yaml","type":"application/yaml","size":3125},{"uid":"b07b7124dde4ab9f","name":"rest_request","source":"b07b7124dde4ab9f.yaml","type":"application/yaml","size":159},{"uid":"6c46179db75b0525","name":"rest_response","source":"6c46179db75b0525.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1689669047237,"stop":1689669047251,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"27cc3827889cde40","name":"stage_yaml","source":"27cc3827889cde40.yaml","type":"application/yaml","size":640},{"uid":"bec3c198a4ecdc8f","name":"rest_request","source":"bec3c198a4ecdc8f.yaml","type":"application/yaml","size":227},{"uid":"32f8b41ac35954b7","name":"rest_response","source":"32f8b41ac35954b7.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1689669047254,"stop":1689669048275,"duration":1021},"status":"passed","steps":[],"attachments":[{"uid":"18ecb187e746f316","name":"stage_yaml","source":"18ecb187e746f316.yaml","type":"application/yaml","size":680},{"uid":"8c51b4c2604e8d16","name":"rest_request","source":"8c51b4c2604e8d16.yaml","type":"application/yaml","size":159},{"uid":"2bbfcc86fd34d446","name":"rest_response","source":"2bbfcc86fd34d446.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1689669048277,"stop":1689669048295,"duration":18},"status":"passed","steps":[],"attachments":[{"uid":"2f5db44cca220104","name":"stage_yaml","source":"2f5db44cca220104.yaml","type":"application/yaml","size":3160},{"uid":"9c65b10c006852ad","name":"rest_request","source":"9c65b10c006852ad.yaml","type":"application/yaml","size":159},{"uid":"89b71902595f962b","name":"rest_response","source":"89b71902595f962b.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1689669048296,"stop":1689669048307,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"79890e312e429017","name":"stage_yaml","source":"79890e312e429017.yaml","type":"application/yaml","size":276},{"uid":"6e8491725541eca2","name":"rest_request","source":"6e8491725541eca2.yaml","type":"application/yaml","size":173},{"uid":"ae0150998c913b73","name":"rest_response","source":"ae0150998c913b73.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1689669048308,"stop":1689669048318,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"2fd3fd1585ff0c2d","name":"stage_yaml","source":"2fd3fd1585ff0c2d.yaml","type":"application/yaml","size":256},{"uid":"9e9743cdc0dd8442","name":"rest_request","source":"9e9743cdc0dd8442.yaml","type":"application/yaml","size":173},{"uid":"18f7fa0ba22f393f","name":"rest_response","source":"18f7fa0ba22f393f.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"717d967ed680"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":74,"unknown":0,"total":78},"items":[{"uid":"5df086038ac0977e","status":"passed","time":{"start":1689582635330,"stop":1689582643990,"duration":8660}},{"uid":"585a8a89eaa4f175","status":"passed","time":{"start":1689496207239,"stop":1689496214855,"duration":7616}},{"uid":"7fd9a08c1cb7f53e","status":"passed","time":{"start":1689409800756,"stop":1689409808381,"duration":7625}},{"uid":"3530a5e764153b92","status":"passed","time":{"start":1689391591193,"stop":1689391599888,"duration":8695}},{"uid":"8130de90e6d48e1","status":"passed","time":{"start":1689323487257,"stop":1689323497143,"duration":9886}},{"uid":"b76fefe40e4be37","status":"passed","time":{"start":1689237068297,"stop":1689237076950,"duration":8653}},{"uid":"c34b7b08285bbdc6","status":"passed","time":{"start":1689150616014,"stop":1689150624709,"duration":8695}},{"uid":"64c7b44c6bb52057","status":"passed","time":{"start":1689064289809,"stop":1689064299610,"duration":9801}},{"uid":"bc142ef0cea928bb","status":"passed","time":{"start":1688977797246,"stop":1688977804868,"duration":7622}},{"uid":"2b04df553f868d9a","status":"passed","time":{"start":1688891374503,"stop":1688891383162,"duration":8659}},{"uid":"8e4b264612d5c6d7","status":"passed","time":{"start":1688804997737,"stop":1688805006391,"duration":8654}},{"uid":"1374cce267998918","status":"passed","time":{"start":1688718648358,"stop":1688718657005,"duration":8647}},{"uid":"f02f0c2d5eb2cdb5","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f98c56f8430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1688632169797,"stop":1688632179300,"duration":9503}},{"uid":"9dd9f1fc40b190b","status":"passed","time":{"start":1688545833367,"stop":1688545841268,"duration":7901}},{"uid":"8f76b4eadae40f89","status":"passed","time":{"start":1688459388220,"stop":1688459395860,"duration":7640}},{"uid":"5c3a96cdbd211f63","status":"passed","time":{"start":1688373007175,"stop":1688373016842,"duration":9667}},{"uid":"9d50a56aab09299b","status":"passed","time":{"start":1688286542873,"stop":1688286550486,"duration":7613}},{"uid":"3b974c8b21c92130","status":"passed","time":{"start":1688200241860,"stop":1688200249496,"duration":7636}},{"uid":"9ecb8c5db27fd2fb","status":"passed","time":{"start":1688113852290,"stop":1688113861091,"duration":8801}},{"uid":"f48a5b0a1a9289b9","status":"passed","time":{"start":1688027461909,"stop":1688027470761,"duration":8852}}]},"tags":[]},"source":"ac9a90658ed856c8.json","parameterValues":[]}