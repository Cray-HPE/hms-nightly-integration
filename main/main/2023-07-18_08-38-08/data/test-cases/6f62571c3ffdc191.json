{"uid":"6f62571c3ffdc191","name":"Verify the HMNFD /subscriptions API","fullName":"api.2-disruptive.test_subscriptions.tavern#Verify the HMNFD /subscriptions API","historyId":"7b2d97ce25140ef36adbb156fdf4210e","time":{"start":1689669038989,"stop":1689669039042,"duration":53},"status":"failed","statusMessage":"tavern.util.exceptions.MissingFormatError: test_agent","statusTrace":"Format variables:\n  hmnfd_base_url = 'http://cray-hmnfd:28600'\n  node_xname = 'x3000c0s5b0n0'\n  test_agent = '???'\n  node_xname = 'x3000c0s5b0n0'\n  test_agent_host = '???'\n  verify = 'False'\n\nSource test stage (line 50):\n  - name: Verify that a new HMNFD state change notification subscription can be created\n    request:\n      url: \"{hmnfd_base_url}/hmi/v2/subscriptions/{node_xname}/agents/{test_agent}\"\n      json: {\"Components\":[\"{node_xname}\"],\"Enabled\":true,\"Roles\":[\"Compute\",\"Service\",\"System\",\"Management\"],\"SubRoles\":[\"Master\",\"Worker\",\"Storage\"],\"SoftwareStatus\":[\"AdminDown\",\"Unknown\",\"Other\"],\"States\":[\"Ready\",\"On\",\"Off\",\"Standby\",\"Populated\",\"Empty\"],\"Url\":\"http://{test_agent_host}/boot/v1/scn\"}\n      method: POST\n      verify: !bool \"{verify}\"\n    response:\n      status_code: 200\n\n\n\nMissing format vars for stage\n\nErrors:\nE   tavern.util.exceptions.MissingFormatError: test_agent","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"tavern.util.exceptions.MissingFormatError: test_agent","statusTrace":"Format variables:\n  hmnfd_base_url = 'http://cray-hmnfd:28600'\n  node_xname = 'x3000c0s5b0n0'\n  test_agent = '???'\n  node_xname = 'x3000c0s5b0n0'\n  test_agent_host = '???'\n  verify = 'False'\n\nSource test stage (line 50):\n  - name: Verify that a new HMNFD state change notification subscription can be created\n    request:\n      url: \"{hmnfd_base_url}/hmi/v2/subscriptions/{node_xname}/agents/{test_agent}\"\n      json: {\"Components\":[\"{node_xname}\"],\"Enabled\":true,\"Roles\":[\"Compute\",\"Service\",\"System\",\"Management\"],\"SubRoles\":[\"Master\",\"Worker\",\"Storage\"],\"SoftwareStatus\":[\"AdminDown\",\"Unknown\",\"Other\"],\"States\":[\"Ready\",\"On\",\"Off\",\"Standby\",\"Populated\",\"Empty\"],\"Url\":\"http://{test_agent_host}/boot/v1/scn\"}\n      method: POST\n      verify: !bool \"{verify}\"\n    response:\n      status_code: 200\n\n\n\nMissing format vars for stage\n\nErrors:\nE   tavern.util.exceptions.MissingFormatError: test_agent","steps":[{"name":"Stage 0: Retrieve a node from HSM to be used in later stages","time":{"start":1689669038998,"stop":1689669039036,"duration":38},"status":"passed","steps":[],"attachments":[{"uid":"fdf87611138e605f","name":"stage_yaml","source":"fdf87611138e605f.yaml","type":"application/yaml","size":282},{"uid":"480db158cf2da5c3","name":"rest_request","source":"480db158cf2da5c3.yaml","type":"application/yaml","size":149},{"uid":"41b05a964d1e0bec","name":"rest_response","source":"41b05a964d1e0bec.yaml","type":"application/yaml","size":5964}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Verify that a new HMNFD state change notification subscription can be created","time":{"start":1689669039037,"stop":1689669039040,"duration":3},"status":"failed","statusMessage":"tavern.util.exceptions.MissingFormatError: test_agent\n","statusTrace":"  File \"/usr/lib/python3.9/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/usr/lib/python3.9/site-packages/tavern/util/retry.py\", line 31, in wrapped\n    res = fn(*args, **kwargs)\n  File \"/usr/lib/python3.9/site-packages/tavern/core.py\", line 249, in run_stage\n    r = get_request_type(stage, test_block_config, sessions)\n  File \"/usr/lib/python3.9/site-packages/tavern/plugins.py\", line 213, in get_request_type\n    request_maker = request_class(session, request_args, test_block_config)\n  File \"/usr/lib/python3.9/site-packages/tavern/_plugins/rest/request.py\", line 484, in __init__\n    request_args = get_request_args(rspec, test_block_config)\n  File \"/usr/lib/python3.9/site-packages/tavern/_plugins/rest/request.py\", line 86, in get_request_args\n    fspec = format_keys(rspec, test_block_config[\"variables\"])\n  File \"/usr/lib/python3.9/site-packages/tavern/util/dict_util.py\", line 116, in format_keys\n    formatted[key] = format_keys(val[key], box_vars)\n  File \"/usr/lib/python3.9/site-packages/tavern/util/dict_util.py\", line 122, in format_keys\n    formatted = _check_and_format_values(val, box_vars)\n  File \"/usr/lib/python3.9/site-packages/tavern/util/dict_util.py\", line 40, in _check_and_format_values\n    raise exceptions.MissingFormatError(field_name) from e\n","steps":[],"attachments":[{"uid":"8c8accc89657edfe","name":"stage_yaml","source":"8c8accc89657edfe.yaml","type":"application/yaml","size":563}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[{"uid":"ac94c9c0bf363ea3","name":"error_output","source":"ac94c9c0bf363ea3.attach","type":"text/plain","size":898},{"uid":"7780e9d990810998","name":"log","source":"7780e9d990810998.txt","type":"text/plain","size":1967}],"parameters":[],"stepsCount":2,"attachmentsCount":6,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-hmnfd-hmth-test"},{"name":"suite","value":"disruptive"},{"name":"host","value":"cde842cf26a1"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_subscriptions.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":7,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":7},"items":[{"uid":"a0bfd254318dbb74","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: test_agent","time":{"start":1689582633736,"stop":1689582633788,"duration":52}},{"uid":"9ec184f4f0b25b89","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: test_agent","time":{"start":1689496205672,"stop":1689496205724,"duration":52}},{"uid":"745562ba7564323e","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: test_agent","time":{"start":1689409799168,"stop":1689409799221,"duration":53}},{"uid":"5c645371da46cc19","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: test_agent","time":{"start":1689391589576,"stop":1689391589628,"duration":52}},{"uid":"b4a0458f1c97cddf","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: test_agent","time":{"start":1689323485201,"stop":1689323485272,"duration":71}},{"uid":"10bf5db906775d5f","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: test_agent","time":{"start":1689237066729,"stop":1689237066781,"duration":52}}]},"tags":[]},"source":"6f62571c3ffdc191.json","parameterValues":[]}