{"uid":"7fd9a08c1cb7f53e","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1689409800756,"stop":1689409808381,"duration":7625},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1689409800958,"stop":1689409800997,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"54cfa1eb7cbc9bb9","name":"stage_yaml","source":"54cfa1eb7cbc9bb9.yaml","type":"application/yaml","size":333},{"uid":"2991e0a781e15282","name":"rest_request","source":"2991e0a781e15282.yaml","type":"application/yaml","size":149},{"uid":"df36673cb4668e76","name":"rest_response","source":"df36673cb4668e76.yaml","type":"application/yaml","size":5774}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1689409800998,"stop":1689409801008,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"b874dc94ec288ee8","name":"stage_yaml","source":"b874dc94ec288ee8.yaml","type":"application/yaml","size":228},{"uid":"2cff4c675d5ffae2","name":"rest_request","source":"2cff4c675d5ffae2.yaml","type":"application/yaml","size":173},{"uid":"44229dde80e5ccbf","name":"rest_response","source":"44229dde80e5ccbf.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1689409801009,"stop":1689409801018,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"ac38a748700ce58c","name":"stage_yaml","source":"ac38a748700ce58c.yaml","type":"application/yaml","size":231},{"uid":"ccd1b9d0da6e2850","name":"rest_request","source":"ccd1b9d0da6e2850.yaml","type":"application/yaml","size":173},{"uid":"83737afb0259001c","name":"rest_response","source":"83737afb0259001c.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1689409801019,"stop":1689409801032,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"9d94b0c5efd3d856","name":"stage_yaml","source":"9d94b0c5efd3d856.yaml","type":"application/yaml","size":543},{"uid":"6bca44eaa85cf30d","name":"rest_request","source":"6bca44eaa85cf30d.yaml","type":"application/yaml","size":166},{"uid":"be8e9a08761b424","name":"rest_response","source":"be8e9a08761b424.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1689409801036,"stop":1689409802051,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"8e23c1a7068a7e2e","name":"stage_yaml","source":"8e23c1a7068a7e2e.yaml","type":"application/yaml","size":661},{"uid":"d9104b1b1e13a497","name":"rest_request","source":"d9104b1b1e13a497.yaml","type":"application/yaml","size":159},{"uid":"9564b3ee8ba21708","name":"rest_response","source":"9564b3ee8ba21708.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1689409802053,"stop":1689409802070,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"cf1e4bbb921aedf0","name":"stage_yaml","source":"cf1e4bbb921aedf0.yaml","type":"application/yaml","size":3543},{"uid":"4d3056d22a0eacbf","name":"rest_request","source":"4d3056d22a0eacbf.yaml","type":"application/yaml","size":159},{"uid":"62f31569e056087a","name":"rest_response","source":"62f31569e056087a.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1689409802071,"stop":1689409802083,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"74639eddd4b848fe","name":"stage_yaml","source":"74639eddd4b848fe.yaml","type":"application/yaml","size":639},{"uid":"39211066b63fac8e","name":"rest_request","source":"39211066b63fac8e.yaml","type":"application/yaml","size":229},{"uid":"52f2ffd3249c181","name":"rest_response","source":"52f2ffd3249c181.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1689409802085,"stop":1689409803101,"duration":1016},"status":"passed","steps":[],"attachments":[{"uid":"92e40537c746c027","name":"stage_yaml","source":"92e40537c746c027.yaml","type":"application/yaml","size":679},{"uid":"b5915fdc447777da","name":"rest_request","source":"b5915fdc447777da.yaml","type":"application/yaml","size":159},{"uid":"537bd9808f25d78d","name":"rest_response","source":"537bd9808f25d78d.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1689409803102,"stop":1689409803119,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"7e0a489288584643","name":"stage_yaml","source":"7e0a489288584643.yaml","type":"application/yaml","size":3157},{"uid":"d1053ec24a47e17b","name":"rest_request","source":"d1053ec24a47e17b.yaml","type":"application/yaml","size":159},{"uid":"5f68beb3ea59491b","name":"rest_response","source":"5f68beb3ea59491b.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1689409803120,"stop":1689409803132,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"ef641b8ea5addc13","name":"stage_yaml","source":"ef641b8ea5addc13.yaml","type":"application/yaml","size":639},{"uid":"d348af2044d489ef","name":"rest_request","source":"d348af2044d489ef.yaml","type":"application/yaml","size":229},{"uid":"499fbab55fa20fe6","name":"rest_response","source":"499fbab55fa20fe6.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1689409803135,"stop":1689409804151,"duration":1016},"status":"passed","steps":[],"attachments":[{"uid":"35667f0f3eb2d849","name":"stage_yaml","source":"35667f0f3eb2d849.yaml","type":"application/yaml","size":679},{"uid":"3f6a3dfd0c7e220a","name":"rest_request","source":"3f6a3dfd0c7e220a.yaml","type":"application/yaml","size":159},{"uid":"4723678766f1f430","name":"rest_response","source":"4723678766f1f430.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1689409804152,"stop":1689409804169,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"276d633883d3295f","name":"stage_yaml","source":"276d633883d3295f.yaml","type":"application/yaml","size":3157},{"uid":"dd55e9bc176e17b6","name":"rest_request","source":"dd55e9bc176e17b6.yaml","type":"application/yaml","size":159},{"uid":"94d0eb4ada80a037","name":"rest_response","source":"94d0eb4ada80a037.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1689409804170,"stop":1689409804183,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"d98c752198d7d73d","name":"stage_yaml","source":"d98c752198d7d73d.yaml","type":"application/yaml","size":639},{"uid":"6bfc60afb55072ef","name":"rest_request","source":"6bfc60afb55072ef.yaml","type":"application/yaml","size":233},{"uid":"6a724f139be473d0","name":"rest_response","source":"6a724f139be473d0.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1689409804186,"stop":1689409805199,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"1d59152313317f02","name":"stage_yaml","source":"1d59152313317f02.yaml","type":"application/yaml","size":685},{"uid":"b47d5cf6b869a5ed","name":"rest_request","source":"b47d5cf6b869a5ed.yaml","type":"application/yaml","size":159},{"uid":"87137c7dba73fc20","name":"rest_response","source":"87137c7dba73fc20.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1689409805201,"stop":1689409805217,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"9cfddc6ee9c8a301","name":"stage_yaml","source":"9cfddc6ee9c8a301.yaml","type":"application/yaml","size":2234},{"uid":"4e78401e0a8e740","name":"rest_request","source":"4e78401e0a8e740.yaml","type":"application/yaml","size":159},{"uid":"81264e438e367551","name":"rest_response","source":"81264e438e367551.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1689409805218,"stop":1689409805231,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"386c3bfc81b0d97c","name":"stage_yaml","source":"386c3bfc81b0d97c.yaml","type":"application/yaml","size":631},{"uid":"656b91a8befcabb9","name":"rest_request","source":"656b91a8befcabb9.yaml","type":"application/yaml","size":227},{"uid":"3bbc51730a344b31","name":"rest_response","source":"3bbc51730a344b31.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1689409805233,"stop":1689409806246,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"64f9ff76efc05582","name":"stage_yaml","source":"64f9ff76efc05582.yaml","type":"application/yaml","size":685},{"uid":"596e3f82abc73199","name":"rest_request","source":"596e3f82abc73199.yaml","type":"application/yaml","size":159},{"uid":"1850d87a36208f1b","name":"rest_response","source":"1850d87a36208f1b.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1689409806247,"stop":1689409806263,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"bdc5556110ad037c","name":"stage_yaml","source":"bdc5556110ad037c.yaml","type":"application/yaml","size":2230},{"uid":"1aa0892479a34fcc","name":"rest_request","source":"1aa0892479a34fcc.yaml","type":"application/yaml","size":159},{"uid":"1bfa371afd577615","name":"rest_response","source":"1bfa371afd577615.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1689409806264,"stop":1689409806276,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"171ed9a3f854be6","name":"stage_yaml","source":"171ed9a3f854be6.yaml","type":"application/yaml","size":599},{"uid":"2c069041c42fa6d5","name":"rest_request","source":"2c069041c42fa6d5.yaml","type":"application/yaml","size":227},{"uid":"6ee5142969538f70","name":"rest_response","source":"6ee5142969538f70.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1689409806278,"stop":1689409807292,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"73ffd726a3892d11","name":"stage_yaml","source":"73ffd726a3892d11.yaml","type":"application/yaml","size":679},{"uid":"c76cdfd0e471149a","name":"rest_request","source":"c76cdfd0e471149a.yaml","type":"application/yaml","size":159},{"uid":"c1d4094229ba8ade","name":"rest_response","source":"c1d4094229ba8ade.yaml","type":"application/yaml","size":613}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1689409807293,"stop":1689409807310,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"6d787faf1bfbce1c","name":"stage_yaml","source":"6d787faf1bfbce1c.yaml","type":"application/yaml","size":3125},{"uid":"8760c1959581ea8e","name":"rest_request","source":"8760c1959581ea8e.yaml","type":"application/yaml","size":159},{"uid":"a07b5fd7fd050a26","name":"rest_response","source":"a07b5fd7fd050a26.yaml","type":"application/yaml","size":613}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1689409807311,"stop":1689409807323,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"bf52d31cd271cb63","name":"stage_yaml","source":"bf52d31cd271cb63.yaml","type":"application/yaml","size":640},{"uid":"3e2660750dbc052c","name":"rest_request","source":"3e2660750dbc052c.yaml","type":"application/yaml","size":227},{"uid":"e98e7b89cd6f79a0","name":"rest_response","source":"e98e7b89cd6f79a0.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1689409807325,"stop":1689409808339,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"798e5e7f1911d9f8","name":"stage_yaml","source":"798e5e7f1911d9f8.yaml","type":"application/yaml","size":680},{"uid":"b49a4331143d2cb6","name":"rest_request","source":"b49a4331143d2cb6.yaml","type":"application/yaml","size":159},{"uid":"b0b8c4c9f32e1efb","name":"rest_response","source":"b0b8c4c9f32e1efb.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1689409808341,"stop":1689409808357,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"edc62ce9d173810e","name":"stage_yaml","source":"edc62ce9d173810e.yaml","type":"application/yaml","size":3160},{"uid":"3c29d691dd4b51b5","name":"rest_request","source":"3c29d691dd4b51b5.yaml","type":"application/yaml","size":159},{"uid":"2d4300095984da08","name":"rest_response","source":"2d4300095984da08.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1689409808359,"stop":1689409808369,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"65aca7126aab700c","name":"stage_yaml","source":"65aca7126aab700c.yaml","type":"application/yaml","size":276},{"uid":"cdfbb083f1a7103b","name":"rest_request","source":"cdfbb083f1a7103b.yaml","type":"application/yaml","size":173},{"uid":"ca6141993d318a0e","name":"rest_response","source":"ca6141993d318a0e.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1689409808370,"stop":1689409808381,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"5cd913ea0a8cad1b","name":"stage_yaml","source":"5cd913ea0a8cad1b.yaml","type":"application/yaml","size":256},{"uid":"85efc34872623c7b","name":"rest_request","source":"85efc34872623c7b.yaml","type":"application/yaml","size":172},{"uid":"be1ee6fa2e1f9c6d","name":"rest_response","source":"be1ee6fa2e1f9c6d.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"11ad65b69140"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":71,"unknown":0,"total":75},"items":[{"uid":"3530a5e764153b92","status":"passed","time":{"start":1689391591193,"stop":1689391599888,"duration":8695}},{"uid":"8130de90e6d48e1","status":"passed","time":{"start":1689323487257,"stop":1689323497143,"duration":9886}},{"uid":"b76fefe40e4be37","status":"passed","time":{"start":1689237068297,"stop":1689237076950,"duration":8653}},{"uid":"c34b7b08285bbdc6","status":"passed","time":{"start":1689150616014,"stop":1689150624709,"duration":8695}},{"uid":"64c7b44c6bb52057","status":"passed","time":{"start":1689064289809,"stop":1689064299610,"duration":9801}},{"uid":"bc142ef0cea928bb","status":"passed","time":{"start":1688977797246,"stop":1688977804868,"duration":7622}},{"uid":"2b04df553f868d9a","status":"passed","time":{"start":1688891374503,"stop":1688891383162,"duration":8659}},{"uid":"8e4b264612d5c6d7","status":"passed","time":{"start":1688804997737,"stop":1688805006391,"duration":8654}},{"uid":"1374cce267998918","status":"passed","time":{"start":1688718648358,"stop":1688718657005,"duration":8647}},{"uid":"f02f0c2d5eb2cdb5","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f98c56f8430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1688632169797,"stop":1688632179300,"duration":9503}},{"uid":"9dd9f1fc40b190b","status":"passed","time":{"start":1688545833367,"stop":1688545841268,"duration":7901}},{"uid":"8f76b4eadae40f89","status":"passed","time":{"start":1688459388220,"stop":1688459395860,"duration":7640}},{"uid":"5c3a96cdbd211f63","status":"passed","time":{"start":1688373007175,"stop":1688373016842,"duration":9667}},{"uid":"9d50a56aab09299b","status":"passed","time":{"start":1688286542873,"stop":1688286550486,"duration":7613}},{"uid":"3b974c8b21c92130","status":"passed","time":{"start":1688200241860,"stop":1688200249496,"duration":7636}},{"uid":"9ecb8c5db27fd2fb","status":"passed","time":{"start":1688113852290,"stop":1688113861091,"duration":8801}},{"uid":"f48a5b0a1a9289b9","status":"passed","time":{"start":1688027461909,"stop":1688027470761,"duration":8852}},{"uid":"b72d071d8ab0dd79","status":"passed","time":{"start":1683188987948,"stop":1683188996781,"duration":8833}},{"uid":"afd1f986c575c997","status":"passed","time":{"start":1683102530303,"stop":1683102540125,"duration":9822}},{"uid":"97fa8d1decd9311b","status":"passed","time":{"start":1683016226040,"stop":1683016233933,"duration":7893}}]},"tags":[]},"source":"7fd9a08c1cb7f53e.json","parameterValues":[]}