{"uid":"585a8a89eaa4f175","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1689496207239,"stop":1689496214855,"duration":7616},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1689496207439,"stop":1689496207479,"duration":40},"status":"passed","steps":[],"attachments":[{"uid":"6f1568cc7c6e4d04","name":"stage_yaml","source":"6f1568cc7c6e4d04.yaml","type":"application/yaml","size":333},{"uid":"e139bb0515cef253","name":"rest_request","source":"e139bb0515cef253.yaml","type":"application/yaml","size":149},{"uid":"94311080ba8a5bdc","name":"rest_response","source":"94311080ba8a5bdc.yaml","type":"application/yaml","size":5774}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1689496207480,"stop":1689496207489,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"b61f21ab86decf9c","name":"stage_yaml","source":"b61f21ab86decf9c.yaml","type":"application/yaml","size":228},{"uid":"8f4fa22c63c76eb1","name":"rest_request","source":"8f4fa22c63c76eb1.yaml","type":"application/yaml","size":173},{"uid":"e4da8accee612196","name":"rest_response","source":"e4da8accee612196.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1689496207490,"stop":1689496207499,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"700c02b2fcdde8b8","name":"stage_yaml","source":"700c02b2fcdde8b8.yaml","type":"application/yaml","size":231},{"uid":"21793484b6c15f9d","name":"rest_request","source":"21793484b6c15f9d.yaml","type":"application/yaml","size":173},{"uid":"ccdb0b078e347010","name":"rest_response","source":"ccdb0b078e347010.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1689496207500,"stop":1689496207514,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"5d216d0f5fc51946","name":"stage_yaml","source":"5d216d0f5fc51946.yaml","type":"application/yaml","size":543},{"uid":"36c6d67c9accf3d","name":"rest_request","source":"36c6d67c9accf3d.yaml","type":"application/yaml","size":166},{"uid":"ac00a9c0668f3d96","name":"rest_response","source":"ac00a9c0668f3d96.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1689496207516,"stop":1689496208531,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"a344926575dd9898","name":"stage_yaml","source":"a344926575dd9898.yaml","type":"application/yaml","size":661},{"uid":"460acde274785e56","name":"rest_request","source":"460acde274785e56.yaml","type":"application/yaml","size":159},{"uid":"54e6dff6fd1527","name":"rest_response","source":"54e6dff6fd1527.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1689496208532,"stop":1689496208550,"duration":18},"status":"passed","steps":[],"attachments":[{"uid":"a2f733ca431ef07a","name":"stage_yaml","source":"a2f733ca431ef07a.yaml","type":"application/yaml","size":3543},{"uid":"b685cd263ec54977","name":"rest_request","source":"b685cd263ec54977.yaml","type":"application/yaml","size":159},{"uid":"561c52f6b7230bf","name":"rest_response","source":"561c52f6b7230bf.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1689496208551,"stop":1689496208563,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"32d39c2eec33c36e","name":"stage_yaml","source":"32d39c2eec33c36e.yaml","type":"application/yaml","size":639},{"uid":"61e4252b55d23782","name":"rest_request","source":"61e4252b55d23782.yaml","type":"application/yaml","size":229},{"uid":"97c159c09de66a1b","name":"rest_response","source":"97c159c09de66a1b.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1689496208565,"stop":1689496209579,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"47cab067f3574d8e","name":"stage_yaml","source":"47cab067f3574d8e.yaml","type":"application/yaml","size":679},{"uid":"db0b1386b0bf3bfa","name":"rest_request","source":"db0b1386b0bf3bfa.yaml","type":"application/yaml","size":159},{"uid":"c2ae8969d98256d","name":"rest_response","source":"c2ae8969d98256d.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1689496209581,"stop":1689496209597,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"f0845f58e501f45d","name":"stage_yaml","source":"f0845f58e501f45d.yaml","type":"application/yaml","size":3157},{"uid":"27827ac8f86b8319","name":"rest_request","source":"27827ac8f86b8319.yaml","type":"application/yaml","size":159},{"uid":"54c147dc2fc61932","name":"rest_response","source":"54c147dc2fc61932.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1689496209598,"stop":1689496209610,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"c5a94e23fdf38937","name":"stage_yaml","source":"c5a94e23fdf38937.yaml","type":"application/yaml","size":639},{"uid":"9cf1f4de734597ed","name":"rest_request","source":"9cf1f4de734597ed.yaml","type":"application/yaml","size":229},{"uid":"81a73dbde215d8da","name":"rest_response","source":"81a73dbde215d8da.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1689496209612,"stop":1689496210627,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"d9c75c2e6a374a75","name":"stage_yaml","source":"d9c75c2e6a374a75.yaml","type":"application/yaml","size":679},{"uid":"ac75174fcb27856a","name":"rest_request","source":"ac75174fcb27856a.yaml","type":"application/yaml","size":159},{"uid":"83b350a6dad1d54f","name":"rest_response","source":"83b350a6dad1d54f.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1689496210628,"stop":1689496210644,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"db41f1a15c7be60","name":"stage_yaml","source":"db41f1a15c7be60.yaml","type":"application/yaml","size":3157},{"uid":"a327b0a3ff8694a3","name":"rest_request","source":"a327b0a3ff8694a3.yaml","type":"application/yaml","size":159},{"uid":"7a19d36936cdc44d","name":"rest_response","source":"7a19d36936cdc44d.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1689496210645,"stop":1689496210657,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"c6913086c18932a8","name":"stage_yaml","source":"c6913086c18932a8.yaml","type":"application/yaml","size":639},{"uid":"b946b89f865df287","name":"rest_request","source":"b946b89f865df287.yaml","type":"application/yaml","size":233},{"uid":"8e25cfb5ba6b58bf","name":"rest_response","source":"8e25cfb5ba6b58bf.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1689496210660,"stop":1689496211673,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"2b6e1edf5ae60dc8","name":"stage_yaml","source":"2b6e1edf5ae60dc8.yaml","type":"application/yaml","size":685},{"uid":"b1454470156b2023","name":"rest_request","source":"b1454470156b2023.yaml","type":"application/yaml","size":159},{"uid":"290a3c5026747a75","name":"rest_response","source":"290a3c5026747a75.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1689496211674,"stop":1689496211690,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"d7ead2c064353ade","name":"stage_yaml","source":"d7ead2c064353ade.yaml","type":"application/yaml","size":2234},{"uid":"986cbbe448f35349","name":"rest_request","source":"986cbbe448f35349.yaml","type":"application/yaml","size":159},{"uid":"6ade2c87267c6f83","name":"rest_response","source":"6ade2c87267c6f83.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1689496211691,"stop":1689496211703,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"8d262b372e31a080","name":"stage_yaml","source":"8d262b372e31a080.yaml","type":"application/yaml","size":631},{"uid":"1e7d19eec845e249","name":"rest_request","source":"1e7d19eec845e249.yaml","type":"application/yaml","size":227},{"uid":"9993bdc20729a101","name":"rest_response","source":"9993bdc20729a101.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1689496211705,"stop":1689496212719,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"772e0d502a56cc7","name":"stage_yaml","source":"772e0d502a56cc7.yaml","type":"application/yaml","size":685},{"uid":"cd222f167e7729c5","name":"rest_request","source":"cd222f167e7729c5.yaml","type":"application/yaml","size":159},{"uid":"c98bbfa27ad4a98c","name":"rest_response","source":"c98bbfa27ad4a98c.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1689496212720,"stop":1689496212735,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"9f8d428973139108","name":"stage_yaml","source":"9f8d428973139108.yaml","type":"application/yaml","size":2230},{"uid":"731e721c1473ea85","name":"rest_request","source":"731e721c1473ea85.yaml","type":"application/yaml","size":159},{"uid":"28a9a6dfe2568b0b","name":"rest_response","source":"28a9a6dfe2568b0b.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1689496212736,"stop":1689496212750,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"77f0894dc8311bb7","name":"stage_yaml","source":"77f0894dc8311bb7.yaml","type":"application/yaml","size":599},{"uid":"a79dc7a3437e176d","name":"rest_request","source":"a79dc7a3437e176d.yaml","type":"application/yaml","size":227},{"uid":"c9bf5d2eeceb4471","name":"rest_response","source":"c9bf5d2eeceb4471.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1689496212752,"stop":1689496213765,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"de46afc02885bd06","name":"stage_yaml","source":"de46afc02885bd06.yaml","type":"application/yaml","size":679},{"uid":"145f9685f5b4c62","name":"rest_request","source":"145f9685f5b4c62.yaml","type":"application/yaml","size":159},{"uid":"5bb91bab179bf954","name":"rest_response","source":"5bb91bab179bf954.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1689496213767,"stop":1689496213783,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"c7659b4d9bfc07e2","name":"stage_yaml","source":"c7659b4d9bfc07e2.yaml","type":"application/yaml","size":3125},{"uid":"18d9199a9bccbdc0","name":"rest_request","source":"18d9199a9bccbdc0.yaml","type":"application/yaml","size":159},{"uid":"387b0ef16379ca53","name":"rest_response","source":"387b0ef16379ca53.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1689496213784,"stop":1689496213798,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"22e93b82b6b281f3","name":"stage_yaml","source":"22e93b82b6b281f3.yaml","type":"application/yaml","size":640},{"uid":"937cad28d509e05a","name":"rest_request","source":"937cad28d509e05a.yaml","type":"application/yaml","size":227},{"uid":"3a0e5515f26d01f8","name":"rest_response","source":"3a0e5515f26d01f8.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1689496213800,"stop":1689496214815,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"4f56c07f0e14458d","name":"stage_yaml","source":"4f56c07f0e14458d.yaml","type":"application/yaml","size":680},{"uid":"135c038501a65ca5","name":"rest_request","source":"135c038501a65ca5.yaml","type":"application/yaml","size":159},{"uid":"198e48ce821d97c0","name":"rest_response","source":"198e48ce821d97c0.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1689496214816,"stop":1689496214833,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"7e2a49c2888f1db9","name":"stage_yaml","source":"7e2a49c2888f1db9.yaml","type":"application/yaml","size":3160},{"uid":"fb651885122a1f88","name":"rest_request","source":"fb651885122a1f88.yaml","type":"application/yaml","size":159},{"uid":"42f0254bb55d30b7","name":"rest_response","source":"42f0254bb55d30b7.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1689496214834,"stop":1689496214844,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"d724c427c391828f","name":"stage_yaml","source":"d724c427c391828f.yaml","type":"application/yaml","size":276},{"uid":"b9027cb2058b6bf1","name":"rest_request","source":"b9027cb2058b6bf1.yaml","type":"application/yaml","size":173},{"uid":"19d5f1e608f8ba59","name":"rest_response","source":"19d5f1e608f8ba59.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1689496214845,"stop":1689496214855,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"300042272e986b3b","name":"stage_yaml","source":"300042272e986b3b.yaml","type":"application/yaml","size":256},{"uid":"e187941ea049f43e","name":"rest_request","source":"e187941ea049f43e.yaml","type":"application/yaml","size":173},{"uid":"473138f285dbb9e8","name":"rest_response","source":"473138f285dbb9e8.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"640ec2a28e4a"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":72,"unknown":0,"total":76},"items":[{"uid":"7fd9a08c1cb7f53e","status":"passed","time":{"start":1689409800756,"stop":1689409808381,"duration":7625}},{"uid":"3530a5e764153b92","status":"passed","time":{"start":1689391591193,"stop":1689391599888,"duration":8695}},{"uid":"8130de90e6d48e1","status":"passed","time":{"start":1689323487257,"stop":1689323497143,"duration":9886}},{"uid":"b76fefe40e4be37","status":"passed","time":{"start":1689237068297,"stop":1689237076950,"duration":8653}},{"uid":"c34b7b08285bbdc6","status":"passed","time":{"start":1689150616014,"stop":1689150624709,"duration":8695}},{"uid":"64c7b44c6bb52057","status":"passed","time":{"start":1689064289809,"stop":1689064299610,"duration":9801}},{"uid":"bc142ef0cea928bb","status":"passed","time":{"start":1688977797246,"stop":1688977804868,"duration":7622}},{"uid":"2b04df553f868d9a","status":"passed","time":{"start":1688891374503,"stop":1688891383162,"duration":8659}},{"uid":"8e4b264612d5c6d7","status":"passed","time":{"start":1688804997737,"stop":1688805006391,"duration":8654}},{"uid":"1374cce267998918","status":"passed","time":{"start":1688718648358,"stop":1688718657005,"duration":8647}},{"uid":"f02f0c2d5eb2cdb5","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f98c56f8430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1688632169797,"stop":1688632179300,"duration":9503}},{"uid":"9dd9f1fc40b190b","status":"passed","time":{"start":1688545833367,"stop":1688545841268,"duration":7901}},{"uid":"8f76b4eadae40f89","status":"passed","time":{"start":1688459388220,"stop":1688459395860,"duration":7640}},{"uid":"5c3a96cdbd211f63","status":"passed","time":{"start":1688373007175,"stop":1688373016842,"duration":9667}},{"uid":"9d50a56aab09299b","status":"passed","time":{"start":1688286542873,"stop":1688286550486,"duration":7613}},{"uid":"3b974c8b21c92130","status":"passed","time":{"start":1688200241860,"stop":1688200249496,"duration":7636}},{"uid":"9ecb8c5db27fd2fb","status":"passed","time":{"start":1688113852290,"stop":1688113861091,"duration":8801}},{"uid":"f48a5b0a1a9289b9","status":"passed","time":{"start":1688027461909,"stop":1688027470761,"duration":8852}},{"uid":"b72d071d8ab0dd79","status":"passed","time":{"start":1683188987948,"stop":1683188996781,"duration":8833}},{"uid":"afd1f986c575c997","status":"passed","time":{"start":1683102530303,"stop":1683102540125,"duration":9822}}]},"tags":[]},"source":"585a8a89eaa4f175.json","parameterValues":[]}