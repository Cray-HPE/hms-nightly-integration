- name: Query bootscript with MAC address
  request:
    url: "{bss_base_url}/boot/v1/bootscript"
    method: GET
    verify: !bool "{verify}"
    params:
      mac: "{node_mac_address}"
  response:
    status_code: 200
    headers:
      content-type: text/plain; charset=UTF-8
    verify_response_with:

      - function: bss_test_utils:better_validate_regex
        extra_kwargs:
          expression: "


      - function: bss_test_utils:better_validate_regex
        extra_kwargs:
          expression: "kernel --name .+compute_node"


      - function: bss_test_utils:better_validate_regex
        extra_kwargs:
          expression: 'kernel --name .+xname={node_xname}'


      - function: bss_test_utils:better_validate_regex
        extra_kwargs:
          expression: 'kernel --name .+nid={node_nid}'