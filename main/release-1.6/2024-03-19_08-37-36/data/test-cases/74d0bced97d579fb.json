{"uid":"74d0bced97d579fb","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1710837420003,"stop":1710837427546,"duration":7543},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710837420180,"stop":1710837420212,"duration":32},"status":"passed","steps":[],"attachments":[{"uid":"de06519efd338bdf","name":"stage_yaml","source":"de06519efd338bdf.yaml","type":"application/yaml","size":333},{"uid":"ffdf74e03c542223","name":"rest_request","source":"ffdf74e03c542223.yaml","type":"application/yaml","size":149},{"uid":"5f8a73582dac86d5","name":"rest_response","source":"5f8a73582dac86d5.yaml","type":"application/yaml","size":5768}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710837420213,"stop":1710837420221,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"bad7ed7a376d3497","name":"stage_yaml","source":"bad7ed7a376d3497.yaml","type":"application/yaml","size":228},{"uid":"71c7369ab74c85e6","name":"rest_request","source":"71c7369ab74c85e6.yaml","type":"application/yaml","size":173},{"uid":"292503f00701c07d","name":"rest_response","source":"292503f00701c07d.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710837420222,"stop":1710837420231,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"e20c468d1dc76156","name":"stage_yaml","source":"e20c468d1dc76156.yaml","type":"application/yaml","size":231},{"uid":"d8643990bc594f1b","name":"rest_request","source":"d8643990bc594f1b.yaml","type":"application/yaml","size":173},{"uid":"719957a9913cbf18","name":"rest_response","source":"719957a9913cbf18.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710837420232,"stop":1710837420242,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"6a795ca79efdb328","name":"stage_yaml","source":"6a795ca79efdb328.yaml","type":"application/yaml","size":543},{"uid":"919f01e20634259c","name":"rest_request","source":"919f01e20634259c.yaml","type":"application/yaml","size":166},{"uid":"8662de0d0b746e08","name":"rest_response","source":"8662de0d0b746e08.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710837420245,"stop":1710837421258,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"ccb60b23395c1827","name":"stage_yaml","source":"ccb60b23395c1827.yaml","type":"application/yaml","size":661},{"uid":"88a4b9bcaa6988a7","name":"rest_request","source":"88a4b9bcaa6988a7.yaml","type":"application/yaml","size":159},{"uid":"b143b62b7a79808c","name":"rest_response","source":"b143b62b7a79808c.yaml","type":"application/yaml","size":680}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710837421259,"stop":1710837421274,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"261072b6212e7aee","name":"stage_yaml","source":"261072b6212e7aee.yaml","type":"application/yaml","size":3543},{"uid":"fb1be044a7b282ed","name":"rest_request","source":"fb1be044a7b282ed.yaml","type":"application/yaml","size":159},{"uid":"ce16eb44bddf116b","name":"rest_response","source":"ce16eb44bddf116b.yaml","type":"application/yaml","size":680}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710837421275,"stop":1710837421286,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"7d202828964ccb1c","name":"stage_yaml","source":"7d202828964ccb1c.yaml","type":"application/yaml","size":639},{"uid":"6bbd292d6ddd5971","name":"rest_request","source":"6bbd292d6ddd5971.yaml","type":"application/yaml","size":229},{"uid":"edee57541df7e040","name":"rest_response","source":"edee57541df7e040.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710837421288,"stop":1710837422301,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"d25113c9a34c5cf2","name":"stage_yaml","source":"d25113c9a34c5cf2.yaml","type":"application/yaml","size":679},{"uid":"e7deab64b17ae6f3","name":"rest_request","source":"e7deab64b17ae6f3.yaml","type":"application/yaml","size":159},{"uid":"1ba0ce202e82d4c7","name":"rest_response","source":"1ba0ce202e82d4c7.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710837422302,"stop":1710837422316,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"281ddd5b95bdcc8e","name":"stage_yaml","source":"281ddd5b95bdcc8e.yaml","type":"application/yaml","size":3157},{"uid":"aaa8867240a0f4d0","name":"rest_request","source":"aaa8867240a0f4d0.yaml","type":"application/yaml","size":159},{"uid":"dff28a8dae73b873","name":"rest_response","source":"dff28a8dae73b873.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710837422317,"stop":1710837422328,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"e436c6c0f42b81d8","name":"stage_yaml","source":"e436c6c0f42b81d8.yaml","type":"application/yaml","size":639},{"uid":"5f80a401a4a7a9b4","name":"rest_request","source":"5f80a401a4a7a9b4.yaml","type":"application/yaml","size":229},{"uid":"4ad364c9e69faf08","name":"rest_response","source":"4ad364c9e69faf08.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710837422330,"stop":1710837423344,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"e9190ce3fddf4366","name":"stage_yaml","source":"e9190ce3fddf4366.yaml","type":"application/yaml","size":679},{"uid":"3a111ce56f5e7dec","name":"rest_request","source":"3a111ce56f5e7dec.yaml","type":"application/yaml","size":159},{"uid":"ab0e688a9a82795b","name":"rest_response","source":"ab0e688a9a82795b.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710837423345,"stop":1710837423359,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"dcdec2a079fe099d","name":"stage_yaml","source":"dcdec2a079fe099d.yaml","type":"application/yaml","size":3157},{"uid":"f1fdfd19785aac82","name":"rest_request","source":"f1fdfd19785aac82.yaml","type":"application/yaml","size":159},{"uid":"497b1460cb72efe3","name":"rest_response","source":"497b1460cb72efe3.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710837423360,"stop":1710837423371,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"a1a2611f7142f8b","name":"stage_yaml","source":"a1a2611f7142f8b.yaml","type":"application/yaml","size":639},{"uid":"f8b3430da6004cdb","name":"rest_request","source":"f8b3430da6004cdb.yaml","type":"application/yaml","size":233},{"uid":"242ba7adf7e8201","name":"rest_response","source":"242ba7adf7e8201.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710837423374,"stop":1710837424385,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"dd93bfc8b57cec78","name":"stage_yaml","source":"dd93bfc8b57cec78.yaml","type":"application/yaml","size":685},{"uid":"2275e2c84c76f4ce","name":"rest_request","source":"2275e2c84c76f4ce.yaml","type":"application/yaml","size":159},{"uid":"d45f72eaf8f601a2","name":"rest_response","source":"d45f72eaf8f601a2.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710837424386,"stop":1710837424399,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"4d9dd02110fdc7a5","name":"stage_yaml","source":"4d9dd02110fdc7a5.yaml","type":"application/yaml","size":2234},{"uid":"ec43466b584b223f","name":"rest_request","source":"ec43466b584b223f.yaml","type":"application/yaml","size":159},{"uid":"da93ef030a3ab545","name":"rest_response","source":"da93ef030a3ab545.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710837424400,"stop":1710837424410,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"f7b9d976a342fd0f","name":"stage_yaml","source":"f7b9d976a342fd0f.yaml","type":"application/yaml","size":631},{"uid":"49c674e81969f27b","name":"rest_request","source":"49c674e81969f27b.yaml","type":"application/yaml","size":227},{"uid":"7396f0bac465268c","name":"rest_response","source":"7396f0bac465268c.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710837424412,"stop":1710837425424,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"6354715cb1d0cf0b","name":"stage_yaml","source":"6354715cb1d0cf0b.yaml","type":"application/yaml","size":685},{"uid":"a0e2bc122a57ba29","name":"rest_request","source":"a0e2bc122a57ba29.yaml","type":"application/yaml","size":159},{"uid":"10972c86e416a5ef","name":"rest_response","source":"10972c86e416a5ef.yaml","type":"application/yaml","size":569}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710837425425,"stop":1710837425438,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"5f8c0b84b9428388","name":"stage_yaml","source":"5f8c0b84b9428388.yaml","type":"application/yaml","size":2230},{"uid":"fa18b81af7adcd00","name":"rest_request","source":"fa18b81af7adcd00.yaml","type":"application/yaml","size":159},{"uid":"5f46e135bdc82d73","name":"rest_response","source":"5f46e135bdc82d73.yaml","type":"application/yaml","size":569}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710837425439,"stop":1710837425450,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"79897843c04833ca","name":"stage_yaml","source":"79897843c04833ca.yaml","type":"application/yaml","size":599},{"uid":"2e19e86e687a0eb9","name":"rest_request","source":"2e19e86e687a0eb9.yaml","type":"application/yaml","size":227},{"uid":"542dd45b6fbc5e3c","name":"rest_response","source":"542dd45b6fbc5e3c.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710837425452,"stop":1710837426466,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"7de76c9cf3e40026","name":"stage_yaml","source":"7de76c9cf3e40026.yaml","type":"application/yaml","size":679},{"uid":"2a6bb27d01fb832a","name":"rest_request","source":"2a6bb27d01fb832a.yaml","type":"application/yaml","size":159},{"uid":"b6dc3d4bcac78f10","name":"rest_response","source":"b6dc3d4bcac78f10.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710837426468,"stop":1710837426481,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"f201d82c466a9d2a","name":"stage_yaml","source":"f201d82c466a9d2a.yaml","type":"application/yaml","size":3125},{"uid":"e7bb086d71312d4a","name":"rest_request","source":"e7bb086d71312d4a.yaml","type":"application/yaml","size":159},{"uid":"a04b51c9d09821d8","name":"rest_response","source":"a04b51c9d09821d8.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710837426482,"stop":1710837426493,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"56d0731889cbefa5","name":"stage_yaml","source":"56d0731889cbefa5.yaml","type":"application/yaml","size":640},{"uid":"70ac15b84f57ddb2","name":"rest_request","source":"70ac15b84f57ddb2.yaml","type":"application/yaml","size":229},{"uid":"4e00067e111c1a6a","name":"rest_response","source":"4e00067e111c1a6a.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710837426496,"stop":1710837427510,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"ca1e4a322d86fc80","name":"stage_yaml","source":"ca1e4a322d86fc80.yaml","type":"application/yaml","size":680},{"uid":"4889a36f08ff55c3","name":"rest_request","source":"4889a36f08ff55c3.yaml","type":"application/yaml","size":159},{"uid":"ea2def092343b424","name":"rest_response","source":"ea2def092343b424.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710837427511,"stop":1710837427525,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"65bee85e391ade10","name":"stage_yaml","source":"65bee85e391ade10.yaml","type":"application/yaml","size":3160},{"uid":"54075b664a85eb12","name":"rest_request","source":"54075b664a85eb12.yaml","type":"application/yaml","size":159},{"uid":"6f38436cb8b549b5","name":"rest_response","source":"6f38436cb8b549b5.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710837427526,"stop":1710837427535,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"e3bc8a5dc6ad0f6","name":"stage_yaml","source":"e3bc8a5dc6ad0f6.yaml","type":"application/yaml","size":276},{"uid":"e28cb4ae22672ca4","name":"rest_request","source":"e28cb4ae22672ca4.yaml","type":"application/yaml","size":173},{"uid":"cd6714332e80ba19","name":"rest_response","source":"cd6714332e80ba19.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710837427536,"stop":1710837427545,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"4c19727bfe85fefd","name":"stage_yaml","source":"4c19727bfe85fefd.yaml","type":"application/yaml","size":256},{"uid":"aed8ab911692b05d","name":"rest_request","source":"aed8ab911692b05d.yaml","type":"application/yaml","size":172},{"uid":"cfe415c8000d9c82","name":"rest_response","source":"cfe415c8000d9c82.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"158da637d459"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":11,"broken":0,"skipped":0,"passed":229,"unknown":0,"total":240},"items":[{"uid":"c4fe74dc3f37478c","status":"passed","time":{"start":1710751040688,"stop":1710751049224,"duration":8536}},{"uid":"114871912306baec","status":"passed","time":{"start":1710664637315,"stop":1710664644846,"duration":7531}},{"uid":"8bb44de05dc633ab","status":"passed","time":{"start":1710578194981,"stop":1710578202565,"duration":7584}},{"uid":"f85e20e6fc39da1b","status":"passed","time":{"start":1710491828802,"stop":1710491836371,"duration":7569}},{"uid":"cbc19158ffdafb4","status":"passed","time":{"start":1710405344027,"stop":1710405351547,"duration":7520}},{"uid":"1f3f2149ec02c7eb","status":"passed","time":{"start":1710318542446,"stop":1710318549990,"duration":7544}},{"uid":"63240daf5f3f9284","status":"passed","time":{"start":1710232110339,"stop":1710232117847,"duration":7508}},{"uid":"62ab39e3e2dd2bd4","status":"passed","time":{"start":1710145770370,"stop":1710145777894,"duration":7524}},{"uid":"725cba9229e2eef8","status":"passed","time":{"start":1710059308434,"stop":1710059315954,"duration":7520}},{"uid":"414c17d73130c79e","status":"passed","time":{"start":1709972918159,"stop":1709972925677,"duration":7518}},{"uid":"2be476f1ab41110a","status":"passed","time":{"start":1709886508810,"stop":1709886516322,"duration":7512}},{"uid":"3343d596bb2a0e12","status":"passed","time":{"start":1709800102453,"stop":1709800110000,"duration":7547}},{"uid":"c3051bf3dcc21945","status":"passed","time":{"start":1709713765559,"stop":1709713773102,"duration":7543}},{"uid":"a63b4aa524fab92f","status":"passed","time":{"start":1709627321529,"stop":1709627329057,"duration":7528}},{"uid":"e90b44449550068f","status":"passed","time":{"start":1709541665796,"stop":1709541673319,"duration":7523}},{"uid":"678bdd8973e1cd24","status":"passed","time":{"start":1709454596365,"stop":1709454604900,"duration":8535}},{"uid":"286d4c73d9c39cfc","status":"passed","time":{"start":1709368104309,"stop":1709368111834,"duration":7525}},{"uid":"d6c929dbf61edd44","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f7fb6a91d30>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1709281742286,"stop":1709281751690,"duration":9404}},{"uid":"3f4935b6e02c020a","status":"passed","time":{"start":1709195293494,"stop":1709195301011,"duration":7517}},{"uid":"86f7f1c82d7e3295","status":"passed","time":{"start":1709108952857,"stop":1709108960416,"duration":7559}}]},"tags":[]},"source":"74d0bced97d579fb.json","parameterValues":[]}