{"uid":"a48c23638f844c97","name":"Verify power-cap for a single node","fullName":"api.3-build-pipeline-only.test_power-cap.tavern#Verify power-cap for a single node","historyId":"e2ae67539213be5181105043ad513bb3","time":{"start":1710923764761,"stop":1710923772293,"duration":7532},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1710923764935,"stop":1710923764970,"duration":35},"status":"passed","steps":[],"attachments":[{"uid":"844ae620171f50bf","name":"stage_yaml","source":"844ae620171f50bf.yaml","type":"application/yaml","size":333},{"uid":"391b185a0a05da8c","name":"rest_request","source":"391b185a0a05da8c.yaml","type":"application/yaml","size":149},{"uid":"1bc9559b1d7ea26","name":"rest_response","source":"1bc9559b1d7ea26.yaml","type":"application/yaml","size":5768}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Set target node state to Off","time":{"start":1710923764970,"stop":1710923764978,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"bb2c637d4ce9b1b2","name":"stage_yaml","source":"bb2c637d4ce9b1b2.yaml","type":"application/yaml","size":228},{"uid":"d50e1915b1b11919","name":"rest_request","source":"d50e1915b1b11919.yaml","type":"application/yaml","size":173},{"uid":"517576334824afe9","name":"rest_response","source":"517576334824afe9.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Set target node state to Ready","time":{"start":1710923764979,"stop":1710923764987,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"ce56fdbd16e80d0c","name":"stage_yaml","source":"ce56fdbd16e80d0c.yaml","type":"application/yaml","size":231},{"uid":"890ce6d072110f3a","name":"rest_request","source":"890ce6d072110f3a.yaml","type":"application/yaml","size":173},{"uid":"1fa1ae9575d9b862","name":"rest_response","source":"1fa1ae9575d9b862.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Create a power-cap snapshot for the target node","time":{"start":1710923764988,"stop":1710923764998,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"e5cdc5aa6d7e1daf","name":"stage_yaml","source":"e5cdc5aa6d7e1daf.yaml","type":"application/yaml","size":543},{"uid":"d657932426c7ff85","name":"rest_request","source":"d657932426c7ff85.yaml","type":"application/yaml","size":166},{"uid":"98fbe1e892ccd8d5","name":"rest_response","source":"98fbe1e892ccd8d5.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Retrieve the power-cap snapshot for the target node","time":{"start":1710923765000,"stop":1710923766013,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"28f6c9c168abd1cc","name":"stage_yaml","source":"28f6c9c168abd1cc.yaml","type":"application/yaml","size":661},{"uid":"54b7baaadbfb418c","name":"rest_request","source":"54b7baaadbfb418c.yaml","type":"application/yaml","size":159},{"uid":"546c592ed9266ef3","name":"rest_response","source":"546c592ed9266ef3.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Retrieve the completed power-cap snapshot for the target node","time":{"start":1710923766014,"stop":1710923766029,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"1e19fa6c42d4eff5","name":"stage_yaml","source":"1e19fa6c42d4eff5.yaml","type":"application/yaml","size":3543},{"uid":"c0ff58031263e508","name":"rest_request","source":"c0ff58031263e508.yaml","type":"application/yaml","size":159},{"uid":"8eac71da6c410a22","name":"rest_response","source":"8eac71da6c410a22.yaml","type":"application/yaml","size":678}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Set a power-cap of the minimum value on the target node","time":{"start":1710923766029,"stop":1710923766040,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"9cb7c831338dcb19","name":"stage_yaml","source":"9cb7c831338dcb19.yaml","type":"application/yaml","size":639},{"uid":"2161bcc01788406d","name":"rest_request","source":"2161bcc01788406d.yaml","type":"application/yaml","size":229},{"uid":"421f90fdfe85beec","name":"rest_response","source":"421f90fdfe85beec.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the power-cap patch for the target node and minimum power cap value","time":{"start":1710923766042,"stop":1710923767056,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"9b93732b4b432e6","name":"stage_yaml","source":"9b93732b4b432e6.yaml","type":"application/yaml","size":679},{"uid":"4766dbc1d43e2fd8","name":"rest_request","source":"4766dbc1d43e2fd8.yaml","type":"application/yaml","size":159},{"uid":"c7c9713b59cb2782","name":"rest_response","source":"c7c9713b59cb2782.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed power-cap patch for the target node and minimum power cap value","time":{"start":1710923767057,"stop":1710923767070,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"225ee755af2f2b68","name":"stage_yaml","source":"225ee755af2f2b68.yaml","type":"application/yaml","size":3157},{"uid":"dd58014ee9f7c85b","name":"rest_request","source":"dd58014ee9f7c85b.yaml","type":"application/yaml","size":159},{"uid":"9f3940129a9b7dec","name":"rest_response","source":"9f3940129a9b7dec.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Set a power-cap of the maximum value on the target node","time":{"start":1710923767071,"stop":1710923767082,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"a7b565243a1c49ce","name":"stage_yaml","source":"a7b565243a1c49ce.yaml","type":"application/yaml","size":639},{"uid":"1eff066f5f3e370d","name":"rest_request","source":"1eff066f5f3e370d.yaml","type":"application/yaml","size":229},{"uid":"78b62e8d89551b52","name":"rest_response","source":"78b62e8d89551b52.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 10: Retrieve the power-cap patch for the target node and maximum power cap value","time":{"start":1710923767084,"stop":1710923768098,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"3db5ab5890ed9413","name":"stage_yaml","source":"3db5ab5890ed9413.yaml","type":"application/yaml","size":679},{"uid":"9d79d31fa65a537","name":"rest_request","source":"9d79d31fa65a537.yaml","type":"application/yaml","size":159},{"uid":"51f33a93e7ccbcfc","name":"rest_response","source":"51f33a93e7ccbcfc.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 11: Retrieve the completed power-cap patch for the target node and maximum power cap value","time":{"start":1710923768099,"stop":1710923768113,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"459f47a333652030","name":"stage_yaml","source":"459f47a333652030.yaml","type":"application/yaml","size":3157},{"uid":"58644d9600c89eb9","name":"rest_request","source":"58644d9600c89eb9.yaml","type":"application/yaml","size":159},{"uid":"ac96b7ee6cc70cd2","name":"rest_response","source":"ac96b7ee6cc70cd2.yaml","type":"application/yaml","size":617}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 12: Attempt to set a power-cap greater than the maximum value on the target node","time":{"start":1710923768114,"stop":1710923768124,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"40b57e3eac81cff3","name":"stage_yaml","source":"40b57e3eac81cff3.yaml","type":"application/yaml","size":639},{"uid":"51f3eb597af2f36d","name":"rest_request","source":"51f3eb597af2f36d.yaml","type":"application/yaml","size":233},{"uid":"bf6230d4bc97b4b9","name":"rest_response","source":"bf6230d4bc97b4b9.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 13: Retrieve the power-cap patch for the target node and power cap value above maximum","time":{"start":1710923768126,"stop":1710923769138,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"4d029fe6dc676098","name":"stage_yaml","source":"4d029fe6dc676098.yaml","type":"application/yaml","size":685},{"uid":"532d7118546d5bbf","name":"rest_request","source":"532d7118546d5bbf.yaml","type":"application/yaml","size":159},{"uid":"cf1838c092fb0bff","name":"rest_response","source":"cf1838c092fb0bff.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 14: Retrieve the completed power-cap patch for the target node and power cap value above maximum","time":{"start":1710923769139,"stop":1710923769151,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"6c29dfbefeaf2567","name":"stage_yaml","source":"6c29dfbefeaf2567.yaml","type":"application/yaml","size":2234},{"uid":"176766937aad8188","name":"rest_request","source":"176766937aad8188.yaml","type":"application/yaml","size":159},{"uid":"78a0741544e37748","name":"rest_response","source":"78a0741544e37748.yaml","type":"application/yaml","size":577}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 15: Attempt to set a power-cap lower than the minimum value on the target node","time":{"start":1710923769152,"stop":1710923769163,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"3cb3267d225d699e","name":"stage_yaml","source":"3cb3267d225d699e.yaml","type":"application/yaml","size":631},{"uid":"105c13389f217ff","name":"rest_request","source":"105c13389f217ff.yaml","type":"application/yaml","size":227},{"uid":"799b1e6701e3e4e4","name":"rest_response","source":"799b1e6701e3e4e4.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 16: Retrieve the power-cap patch for the target node and power cap value below minimum","time":{"start":1710923769165,"stop":1710923770176,"duration":1011},"status":"passed","steps":[],"attachments":[{"uid":"874b54c9f2f095dc","name":"stage_yaml","source":"874b54c9f2f095dc.yaml","type":"application/yaml","size":685},{"uid":"e2c095307fb02646","name":"rest_request","source":"e2c095307fb02646.yaml","type":"application/yaml","size":159},{"uid":"dc818655b186ac13","name":"rest_response","source":"dc818655b186ac13.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 17: Retrieve the completed power-cap patch for the target node and power cap value below minimum","time":{"start":1710923770177,"stop":1710923770190,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"5da8aa18c58b887f","name":"stage_yaml","source":"5da8aa18c58b887f.yaml","type":"application/yaml","size":2230},{"uid":"7f2a4786a7598ace","name":"rest_request","source":"7f2a4786a7598ace.yaml","type":"application/yaml","size":159},{"uid":"c97e716d938d9cf7","name":"rest_response","source":"c97e716d938d9cf7.yaml","type":"application/yaml","size":571}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 18: Set a power-cap of zero on the target node","time":{"start":1710923770191,"stop":1710923770201,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"3ccfb8748255891b","name":"stage_yaml","source":"3ccfb8748255891b.yaml","type":"application/yaml","size":599},{"uid":"69ff1b8d2f0a1b3a","name":"rest_request","source":"69ff1b8d2f0a1b3a.yaml","type":"application/yaml","size":227},{"uid":"c338eb40c1fad269","name":"rest_response","source":"c338eb40c1fad269.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 19: Retrieve the power-cap patch for the target node and power cap value of zero","time":{"start":1710923770204,"stop":1710923771217,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"c628cf294383a976","name":"stage_yaml","source":"c628cf294383a976.yaml","type":"application/yaml","size":679},{"uid":"e7473e4a170160df","name":"rest_request","source":"e7473e4a170160df.yaml","type":"application/yaml","size":159},{"uid":"44667f4c066ee0fb","name":"rest_response","source":"44667f4c066ee0fb.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 20: Retrieve the completed power-cap patch for the target node and power cap of zero","time":{"start":1710923771218,"stop":1710923771232,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"2020f12486312b5","name":"stage_yaml","source":"2020f12486312b5.yaml","type":"application/yaml","size":3125},{"uid":"db75f39116df6789","name":"rest_request","source":"db75f39116df6789.yaml","type":"application/yaml","size":159},{"uid":"a33a7fc22d2d0af3","name":"rest_response","source":"a33a7fc22d2d0af3.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 21: Restore the original power-cap value on the target node","time":{"start":1710923771233,"stop":1710923771244,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"9aa61ca59df15387","name":"stage_yaml","source":"9aa61ca59df15387.yaml","type":"application/yaml","size":640},{"uid":"7111e361a9636ce8","name":"rest_request","source":"7111e361a9636ce8.yaml","type":"application/yaml","size":227},{"uid":"61b2d4f6eeaf4315","name":"rest_response","source":"61b2d4f6eeaf4315.yaml","type":"application/yaml","size":261}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 22: Retrieve the power-cap patch for the target node and original power cap value","time":{"start":1710923771246,"stop":1710923772260,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"c3e62de030d8b5a6","name":"stage_yaml","source":"c3e62de030d8b5a6.yaml","type":"application/yaml","size":680},{"uid":"14031921a42a725","name":"rest_request","source":"14031921a42a725.yaml","type":"application/yaml","size":159},{"uid":"e012c99adfca2553","name":"rest_response","source":"e012c99adfca2553.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 23: Retrieve the completed power-cap patch for the target node and original power cap value","time":{"start":1710923772261,"stop":1710923772274,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"abe4fa6612c921a4","name":"stage_yaml","source":"abe4fa6612c921a4.yaml","type":"application/yaml","size":3160},{"uid":"e20b431405d5d97d","name":"rest_request","source":"e20b431405d5d97d.yaml","type":"application/yaml","size":159},{"uid":"1bcac9534f63901e","name":"rest_response","source":"1bcac9534f63901e.yaml","type":"application/yaml","size":615}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 24: Prepare to restore the original state of the target node by setting it to Off","time":{"start":1710923772275,"stop":1710923772284,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"2c1b09946730d94e","name":"stage_yaml","source":"2c1b09946730d94e.yaml","type":"application/yaml","size":276},{"uid":"e2f7b9946f1a9829","name":"rest_request","source":"e2f7b9946f1a9829.yaml","type":"application/yaml","size":173},{"uid":"ba3e59c199622c0f","name":"rest_response","source":"ba3e59c199622c0f.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 25: Restore the original state of the target node","time":{"start":1710923772285,"stop":1710923772293,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"48bf9237718fdb76","name":"stage_yaml","source":"48bf9237718fdb76.yaml","type":"application/yaml","size":256},{"uid":"24457f5dbcaaf777","name":"rest_request","source":"24457f5dbcaaf777.yaml","type":"application/yaml","size":173},{"uid":"83cc24cbf15a560a","name":"rest_response","source":"83cc24cbf15a560a.yaml","type":"application/yaml","size":134}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[],"parameters":[],"stepsCount":26,"attachmentsCount":78,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"build-pipeline-only"},{"name":"host","value":"bb8fe77c32d8"},{"name":"thread","value":"9-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.3-build-pipeline-only.test_power-cap.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":11,"broken":0,"skipped":0,"passed":230,"unknown":0,"total":241},"items":[{"uid":"74d0bced97d579fb","status":"passed","time":{"start":1710837420003,"stop":1710837427546,"duration":7543}},{"uid":"c4fe74dc3f37478c","status":"passed","time":{"start":1710751040688,"stop":1710751049224,"duration":8536}},{"uid":"114871912306baec","status":"passed","time":{"start":1710664637315,"stop":1710664644846,"duration":7531}},{"uid":"8bb44de05dc633ab","status":"passed","time":{"start":1710578194981,"stop":1710578202565,"duration":7584}},{"uid":"f85e20e6fc39da1b","status":"passed","time":{"start":1710491828802,"stop":1710491836371,"duration":7569}},{"uid":"cbc19158ffdafb4","status":"passed","time":{"start":1710405344027,"stop":1710405351547,"duration":7520}},{"uid":"1f3f2149ec02c7eb","status":"passed","time":{"start":1710318542446,"stop":1710318549990,"duration":7544}},{"uid":"63240daf5f3f9284","status":"passed","time":{"start":1710232110339,"stop":1710232117847,"duration":7508}},{"uid":"62ab39e3e2dd2bd4","status":"passed","time":{"start":1710145770370,"stop":1710145777894,"duration":7524}},{"uid":"725cba9229e2eef8","status":"passed","time":{"start":1710059308434,"stop":1710059315954,"duration":7520}},{"uid":"414c17d73130c79e","status":"passed","time":{"start":1709972918159,"stop":1709972925677,"duration":7518}},{"uid":"2be476f1ab41110a","status":"passed","time":{"start":1709886508810,"stop":1709886516322,"duration":7512}},{"uid":"3343d596bb2a0e12","status":"passed","time":{"start":1709800102453,"stop":1709800110000,"duration":7547}},{"uid":"c3051bf3dcc21945","status":"passed","time":{"start":1709713765559,"stop":1709713773102,"duration":7543}},{"uid":"a63b4aa524fab92f","status":"passed","time":{"start":1709627321529,"stop":1709627329057,"duration":7528}},{"uid":"e90b44449550068f","status":"passed","time":{"start":1709541665796,"stop":1709541673319,"duration":7523}},{"uid":"678bdd8973e1cd24","status":"passed","time":{"start":1709454596365,"stop":1709454604900,"duration":8535}},{"uid":"286d4c73d9c39cfc","status":"passed","time":{"start":1709368104309,"stop":1709368111834,"duration":7525}},{"uid":"d6c929dbf61edd44","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Retrieve the completed power-cap patch for the target node and minimum power cap value' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f7fb6a91d30>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'error' was not defined. Path: '/components/0'.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1709281742286,"stop":1709281751690,"duration":9404}},{"uid":"3f4935b6e02c020a","status":"passed","time":{"start":1709195293494,"stop":1709195301011,"duration":7517}}]},"tags":[]},"source":"a48c23638f844c97.json","parameterValues":[]}