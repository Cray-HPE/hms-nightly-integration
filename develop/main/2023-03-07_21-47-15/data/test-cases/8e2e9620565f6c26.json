{"uid":"8e2e9620565f6c26","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1678224052981,"stop":1678224070653,"duration":17672},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1678224053198,"stop":1678224053237,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"44f22814febf0f29","name":"stage_yaml","source":"44f22814febf0f29.yaml","type":"application/yaml","size":315},{"uid":"99aa7eeb0317cff0","name":"rest_request","source":"99aa7eeb0317cff0.yaml","type":"application/yaml","size":162},{"uid":"7b3fee2168a706f9","name":"rest_response","source":"7b3fee2168a706f9.yaml","type":"application/yaml","size":5744}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1678224053238,"stop":1678224053252,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"e0b73b8f47f32444","name":"stage_yaml","source":"e0b73b8f47f32444.yaml","type":"application/yaml","size":775},{"uid":"b4e51674588d8586","name":"rest_request","source":"b4e51674588d8586.yaml","type":"application/yaml","size":211},{"uid":"eb96d982e47fbf06","name":"rest_response","source":"eb96d982e47fbf06.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1678224053254,"stop":1678224054274,"duration":1020},"status":"passed","steps":[],"attachments":[{"uid":"bc98bdc968b7e70c","name":"stage_yaml","source":"bc98bdc968b7e70c.yaml","type":"application/yaml","size":661},{"uid":"71395a9ad9a4a9b","name":"rest_request","source":"71395a9ad9a4a9b.yaml","type":"application/yaml","size":161},{"uid":"f400a0400e820b6a","name":"rest_response","source":"f400a0400e820b6a.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1678224054275,"stop":1678224054291,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"6e3b4ec98def153a","name":"stage_yaml","source":"6e3b4ec98def153a.yaml","type":"application/yaml","size":2375},{"uid":"b5a69fe0e9134dbc","name":"rest_request","source":"b5a69fe0e9134dbc.yaml","type":"application/yaml","size":161},{"uid":"99d49470b1b06972","name":"rest_response","source":"99d49470b1b06972.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1678224054292,"stop":1678224054305,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"759267fc7fca90ba","name":"stage_yaml","source":"759267fc7fca90ba.yaml","type":"application/yaml","size":976},{"uid":"dd5d63cbcc219fd4","name":"rest_request","source":"dd5d63cbcc219fd4.yaml","type":"application/yaml","size":145},{"uid":"3e1aa523809c8d09","name":"rest_response","source":"3e1aa523809c8d09.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1678224054306,"stop":1678224054322,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"3263f0dc100e7d6","name":"stage_yaml","source":"3263f0dc100e7d6.yaml","type":"application/yaml","size":1939},{"uid":"460658634794aefa","name":"rest_request","source":"460658634794aefa.yaml","type":"application/yaml","size":161},{"uid":"470cc98e8698e5af","name":"rest_response","source":"470cc98e8698e5af.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1678224054323,"stop":1678224054346,"duration":23},"status":"passed","steps":[],"attachments":[{"uid":"f0f3ca1c1d1ff71e","name":"stage_yaml","source":"f0f3ca1c1d1ff71e.yaml","type":"application/yaml","size":786},{"uid":"c8eb5f224fa05d29","name":"rest_request","source":"c8eb5f224fa05d29.yaml","type":"application/yaml","size":216},{"uid":"b0741de5ac71befc","name":"rest_response","source":"b0741de5ac71befc.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1678224054351,"stop":1678224070618,"duration":16267},"status":"passed","steps":[],"attachments":[{"uid":"dbb9f37ed15d4e76","name":"stage_yaml","source":"dbb9f37ed15d4e76.yaml","type":"application/yaml","size":684},{"uid":"5319c867e1ed89d1","name":"rest_request","source":"5319c867e1ed89d1.yaml","type":"application/yaml","size":161},{"uid":"fb2f1809eadcb519","name":"rest_response","source":"fb2f1809eadcb519.yaml","type":"application/yaml","size":628},{"uid":"1aea60acf045433f","name":"stage_yaml","source":"1aea60acf045433f.yaml","type":"application/yaml","size":684},{"uid":"a6f4d3b627eb7881","name":"rest_request","source":"a6f4d3b627eb7881.yaml","type":"application/yaml","size":161},{"uid":"99d6676c3c6e8c5b","name":"rest_response","source":"99d6676c3c6e8c5b.yaml","type":"application/yaml","size":628},{"uid":"31a95d4cdc85a46d","name":"stage_yaml","source":"31a95d4cdc85a46d.yaml","type":"application/yaml","size":684},{"uid":"4c4279fac980a17","name":"rest_request","source":"4c4279fac980a17.yaml","type":"application/yaml","size":161},{"uid":"23b28cfaffda9c80","name":"rest_response","source":"23b28cfaffda9c80.yaml","type":"application/yaml","size":628},{"uid":"e402e832ae8fe1c0","name":"stage_yaml","source":"e402e832ae8fe1c0.yaml","type":"application/yaml","size":684},{"uid":"425d374e894f3e9a","name":"rest_request","source":"425d374e894f3e9a.yaml","type":"application/yaml","size":161},{"uid":"c5a62bae5ea590a0","name":"rest_response","source":"c5a62bae5ea590a0.yaml","type":"application/yaml","size":628},{"uid":"4c030bb288341eb9","name":"stage_yaml","source":"4c030bb288341eb9.yaml","type":"application/yaml","size":684},{"uid":"2d68777cbb314caa","name":"rest_request","source":"2d68777cbb314caa.yaml","type":"application/yaml","size":161},{"uid":"83d2f9a4a8d52d01","name":"rest_response","source":"83d2f9a4a8d52d01.yaml","type":"application/yaml","size":628},{"uid":"a7c0000aaf5299ca","name":"stage_yaml","source":"a7c0000aaf5299ca.yaml","type":"application/yaml","size":684},{"uid":"c2f4b0cbf110940c","name":"rest_request","source":"c2f4b0cbf110940c.yaml","type":"application/yaml","size":161},{"uid":"485f1fc595153a2f","name":"rest_response","source":"485f1fc595153a2f.yaml","type":"application/yaml","size":628},{"uid":"856340c6e80af531","name":"stage_yaml","source":"856340c6e80af531.yaml","type":"application/yaml","size":684},{"uid":"136da2b082aca9b6","name":"rest_request","source":"136da2b082aca9b6.yaml","type":"application/yaml","size":161},{"uid":"5f721ae81917e0e6","name":"rest_response","source":"5f721ae81917e0e6.yaml","type":"application/yaml","size":628},{"uid":"6a25a08a8bb58706","name":"stage_yaml","source":"6a25a08a8bb58706.yaml","type":"application/yaml","size":684},{"uid":"cd4912258ce00334","name":"rest_request","source":"cd4912258ce00334.yaml","type":"application/yaml","size":161},{"uid":"25203910638801a1","name":"rest_response","source":"25203910638801a1.yaml","type":"application/yaml","size":628},{"uid":"2efbcb28b2ad3865","name":"stage_yaml","source":"2efbcb28b2ad3865.yaml","type":"application/yaml","size":684},{"uid":"e82d6afccc433206","name":"rest_request","source":"e82d6afccc433206.yaml","type":"application/yaml","size":161},{"uid":"e977648b3ce9247a","name":"rest_response","source":"e977648b3ce9247a.yaml","type":"application/yaml","size":628},{"uid":"9452a925d91b9ffc","name":"stage_yaml","source":"9452a925d91b9ffc.yaml","type":"application/yaml","size":684},{"uid":"38211c0fd6b29121","name":"rest_request","source":"38211c0fd6b29121.yaml","type":"application/yaml","size":161},{"uid":"5938412bf5c9438e","name":"rest_response","source":"5938412bf5c9438e.yaml","type":"application/yaml","size":628},{"uid":"ee26129e04fbed76","name":"stage_yaml","source":"ee26129e04fbed76.yaml","type":"application/yaml","size":684},{"uid":"e4f79cc2932df784","name":"rest_request","source":"e4f79cc2932df784.yaml","type":"application/yaml","size":161},{"uid":"293eb6f2d4df4e34","name":"rest_response","source":"293eb6f2d4df4e34.yaml","type":"application/yaml","size":628},{"uid":"6fa08492ebaf64ad","name":"stage_yaml","source":"6fa08492ebaf64ad.yaml","type":"application/yaml","size":684},{"uid":"d1a3ac1670d75fd8","name":"rest_request","source":"d1a3ac1670d75fd8.yaml","type":"application/yaml","size":161},{"uid":"c773aaeed47db08d","name":"rest_response","source":"c773aaeed47db08d.yaml","type":"application/yaml","size":628},{"uid":"754bd990d03125a5","name":"stage_yaml","source":"754bd990d03125a5.yaml","type":"application/yaml","size":684},{"uid":"637a52086c15bec4","name":"rest_request","source":"637a52086c15bec4.yaml","type":"application/yaml","size":161},{"uid":"d2c81e4b5834b021","name":"rest_response","source":"d2c81e4b5834b021.yaml","type":"application/yaml","size":628},{"uid":"1855c5fa88df1832","name":"stage_yaml","source":"1855c5fa88df1832.yaml","type":"application/yaml","size":684},{"uid":"467e0cff5b493240","name":"rest_request","source":"467e0cff5b493240.yaml","type":"application/yaml","size":161},{"uid":"6d7bdf10f57be782","name":"rest_response","source":"6d7bdf10f57be782.yaml","type":"application/yaml","size":628},{"uid":"40541dcf7c735bc8","name":"stage_yaml","source":"40541dcf7c735bc8.yaml","type":"application/yaml","size":684},{"uid":"7661e7481b15d794","name":"rest_request","source":"7661e7481b15d794.yaml","type":"application/yaml","size":161},{"uid":"be6ea96742eaae69","name":"rest_response","source":"be6ea96742eaae69.yaml","type":"application/yaml","size":628},{"uid":"18bbcbeb9042ada1","name":"stage_yaml","source":"18bbcbeb9042ada1.yaml","type":"application/yaml","size":684},{"uid":"8a9638c22769d32f","name":"rest_request","source":"8a9638c22769d32f.yaml","type":"application/yaml","size":161},{"uid":"669f5ac7b6f3a1","name":"rest_response","source":"669f5ac7b6f3a1.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1678224070619,"stop":1678224070636,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"49979b45833ce39d","name":"stage_yaml","source":"49979b45833ce39d.yaml","type":"application/yaml","size":2504},{"uid":"cd35174c6637a142","name":"rest_request","source":"cd35174c6637a142.yaml","type":"application/yaml","size":161},{"uid":"61cbef839bd1d9b3","name":"rest_response","source":"61cbef839bd1d9b3.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1678224070637,"stop":1678224070652,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"cc0e7cb997672db8","name":"stage_yaml","source":"cc0e7cb997672db8.yaml","type":"application/yaml","size":1916},{"uid":"fce70bc063bf0569","name":"rest_request","source":"fce70bc063bf0569.yaml","type":"application/yaml","size":163},{"uid":"75bb2f77c159e8c4","name":"rest_response","source":"75bb2f77c159e8c4.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"7652d077704680a5","name":"log","source":"7652d077704680a5.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"3159a62854fe"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":11,"unknown":0,"total":14},"items":[{"uid":"eae89e099ebd66f9","status":"passed","time":{"start":1678221205618,"stop":1678221223211,"duration":17593}},{"uid":"cf4a6ee55952d175","status":"passed","time":{"start":1678217503793,"stop":1678217521434,"duration":17641}},{"uid":"524bb7d8dea47ca1","status":"passed","time":{"start":1676400572485,"stop":1676400590153,"duration":17668}},{"uid":"7191dc41182dc671","status":"passed","time":{"start":1676399564667,"stop":1676399582265,"duration":17598}},{"uid":"686bc8c6ae3cf7cf","status":"passed","time":{"start":1676324290437,"stop":1676324308063,"duration":17626}},{"uid":"bacab20c1e514b64","status":"passed","time":{"start":1674515117838,"stop":1674515135440,"duration":17602}},{"uid":"cc9fe7fcfc685a13","status":"passed","time":{"start":1674505180537,"stop":1674505198356,"duration":17819}},{"uid":"6fb764d586a0e14","status":"passed","time":{"start":1674499977432,"stop":1674500025694,"duration":48262}},{"uid":"a0f038c91214aee7","status":"passed","time":{"start":1674257354500,"stop":1674257402777,"duration":48277}},{"uid":"bbfabe38b46339e6","status":"passed","time":{"start":1674254706103,"stop":1674254723731,"duration":17628}},{"uid":"318472f36b61d0f3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0feda3bc10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080272630,"stop":1674080274031,"duration":1401}},{"uid":"a7f015ba074dc5e1","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674075004783,"stop":1674075005092,"duration":309}},{"uid":"518fd334076fbc0b","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074622168,"stop":1674074622447,"duration":279}}]},"tags":[]},"source":"8e2e9620565f6c26.json","parameterValues":[]}