{"uid":"686bc8c6ae3cf7cf","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1676324290437,"stop":1676324308063,"duration":17626},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1676324290647,"stop":1676324290686,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"99f594632524dd15","name":"stage_yaml","source":"99f594632524dd15.yaml","type":"application/yaml","size":315},{"uid":"cd7ce93584ae0744","name":"rest_request","source":"cd7ce93584ae0744.yaml","type":"application/yaml","size":162},{"uid":"6db3a4cef1d8737","name":"rest_response","source":"6db3a4cef1d8737.yaml","type":"application/yaml","size":5744}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1676324290687,"stop":1676324290701,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"d08c7c95f951daf2","name":"stage_yaml","source":"d08c7c95f951daf2.yaml","type":"application/yaml","size":775},{"uid":"1d13d28d78aef758","name":"rest_request","source":"1d13d28d78aef758.yaml","type":"application/yaml","size":211},{"uid":"9e52b00e82581fe6","name":"rest_response","source":"9e52b00e82581fe6.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1676324290704,"stop":1676324291718,"duration":1014},"status":"passed","steps":[],"attachments":[{"uid":"5e860973d2c687bf","name":"stage_yaml","source":"5e860973d2c687bf.yaml","type":"application/yaml","size":661},{"uid":"c08d8eedeef789a5","name":"rest_request","source":"c08d8eedeef789a5.yaml","type":"application/yaml","size":161},{"uid":"ba87020ec05b38d6","name":"rest_response","source":"ba87020ec05b38d6.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1676324291719,"stop":1676324291734,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"12916d7a1707265a","name":"stage_yaml","source":"12916d7a1707265a.yaml","type":"application/yaml","size":2375},{"uid":"7b93598a7db22cd6","name":"rest_request","source":"7b93598a7db22cd6.yaml","type":"application/yaml","size":161},{"uid":"a39360805cc2c7c1","name":"rest_response","source":"a39360805cc2c7c1.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1676324291735,"stop":1676324291748,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"27d7040bfbd69469","name":"stage_yaml","source":"27d7040bfbd69469.yaml","type":"application/yaml","size":976},{"uid":"1288af3eba9fa4e2","name":"rest_request","source":"1288af3eba9fa4e2.yaml","type":"application/yaml","size":145},{"uid":"d1215419ddf51da8","name":"rest_response","source":"d1215419ddf51da8.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1676324291749,"stop":1676324291761,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"616fc7627f70cfa7","name":"stage_yaml","source":"616fc7627f70cfa7.yaml","type":"application/yaml","size":1827},{"uid":"de84e99d9c6e8618","name":"rest_request","source":"de84e99d9c6e8618.yaml","type":"application/yaml","size":161},{"uid":"e518ef502f95d487","name":"rest_response","source":"e518ef502f95d487.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1676324291761,"stop":1676324291773,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"e23b1c5358f49243","name":"stage_yaml","source":"e23b1c5358f49243.yaml","type":"application/yaml","size":786},{"uid":"3c9b3a2fa737cf","name":"rest_request","source":"3c9b3a2fa737cf.yaml","type":"application/yaml","size":216},{"uid":"579e63b675dbbe26","name":"rest_response","source":"579e63b675dbbe26.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1676324291776,"stop":1676324308033,"duration":16257},"status":"passed","steps":[],"attachments":[{"uid":"181027dc0b1e515f","name":"stage_yaml","source":"181027dc0b1e515f.yaml","type":"application/yaml","size":684},{"uid":"2ea36968a9a46d29","name":"rest_request","source":"2ea36968a9a46d29.yaml","type":"application/yaml","size":161},{"uid":"bfbfadc015a4c4da","name":"rest_response","source":"bfbfadc015a4c4da.yaml","type":"application/yaml","size":628},{"uid":"24238714a79e7d30","name":"stage_yaml","source":"24238714a79e7d30.yaml","type":"application/yaml","size":684},{"uid":"aa6e38215774e5db","name":"rest_request","source":"aa6e38215774e5db.yaml","type":"application/yaml","size":161},{"uid":"9416a652cc2e53de","name":"rest_response","source":"9416a652cc2e53de.yaml","type":"application/yaml","size":628},{"uid":"cc1f7c1bd7061a24","name":"stage_yaml","source":"cc1f7c1bd7061a24.yaml","type":"application/yaml","size":684},{"uid":"abd7705c02266817","name":"rest_request","source":"abd7705c02266817.yaml","type":"application/yaml","size":161},{"uid":"c322c6ea534183db","name":"rest_response","source":"c322c6ea534183db.yaml","type":"application/yaml","size":628},{"uid":"2796de647581e873","name":"stage_yaml","source":"2796de647581e873.yaml","type":"application/yaml","size":684},{"uid":"90732fbda99bdf0c","name":"rest_request","source":"90732fbda99bdf0c.yaml","type":"application/yaml","size":161},{"uid":"6f544a81c8669a1d","name":"rest_response","source":"6f544a81c8669a1d.yaml","type":"application/yaml","size":628},{"uid":"f661455873d86db6","name":"stage_yaml","source":"f661455873d86db6.yaml","type":"application/yaml","size":684},{"uid":"84267b59c51de3a6","name":"rest_request","source":"84267b59c51de3a6.yaml","type":"application/yaml","size":161},{"uid":"113f664d04c48489","name":"rest_response","source":"113f664d04c48489.yaml","type":"application/yaml","size":628},{"uid":"e8cb11e3363a4a6f","name":"stage_yaml","source":"e8cb11e3363a4a6f.yaml","type":"application/yaml","size":684},{"uid":"b15e330ff5cf5750","name":"rest_request","source":"b15e330ff5cf5750.yaml","type":"application/yaml","size":161},{"uid":"592122d57178b042","name":"rest_response","source":"592122d57178b042.yaml","type":"application/yaml","size":628},{"uid":"5292cd9538c94071","name":"stage_yaml","source":"5292cd9538c94071.yaml","type":"application/yaml","size":684},{"uid":"fb340011f2a840f1","name":"rest_request","source":"fb340011f2a840f1.yaml","type":"application/yaml","size":161},{"uid":"cfbb287bdf234ad3","name":"rest_response","source":"cfbb287bdf234ad3.yaml","type":"application/yaml","size":628},{"uid":"6832c9a6b61f0a58","name":"stage_yaml","source":"6832c9a6b61f0a58.yaml","type":"application/yaml","size":684},{"uid":"97ed6d18810c4640","name":"rest_request","source":"97ed6d18810c4640.yaml","type":"application/yaml","size":161},{"uid":"736fae9a5e1b8c86","name":"rest_response","source":"736fae9a5e1b8c86.yaml","type":"application/yaml","size":628},{"uid":"2d69cca744ca234","name":"stage_yaml","source":"2d69cca744ca234.yaml","type":"application/yaml","size":684},{"uid":"337ac0b37197f72d","name":"rest_request","source":"337ac0b37197f72d.yaml","type":"application/yaml","size":161},{"uid":"80127b43d37bc673","name":"rest_response","source":"80127b43d37bc673.yaml","type":"application/yaml","size":628},{"uid":"12ccce04047ab13a","name":"stage_yaml","source":"12ccce04047ab13a.yaml","type":"application/yaml","size":684},{"uid":"81fec6be9ec34571","name":"rest_request","source":"81fec6be9ec34571.yaml","type":"application/yaml","size":161},{"uid":"7079348cd47a80e5","name":"rest_response","source":"7079348cd47a80e5.yaml","type":"application/yaml","size":628},{"uid":"ae32c02fbd45b2d","name":"stage_yaml","source":"ae32c02fbd45b2d.yaml","type":"application/yaml","size":684},{"uid":"bb83a0cc12fad87","name":"rest_request","source":"bb83a0cc12fad87.yaml","type":"application/yaml","size":161},{"uid":"a4c8968fe35ff8d4","name":"rest_response","source":"a4c8968fe35ff8d4.yaml","type":"application/yaml","size":628},{"uid":"fda804313cf3291a","name":"stage_yaml","source":"fda804313cf3291a.yaml","type":"application/yaml","size":684},{"uid":"139971ab519a69ba","name":"rest_request","source":"139971ab519a69ba.yaml","type":"application/yaml","size":161},{"uid":"bd60eef436ece648","name":"rest_response","source":"bd60eef436ece648.yaml","type":"application/yaml","size":628},{"uid":"868af393dd0cea73","name":"stage_yaml","source":"868af393dd0cea73.yaml","type":"application/yaml","size":684},{"uid":"1882c1518f1e8909","name":"rest_request","source":"1882c1518f1e8909.yaml","type":"application/yaml","size":161},{"uid":"6eb99ad940261ae2","name":"rest_response","source":"6eb99ad940261ae2.yaml","type":"application/yaml","size":628},{"uid":"d0dcd7cf696aa960","name":"stage_yaml","source":"d0dcd7cf696aa960.yaml","type":"application/yaml","size":684},{"uid":"a19cdb839e47e250","name":"rest_request","source":"a19cdb839e47e250.yaml","type":"application/yaml","size":161},{"uid":"391dd0efdb211976","name":"rest_response","source":"391dd0efdb211976.yaml","type":"application/yaml","size":628},{"uid":"13064018d1de42a3","name":"stage_yaml","source":"13064018d1de42a3.yaml","type":"application/yaml","size":684},{"uid":"73d215edf1a43239","name":"rest_request","source":"73d215edf1a43239.yaml","type":"application/yaml","size":161},{"uid":"360424eaf85d2b0d","name":"rest_response","source":"360424eaf85d2b0d.yaml","type":"application/yaml","size":628},{"uid":"bbc338bf2866d9d0","name":"stage_yaml","source":"bbc338bf2866d9d0.yaml","type":"application/yaml","size":684},{"uid":"25aa85d05ccf6271","name":"rest_request","source":"25aa85d05ccf6271.yaml","type":"application/yaml","size":161},{"uid":"ed59abc39e8d06e","name":"rest_response","source":"ed59abc39e8d06e.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1676324308035,"stop":1676324308050,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"7697ca49cbebef1","name":"stage_yaml","source":"7697ca49cbebef1.yaml","type":"application/yaml","size":2504},{"uid":"dfd2115897435b17","name":"rest_request","source":"dfd2115897435b17.yaml","type":"application/yaml","size":161},{"uid":"efab3e5101220888","name":"rest_response","source":"efab3e5101220888.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1676324308051,"stop":1676324308063,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"602e2a163c7caa5a","name":"stage_yaml","source":"602e2a163c7caa5a.yaml","type":"application/yaml","size":1806},{"uid":"38bd9d9ac723c4cb","name":"rest_request","source":"38bd9d9ac723c4cb.yaml","type":"application/yaml","size":163},{"uid":"6add087002f94251","name":"rest_response","source":"6add087002f94251.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"8e37b3d2b83e2771","name":"log","source":"8e37b3d2b83e2771.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"eef637db695a"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":6,"unknown":0,"total":9},"items":[{"uid":"bacab20c1e514b64","status":"passed","time":{"start":1674515117838,"stop":1674515135440,"duration":17602}},{"uid":"cc9fe7fcfc685a13","status":"passed","time":{"start":1674505180537,"stop":1674505198356,"duration":17819}},{"uid":"6fb764d586a0e14","status":"passed","time":{"start":1674499977432,"stop":1674500025694,"duration":48262}},{"uid":"a0f038c91214aee7","status":"passed","time":{"start":1674257354500,"stop":1674257402777,"duration":48277}},{"uid":"bbfabe38b46339e6","status":"passed","time":{"start":1674254706103,"stop":1674254723731,"duration":17628}},{"uid":"318472f36b61d0f3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0feda3bc10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080272630,"stop":1674080274031,"duration":1401}},{"uid":"a7f015ba074dc5e1","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674075004783,"stop":1674075005092,"duration":309}},{"uid":"518fd334076fbc0b","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074622168,"stop":1674074622447,"duration":279}}]},"tags":[]},"source":"686bc8c6ae3cf7cf.json","parameterValues":[]}