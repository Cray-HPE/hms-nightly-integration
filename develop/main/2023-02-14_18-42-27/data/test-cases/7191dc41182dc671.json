{"uid":"7191dc41182dc671","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1676399564667,"stop":1676399582265,"duration":17598},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1676399564883,"stop":1676399564921,"duration":38},"status":"passed","steps":[],"attachments":[{"uid":"d2c0f0a738424100","name":"stage_yaml","source":"d2c0f0a738424100.yaml","type":"application/yaml","size":315},{"uid":"a1a3e1644f318092","name":"rest_request","source":"a1a3e1644f318092.yaml","type":"application/yaml","size":162},{"uid":"d5a75993aec12ad9","name":"rest_response","source":"d5a75993aec12ad9.yaml","type":"application/yaml","size":5744}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1676399564922,"stop":1676399564935,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"7a3dd336eacb7014","name":"stage_yaml","source":"7a3dd336eacb7014.yaml","type":"application/yaml","size":775},{"uid":"f9e761814a70d1d9","name":"rest_request","source":"f9e761814a70d1d9.yaml","type":"application/yaml","size":211},{"uid":"4ae90fa8c1c95274","name":"rest_response","source":"4ae90fa8c1c95274.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1676399564936,"stop":1676399565949,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"95219cdd1af7fd55","name":"stage_yaml","source":"95219cdd1af7fd55.yaml","type":"application/yaml","size":661},{"uid":"fdb23c00000a8702","name":"rest_request","source":"fdb23c00000a8702.yaml","type":"application/yaml","size":161},{"uid":"a443508e2040a430","name":"rest_response","source":"a443508e2040a430.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1676399565950,"stop":1676399565965,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"71f2b8e21e34e838","name":"stage_yaml","source":"71f2b8e21e34e838.yaml","type":"application/yaml","size":2375},{"uid":"c01cd99af618f331","name":"rest_request","source":"c01cd99af618f331.yaml","type":"application/yaml","size":161},{"uid":"4c3b16f9823e675b","name":"rest_response","source":"4c3b16f9823e675b.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1676399565966,"stop":1676399565976,"duration":10},"status":"passed","steps":[],"attachments":[{"uid":"91e30669c9f092b","name":"stage_yaml","source":"91e30669c9f092b.yaml","type":"application/yaml","size":976},{"uid":"ed5fbe50e968af6f","name":"rest_request","source":"ed5fbe50e968af6f.yaml","type":"application/yaml","size":145},{"uid":"74ac303f3bb3ebc","name":"rest_response","source":"74ac303f3bb3ebc.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1676399565977,"stop":1676399565988,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"409c537af034ada9","name":"stage_yaml","source":"409c537af034ada9.yaml","type":"application/yaml","size":1827},{"uid":"c2d4ff2696426fe8","name":"rest_request","source":"c2d4ff2696426fe8.yaml","type":"application/yaml","size":161},{"uid":"73ad294361514dfe","name":"rest_response","source":"73ad294361514dfe.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1676399565989,"stop":1676399566000,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"801579cba62c79d3","name":"stage_yaml","source":"801579cba62c79d3.yaml","type":"application/yaml","size":786},{"uid":"1ffb98d5cbd481d","name":"rest_request","source":"1ffb98d5cbd481d.yaml","type":"application/yaml","size":216},{"uid":"b344e8d3505f1d9a","name":"rest_response","source":"b344e8d3505f1d9a.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1676399566002,"stop":1676399582236,"duration":16234},"status":"passed","steps":[],"attachments":[{"uid":"d0ba50a347480af3","name":"stage_yaml","source":"d0ba50a347480af3.yaml","type":"application/yaml","size":684},{"uid":"e2a6fa0b68b72e2e","name":"rest_request","source":"e2a6fa0b68b72e2e.yaml","type":"application/yaml","size":161},{"uid":"a4754d951fd8ce32","name":"rest_response","source":"a4754d951fd8ce32.yaml","type":"application/yaml","size":628},{"uid":"1bc0cd529be2ee0a","name":"stage_yaml","source":"1bc0cd529be2ee0a.yaml","type":"application/yaml","size":684},{"uid":"c41896ee185f8d18","name":"rest_request","source":"c41896ee185f8d18.yaml","type":"application/yaml","size":161},{"uid":"6ddb79f9970574e5","name":"rest_response","source":"6ddb79f9970574e5.yaml","type":"application/yaml","size":628},{"uid":"77f8c0bf90c3bdec","name":"stage_yaml","source":"77f8c0bf90c3bdec.yaml","type":"application/yaml","size":684},{"uid":"ca5f3803424c36f6","name":"rest_request","source":"ca5f3803424c36f6.yaml","type":"application/yaml","size":161},{"uid":"8147de4a6180937f","name":"rest_response","source":"8147de4a6180937f.yaml","type":"application/yaml","size":628},{"uid":"95d2a3ce6d2f08aa","name":"stage_yaml","source":"95d2a3ce6d2f08aa.yaml","type":"application/yaml","size":684},{"uid":"e34324b6681b551a","name":"rest_request","source":"e34324b6681b551a.yaml","type":"application/yaml","size":161},{"uid":"42530046bcdf86ed","name":"rest_response","source":"42530046bcdf86ed.yaml","type":"application/yaml","size":628},{"uid":"49b57de4f80eb9fe","name":"stage_yaml","source":"49b57de4f80eb9fe.yaml","type":"application/yaml","size":684},{"uid":"7245181d120950ab","name":"rest_request","source":"7245181d120950ab.yaml","type":"application/yaml","size":161},{"uid":"75afac20ec0874d9","name":"rest_response","source":"75afac20ec0874d9.yaml","type":"application/yaml","size":628},{"uid":"538102ab6d2aec86","name":"stage_yaml","source":"538102ab6d2aec86.yaml","type":"application/yaml","size":684},{"uid":"c09667ba840a244","name":"rest_request","source":"c09667ba840a244.yaml","type":"application/yaml","size":161},{"uid":"d75d60673f1a40f8","name":"rest_response","source":"d75d60673f1a40f8.yaml","type":"application/yaml","size":628},{"uid":"2df1b50d2eab4769","name":"stage_yaml","source":"2df1b50d2eab4769.yaml","type":"application/yaml","size":684},{"uid":"43de5fb7f7389924","name":"rest_request","source":"43de5fb7f7389924.yaml","type":"application/yaml","size":161},{"uid":"178111b55895422c","name":"rest_response","source":"178111b55895422c.yaml","type":"application/yaml","size":628},{"uid":"ece1e8e4580fefbd","name":"stage_yaml","source":"ece1e8e4580fefbd.yaml","type":"application/yaml","size":684},{"uid":"ed7cd9cdbc836b9a","name":"rest_request","source":"ed7cd9cdbc836b9a.yaml","type":"application/yaml","size":161},{"uid":"657a8b05e0931c65","name":"rest_response","source":"657a8b05e0931c65.yaml","type":"application/yaml","size":628},{"uid":"d4192aa4bcf5e64c","name":"stage_yaml","source":"d4192aa4bcf5e64c.yaml","type":"application/yaml","size":684},{"uid":"15c5ff5e7b5d9d8a","name":"rest_request","source":"15c5ff5e7b5d9d8a.yaml","type":"application/yaml","size":161},{"uid":"eeb51a3ed1a98656","name":"rest_response","source":"eeb51a3ed1a98656.yaml","type":"application/yaml","size":628},{"uid":"b375c5794684c337","name":"stage_yaml","source":"b375c5794684c337.yaml","type":"application/yaml","size":684},{"uid":"b7fe0b9dfa137a5c","name":"rest_request","source":"b7fe0b9dfa137a5c.yaml","type":"application/yaml","size":161},{"uid":"9c82c73c5641864","name":"rest_response","source":"9c82c73c5641864.yaml","type":"application/yaml","size":628},{"uid":"e9f42977c79ed881","name":"stage_yaml","source":"e9f42977c79ed881.yaml","type":"application/yaml","size":684},{"uid":"da8b7dc56132820e","name":"rest_request","source":"da8b7dc56132820e.yaml","type":"application/yaml","size":161},{"uid":"94d1be26b4e59f62","name":"rest_response","source":"94d1be26b4e59f62.yaml","type":"application/yaml","size":628},{"uid":"36d36156c5bbcf80","name":"stage_yaml","source":"36d36156c5bbcf80.yaml","type":"application/yaml","size":684},{"uid":"6fc4ee137358213","name":"rest_request","source":"6fc4ee137358213.yaml","type":"application/yaml","size":161},{"uid":"21a614ac5590e9b1","name":"rest_response","source":"21a614ac5590e9b1.yaml","type":"application/yaml","size":628},{"uid":"958fecd669dfcaea","name":"stage_yaml","source":"958fecd669dfcaea.yaml","type":"application/yaml","size":684},{"uid":"df20d91b44d19ae","name":"rest_request","source":"df20d91b44d19ae.yaml","type":"application/yaml","size":161},{"uid":"d39388577fef6d41","name":"rest_response","source":"d39388577fef6d41.yaml","type":"application/yaml","size":628},{"uid":"973527b34cce44b8","name":"stage_yaml","source":"973527b34cce44b8.yaml","type":"application/yaml","size":684},{"uid":"ce0c7c52eb95ed37","name":"rest_request","source":"ce0c7c52eb95ed37.yaml","type":"application/yaml","size":161},{"uid":"7582d06013921d5","name":"rest_response","source":"7582d06013921d5.yaml","type":"application/yaml","size":628},{"uid":"e371191b5437e42c","name":"stage_yaml","source":"e371191b5437e42c.yaml","type":"application/yaml","size":684},{"uid":"edbd988898b453c","name":"rest_request","source":"edbd988898b453c.yaml","type":"application/yaml","size":161},{"uid":"67454f3a9ba3ee8d","name":"rest_response","source":"67454f3a9ba3ee8d.yaml","type":"application/yaml","size":628},{"uid":"491092d5d84bfe91","name":"stage_yaml","source":"491092d5d84bfe91.yaml","type":"application/yaml","size":684},{"uid":"eb029873e86768ec","name":"rest_request","source":"eb029873e86768ec.yaml","type":"application/yaml","size":161},{"uid":"5da11851ab7f4ddd","name":"rest_response","source":"5da11851ab7f4ddd.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1676399582237,"stop":1676399582252,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"753fdbb025521691","name":"stage_yaml","source":"753fdbb025521691.yaml","type":"application/yaml","size":2504},{"uid":"9e24f2579a249083","name":"rest_request","source":"9e24f2579a249083.yaml","type":"application/yaml","size":161},{"uid":"9bdf823315c43d09","name":"rest_response","source":"9bdf823315c43d09.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1676399582253,"stop":1676399582264,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"3000e72d7458b104","name":"stage_yaml","source":"3000e72d7458b104.yaml","type":"application/yaml","size":1806},{"uid":"80b18634ad47773d","name":"rest_request","source":"80b18634ad47773d.yaml","type":"application/yaml","size":163},{"uid":"61a58e7e7a91024","name":"rest_response","source":"61a58e7e7a91024.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"10a3347754d2c9b3","name":"log","source":"10a3347754d2c9b3.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"dcf6f0306906"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":7,"unknown":0,"total":10},"items":[{"uid":"686bc8c6ae3cf7cf","status":"passed","time":{"start":1676324290437,"stop":1676324308063,"duration":17626}},{"uid":"bacab20c1e514b64","status":"passed","time":{"start":1674515117838,"stop":1674515135440,"duration":17602}},{"uid":"cc9fe7fcfc685a13","status":"passed","time":{"start":1674505180537,"stop":1674505198356,"duration":17819}},{"uid":"6fb764d586a0e14","status":"passed","time":{"start":1674499977432,"stop":1674500025694,"duration":48262}},{"uid":"a0f038c91214aee7","status":"passed","time":{"start":1674257354500,"stop":1674257402777,"duration":48277}},{"uid":"bbfabe38b46339e6","status":"passed","time":{"start":1674254706103,"stop":1674254723731,"duration":17628}},{"uid":"318472f36b61d0f3","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0feda3bc10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080272630,"stop":1674080274031,"duration":1401}},{"uid":"a7f015ba074dc5e1","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674075004783,"stop":1674075005092,"duration":309}},{"uid":"518fd334076fbc0b","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074622168,"stop":1674074622447,"duration":279}}]},"tags":[]},"source":"7191dc41182dc671.json","parameterValues":[]}