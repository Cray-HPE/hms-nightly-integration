{"uid":"7e260b1746cb55df","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1678226554113,"stop":1678226571752,"duration":17639},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1678226554330,"stop":1678226554369,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"3f9c85d2c6954b7d","name":"stage_yaml","source":"3f9c85d2c6954b7d.yaml","type":"application/yaml","size":315},{"uid":"b028311d0acedc90","name":"rest_request","source":"b028311d0acedc90.yaml","type":"application/yaml","size":162},{"uid":"95449681c893c53","name":"rest_response","source":"95449681c893c53.yaml","type":"application/yaml","size":5774}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1678226554370,"stop":1678226554384,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"7cbca41ccd86ac2e","name":"stage_yaml","source":"7cbca41ccd86ac2e.yaml","type":"application/yaml","size":775},{"uid":"6f82da990df45826","name":"rest_request","source":"6f82da990df45826.yaml","type":"application/yaml","size":211},{"uid":"6270d8a8e56fa491","name":"rest_response","source":"6270d8a8e56fa491.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1678226554385,"stop":1678226555400,"duration":1015},"status":"passed","steps":[],"attachments":[{"uid":"910b3ce07ca4a2bf","name":"stage_yaml","source":"910b3ce07ca4a2bf.yaml","type":"application/yaml","size":661},{"uid":"dc36b39147f4e9ee","name":"rest_request","source":"dc36b39147f4e9ee.yaml","type":"application/yaml","size":161},{"uid":"2cb5d04b545128d5","name":"rest_response","source":"2cb5d04b545128d5.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1678226555401,"stop":1678226555418,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"39090f12318647f","name":"stage_yaml","source":"39090f12318647f.yaml","type":"application/yaml","size":2375},{"uid":"e23c42e192bca43b","name":"rest_request","source":"e23c42e192bca43b.yaml","type":"application/yaml","size":161},{"uid":"22cb172da87f2729","name":"rest_response","source":"22cb172da87f2729.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1678226555419,"stop":1678226555431,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"dddb8332dda6eeb3","name":"stage_yaml","source":"dddb8332dda6eeb3.yaml","type":"application/yaml","size":976},{"uid":"8828be4ba696770","name":"rest_request","source":"8828be4ba696770.yaml","type":"application/yaml","size":145},{"uid":"d94ff09531b1f90","name":"rest_response","source":"d94ff09531b1f90.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1678226555432,"stop":1678226555444,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"1b2df9b20edf636","name":"stage_yaml","source":"1b2df9b20edf636.yaml","type":"application/yaml","size":1827},{"uid":"3380206023b3f23d","name":"rest_request","source":"3380206023b3f23d.yaml","type":"application/yaml","size":161},{"uid":"2adddf5de8f2178c","name":"rest_response","source":"2adddf5de8f2178c.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1678226555445,"stop":1678226555457,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"e5cb54f1e652518","name":"stage_yaml","source":"e5cb54f1e652518.yaml","type":"application/yaml","size":786},{"uid":"9f0f4213730946d4","name":"rest_request","source":"9f0f4213730946d4.yaml","type":"application/yaml","size":216},{"uid":"91e1f2c6b3e61cf8","name":"rest_response","source":"91e1f2c6b3e61cf8.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1678226555459,"stop":1678226571718,"duration":16259},"status":"passed","steps":[],"attachments":[{"uid":"bcae71deaa6a7c48","name":"stage_yaml","source":"bcae71deaa6a7c48.yaml","type":"application/yaml","size":684},{"uid":"e9e16d30c07b25f2","name":"rest_request","source":"e9e16d30c07b25f2.yaml","type":"application/yaml","size":161},{"uid":"b25c602de42fb70","name":"rest_response","source":"b25c602de42fb70.yaml","type":"application/yaml","size":628},{"uid":"130d5275d176dfea","name":"stage_yaml","source":"130d5275d176dfea.yaml","type":"application/yaml","size":684},{"uid":"d10344e2f5efb816","name":"rest_request","source":"d10344e2f5efb816.yaml","type":"application/yaml","size":161},{"uid":"6e1db48156b31919","name":"rest_response","source":"6e1db48156b31919.yaml","type":"application/yaml","size":628},{"uid":"7f45311a84f99a21","name":"stage_yaml","source":"7f45311a84f99a21.yaml","type":"application/yaml","size":684},{"uid":"c9b2396b96f57ab4","name":"rest_request","source":"c9b2396b96f57ab4.yaml","type":"application/yaml","size":161},{"uid":"bdada112d5d8c729","name":"rest_response","source":"bdada112d5d8c729.yaml","type":"application/yaml","size":628},{"uid":"6bf9b01e2380fce1","name":"stage_yaml","source":"6bf9b01e2380fce1.yaml","type":"application/yaml","size":684},{"uid":"9c67c705d91ea084","name":"rest_request","source":"9c67c705d91ea084.yaml","type":"application/yaml","size":161},{"uid":"9c359cf84e425ac2","name":"rest_response","source":"9c359cf84e425ac2.yaml","type":"application/yaml","size":628},{"uid":"9965927692ee3a02","name":"stage_yaml","source":"9965927692ee3a02.yaml","type":"application/yaml","size":684},{"uid":"cb5b458e42db02ac","name":"rest_request","source":"cb5b458e42db02ac.yaml","type":"application/yaml","size":161},{"uid":"89a5ca8eee620ac4","name":"rest_response","source":"89a5ca8eee620ac4.yaml","type":"application/yaml","size":628},{"uid":"764890bbbbee6240","name":"stage_yaml","source":"764890bbbbee6240.yaml","type":"application/yaml","size":684},{"uid":"9024ba40b1427778","name":"rest_request","source":"9024ba40b1427778.yaml","type":"application/yaml","size":161},{"uid":"2e0f8f52942add13","name":"rest_response","source":"2e0f8f52942add13.yaml","type":"application/yaml","size":628},{"uid":"b56c127c9f578748","name":"stage_yaml","source":"b56c127c9f578748.yaml","type":"application/yaml","size":684},{"uid":"885f0b1f28efeb35","name":"rest_request","source":"885f0b1f28efeb35.yaml","type":"application/yaml","size":161},{"uid":"2e7f1732800c1f0a","name":"rest_response","source":"2e7f1732800c1f0a.yaml","type":"application/yaml","size":628},{"uid":"6dce96de9d944347","name":"stage_yaml","source":"6dce96de9d944347.yaml","type":"application/yaml","size":684},{"uid":"bfd23f4964f60db8","name":"rest_request","source":"bfd23f4964f60db8.yaml","type":"application/yaml","size":161},{"uid":"1b177043488367c7","name":"rest_response","source":"1b177043488367c7.yaml","type":"application/yaml","size":628},{"uid":"6a9f5280af61aa5","name":"stage_yaml","source":"6a9f5280af61aa5.yaml","type":"application/yaml","size":684},{"uid":"85ed02b0680971f1","name":"rest_request","source":"85ed02b0680971f1.yaml","type":"application/yaml","size":161},{"uid":"127f0f9b37efb39c","name":"rest_response","source":"127f0f9b37efb39c.yaml","type":"application/yaml","size":628},{"uid":"9b1fe234a29f6d6c","name":"stage_yaml","source":"9b1fe234a29f6d6c.yaml","type":"application/yaml","size":684},{"uid":"a47fb37e38a1a083","name":"rest_request","source":"a47fb37e38a1a083.yaml","type":"application/yaml","size":161},{"uid":"a505b433c0a3e1e7","name":"rest_response","source":"a505b433c0a3e1e7.yaml","type":"application/yaml","size":628},{"uid":"ad646a55a16fe73d","name":"stage_yaml","source":"ad646a55a16fe73d.yaml","type":"application/yaml","size":684},{"uid":"b0635b9e1de90fc6","name":"rest_request","source":"b0635b9e1de90fc6.yaml","type":"application/yaml","size":161},{"uid":"b30868e6a8b5ea8e","name":"rest_response","source":"b30868e6a8b5ea8e.yaml","type":"application/yaml","size":628},{"uid":"c205e0603ae3f996","name":"stage_yaml","source":"c205e0603ae3f996.yaml","type":"application/yaml","size":684},{"uid":"254739385a97936d","name":"rest_request","source":"254739385a97936d.yaml","type":"application/yaml","size":161},{"uid":"4656c41714144d96","name":"rest_response","source":"4656c41714144d96.yaml","type":"application/yaml","size":628},{"uid":"5ccfaa28d7d7661a","name":"stage_yaml","source":"5ccfaa28d7d7661a.yaml","type":"application/yaml","size":684},{"uid":"e31859ea8e6f803b","name":"rest_request","source":"e31859ea8e6f803b.yaml","type":"application/yaml","size":161},{"uid":"3b9a1002aacbe709","name":"rest_response","source":"3b9a1002aacbe709.yaml","type":"application/yaml","size":628},{"uid":"a98b7fb485a05291","name":"stage_yaml","source":"a98b7fb485a05291.yaml","type":"application/yaml","size":684},{"uid":"155405dca81f0cb6","name":"rest_request","source":"155405dca81f0cb6.yaml","type":"application/yaml","size":161},{"uid":"db92eefe347725c6","name":"rest_response","source":"db92eefe347725c6.yaml","type":"application/yaml","size":628},{"uid":"ea85d8712ba4dc64","name":"stage_yaml","source":"ea85d8712ba4dc64.yaml","type":"application/yaml","size":684},{"uid":"22fbed9589f30d2","name":"rest_request","source":"22fbed9589f30d2.yaml","type":"application/yaml","size":161},{"uid":"644c5884561eb6dd","name":"rest_response","source":"644c5884561eb6dd.yaml","type":"application/yaml","size":628},{"uid":"58ecadffdf32dfaf","name":"stage_yaml","source":"58ecadffdf32dfaf.yaml","type":"application/yaml","size":684},{"uid":"85c7990609515262","name":"rest_request","source":"85c7990609515262.yaml","type":"application/yaml","size":161},{"uid":"78887039c2989329","name":"rest_response","source":"78887039c2989329.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1678226571719,"stop":1678226571738,"duration":19},"status":"passed","steps":[],"attachments":[{"uid":"56dc6bcc809eab8f","name":"stage_yaml","source":"56dc6bcc809eab8f.yaml","type":"application/yaml","size":2504},{"uid":"366c9cd1836d5e23","name":"rest_request","source":"366c9cd1836d5e23.yaml","type":"application/yaml","size":161},{"uid":"bfea646c1d359779","name":"rest_response","source":"bfea646c1d359779.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1678226571739,"stop":1678226571751,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"7bfe0f4454d3e660","name":"stage_yaml","source":"7bfe0f4454d3e660.yaml","type":"application/yaml","size":1806},{"uid":"206dda8d027377fc","name":"rest_request","source":"206dda8d027377fc.yaml","type":"application/yaml","size":163},{"uid":"241c93dae31bcefd","name":"rest_response","source":"241c93dae31bcefd.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"c889896b1c6c1531","name":"log","source":"c889896b1c6c1531.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"disruptive"},{"name":"host","value":"22ad509d3223"},{"name":"thread","value":"9-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":11,"unknown":0,"total":14},"items":[{"uid":"a3eaef4e5136a479","status":"passed","time":{"start":1678224632003,"stop":1678224649631,"duration":17628}},{"uid":"66904de45dfa9a57","status":"passed","time":{"start":1678221219533,"stop":1678221238195,"duration":18662}},{"uid":"abeb015464792c6f","status":"passed","time":{"start":1678217530419,"stop":1678217548050,"duration":17631}},{"uid":"89338137c944c42e","status":"passed","time":{"start":1676400263957,"stop":1676400281802,"duration":17845}},{"uid":"8951605628a21f46","status":"passed","time":{"start":1676325065473,"stop":1676325084132,"duration":18659}},{"uid":"5438918df990681e","status":"passed","time":{"start":1674515086279,"stop":1674515134326,"duration":48047}},{"uid":"fac7e4e00cc15b8b","status":"passed","time":{"start":1674505202270,"stop":1674505250360,"duration":48090}},{"uid":"de0d19d04785dcbd","status":"passed","time":{"start":1674499800068,"stop":1674499817700,"duration":17632}},{"uid":"8766c5f622a41bef","status":"passed","time":{"start":1674257325701,"stop":1674257343352,"duration":17651}},{"uid":"f32509b3774010d4","status":"passed","time":{"start":1674254758160,"stop":1674254775944,"duration":17784}},{"uid":"d6207643a1e8533a","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080250825,"stop":1674080252149,"duration":1324}},{"uid":"472f2d42e047cfd9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074977035,"stop":1674074977309,"duration":274}},{"uid":"ebb8ace6a21a76d9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074599644,"stop":1674074599865,"duration":221}}]},"tags":[]},"source":"7e260b1746cb55df.json","parameterValues":[]}