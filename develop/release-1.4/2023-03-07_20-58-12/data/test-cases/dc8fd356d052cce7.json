{"uid":"dc8fd356d052cce7","name":"Verify transitions handles attempts to restart compute nodes that are powered off","fullName":"api.2-disruptive.test_transitions_restart.tavern#Verify transitions handles attempts to restart compute nodes that are powered off","historyId":"56e24dc1bd4f9403cc03a90e86c24062","time":{"start":1678221694015,"stop":1678221711413,"duration":17398},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve a compute node from HSM to be used in later stages","time":{"start":1678221694023,"stop":1678221694059,"duration":36},"status":"passed","steps":[],"attachments":[{"uid":"b1e9b7f152aa331b","name":"stage_yaml","source":"b1e9b7f152aa331b.yaml","type":"application/yaml","size":302},{"uid":"420161d6357f848c","name":"rest_request","source":"420161d6357f848c.yaml","type":"application/yaml","size":162},{"uid":"6b44ccd27ee2721b","name":"rest_response","source":"6b44ccd27ee2721b.yaml","type":"application/yaml","size":5748}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node off to prepare it for the test case","time":{"start":1678221694060,"stop":1678221694072,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"8e8a8bb531d1f18f","name":"stage_yaml","source":"8e8a8bb531d1f18f.yaml","type":"application/yaml","size":797},{"uid":"98ec30a45d2a2e73","name":"rest_request","source":"98ec30a45d2a2e73.yaml","type":"application/yaml","size":216},{"uid":"dfabc4d61bf46ef6","name":"rest_response","source":"dfabc4d61bf46ef6.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the force-off transition operation has completed","time":{"start":1678221694074,"stop":1678221710338,"duration":16264},"status":"passed","steps":[],"attachments":[{"uid":"921823fe8dbe12cf","name":"stage_yaml","source":"921823fe8dbe12cf.yaml","type":"application/yaml","size":682},{"uid":"bddd15cc550a9ac8","name":"rest_request","source":"bddd15cc550a9ac8.yaml","type":"application/yaml","size":161},{"uid":"325b2793230c525b","name":"rest_response","source":"325b2793230c525b.yaml","type":"application/yaml","size":572},{"uid":"84d62d4859033128","name":"stage_yaml","source":"84d62d4859033128.yaml","type":"application/yaml","size":682},{"uid":"66c49d9681870d52","name":"rest_request","source":"66c49d9681870d52.yaml","type":"application/yaml","size":161},{"uid":"852e8992bb32f125","name":"rest_response","source":"852e8992bb32f125.yaml","type":"application/yaml","size":608},{"uid":"8c4503637880ec53","name":"stage_yaml","source":"8c4503637880ec53.yaml","type":"application/yaml","size":682},{"uid":"bc3e0d133e8a98e","name":"rest_request","source":"bc3e0d133e8a98e.yaml","type":"application/yaml","size":161},{"uid":"f251235f49599d1","name":"rest_response","source":"f251235f49599d1.yaml","type":"application/yaml","size":608},{"uid":"58c5d60751ccd7c2","name":"stage_yaml","source":"58c5d60751ccd7c2.yaml","type":"application/yaml","size":682},{"uid":"1cd9029bf96c20d5","name":"rest_request","source":"1cd9029bf96c20d5.yaml","type":"application/yaml","size":161},{"uid":"82a3cf06a596f0af","name":"rest_response","source":"82a3cf06a596f0af.yaml","type":"application/yaml","size":608},{"uid":"819b94a4166e7864","name":"stage_yaml","source":"819b94a4166e7864.yaml","type":"application/yaml","size":682},{"uid":"7f91726ee1027f90","name":"rest_request","source":"7f91726ee1027f90.yaml","type":"application/yaml","size":161},{"uid":"e8c9753bb75b3bc7","name":"rest_response","source":"e8c9753bb75b3bc7.yaml","type":"application/yaml","size":608},{"uid":"688060c5c8d760a0","name":"stage_yaml","source":"688060c5c8d760a0.yaml","type":"application/yaml","size":682},{"uid":"a98797e93fea5421","name":"rest_request","source":"a98797e93fea5421.yaml","type":"application/yaml","size":161},{"uid":"7fdfbefd058d58f8","name":"rest_response","source":"7fdfbefd058d58f8.yaml","type":"application/yaml","size":608},{"uid":"43b16c6557247bb2","name":"stage_yaml","source":"43b16c6557247bb2.yaml","type":"application/yaml","size":682},{"uid":"40904b593f7cd13","name":"rest_request","source":"40904b593f7cd13.yaml","type":"application/yaml","size":161},{"uid":"390cc6a9596ea1a1","name":"rest_response","source":"390cc6a9596ea1a1.yaml","type":"application/yaml","size":608},{"uid":"79df04b3e26d2842","name":"stage_yaml","source":"79df04b3e26d2842.yaml","type":"application/yaml","size":682},{"uid":"1d440dfcefc727f1","name":"rest_request","source":"1d440dfcefc727f1.yaml","type":"application/yaml","size":161},{"uid":"70fcba5c985229ec","name":"rest_response","source":"70fcba5c985229ec.yaml","type":"application/yaml","size":608},{"uid":"5cd9b0f50b4ef146","name":"stage_yaml","source":"5cd9b0f50b4ef146.yaml","type":"application/yaml","size":682},{"uid":"a94bfd000442f08e","name":"rest_request","source":"a94bfd000442f08e.yaml","type":"application/yaml","size":161},{"uid":"df6af78610f94b4c","name":"rest_response","source":"df6af78610f94b4c.yaml","type":"application/yaml","size":608},{"uid":"5c6274fc6940bd4e","name":"stage_yaml","source":"5c6274fc6940bd4e.yaml","type":"application/yaml","size":682},{"uid":"1307a9cec7e38724","name":"rest_request","source":"1307a9cec7e38724.yaml","type":"application/yaml","size":161},{"uid":"62e9acb75cc63038","name":"rest_response","source":"62e9acb75cc63038.yaml","type":"application/yaml","size":608},{"uid":"bda8e43b6c1467a8","name":"stage_yaml","source":"bda8e43b6c1467a8.yaml","type":"application/yaml","size":682},{"uid":"51721b70297d779f","name":"rest_request","source":"51721b70297d779f.yaml","type":"application/yaml","size":161},{"uid":"47942f609066bb10","name":"rest_response","source":"47942f609066bb10.yaml","type":"application/yaml","size":608},{"uid":"d2c80fb0bbd1300d","name":"stage_yaml","source":"d2c80fb0bbd1300d.yaml","type":"application/yaml","size":682},{"uid":"61d6535bc174a936","name":"rest_request","source":"61d6535bc174a936.yaml","type":"application/yaml","size":161},{"uid":"532d0968a350ed8d","name":"rest_response","source":"532d0968a350ed8d.yaml","type":"application/yaml","size":608},{"uid":"900846f8de80f73d","name":"stage_yaml","source":"900846f8de80f73d.yaml","type":"application/yaml","size":682},{"uid":"dd942b6dd7bfee38","name":"rest_request","source":"dd942b6dd7bfee38.yaml","type":"application/yaml","size":161},{"uid":"211069e1f39aa994","name":"rest_response","source":"211069e1f39aa994.yaml","type":"application/yaml","size":608},{"uid":"8add86bba71b4bcb","name":"stage_yaml","source":"8add86bba71b4bcb.yaml","type":"application/yaml","size":682},{"uid":"8ae3cfde67ce98ce","name":"rest_request","source":"8ae3cfde67ce98ce.yaml","type":"application/yaml","size":161},{"uid":"3922f588c798f294","name":"rest_response","source":"3922f588c798f294.yaml","type":"application/yaml","size":608},{"uid":"756aa6a410e97fb1","name":"stage_yaml","source":"756aa6a410e97fb1.yaml","type":"application/yaml","size":682},{"uid":"dab5efbd2019282","name":"rest_request","source":"dab5efbd2019282.yaml","type":"application/yaml","size":161},{"uid":"3617bc3f5b7addd5","name":"rest_response","source":"3617bc3f5b7addd5.yaml","type":"application/yaml","size":608},{"uid":"cdc238257db8b7b","name":"stage_yaml","source":"cdc238257db8b7b.yaml","type":"application/yaml","size":682},{"uid":"d17d34f5c3419d42","name":"rest_request","source":"d17d34f5c3419d42.yaml","type":"application/yaml","size":161},{"uid":"79a85628f5b3a145","name":"rest_response","source":"79a85628f5b3a145.yaml","type":"application/yaml","size":592}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed force-off transition data","time":{"start":1678221710339,"stop":1678221710355,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"24ac926ad74ad530","name":"stage_yaml","source":"24ac926ad74ad530.yaml","type":"application/yaml","size":2395},{"uid":"fd6130e9ecd8a343","name":"rest_request","source":"fd6130e9ecd8a343.yaml","type":"application/yaml","size":161},{"uid":"d6ceaa9f6131fda0","name":"rest_response","source":"d6ceaa9f6131fda0.yaml","type":"application/yaml","size":592}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered off using power-status","time":{"start":1678221710356,"stop":1678221710367,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"677e6fcd2c326e27","name":"stage_yaml","source":"677e6fcd2c326e27.yaml","type":"application/yaml","size":978},{"uid":"9025adf9f2033274","name":"rest_request","source":"9025adf9f2033274.yaml","type":"application/yaml","size":145},{"uid":"274832ec90f6d184","name":"rest_response","source":"274832ec90f6d184.yaml","type":"application/yaml","size":439}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Attempt to restart the target node with a hard-restart transition","time":{"start":1678221710368,"stop":1678221710380,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"77fe89fdaea87702","name":"stage_yaml","source":"77fe89fdaea87702.yaml","type":"application/yaml","size":816},{"uid":"d053d74e561a35a4","name":"rest_request","source":"d053d74e561a35a4.yaml","type":"application/yaml","size":219},{"uid":"cb129bdc813c38fe","name":"rest_response","source":"cb129bdc813c38fe.yaml","type":"application/yaml","size":295}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Poll until the hard-restart transition operation has completed","time":{"start":1678221710383,"stop":1678221711395,"duration":1012},"status":"passed","steps":[],"attachments":[{"uid":"998225772a227b50","name":"stage_yaml","source":"998225772a227b50.yaml","type":"application/yaml","size":693},{"uid":"5d2b9941ef33ba75","name":"rest_request","source":"5d2b9941ef33ba75.yaml","type":"application/yaml","size":161},{"uid":"55e08840237a7931","name":"rest_response","source":"55e08840237a7931.yaml","type":"application/yaml","size":661}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Retrieve the completed hard-restart transition data","time":{"start":1678221711396,"stop":1678221711413,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"58fd508e34e04f54","name":"stage_yaml","source":"58fd508e34e04f54.yaml","type":"application/yaml","size":2549},{"uid":"32431a20e925afe0","name":"rest_request","source":"32431a20e925afe0.yaml","type":"application/yaml","size":161},{"uid":"783cb67d8f137864","name":"rest_response","source":"783cb67d8f137864.yaml","type":"application/yaml","size":661}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"23b346c604678535","name":"log","source":"23b346c604678535.txt","type":"text/plain","size":57878}],"parameters":[],"stepsCount":8,"attachmentsCount":70,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"2676eb90a0c9"},{"name":"thread","value":"9-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_restart.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":9,"unknown":0,"total":12},"items":[{"uid":"490eb662446c55b7","status":"passed","time":{"start":1678218003870,"stop":1678218037523,"duration":33653}},{"uid":"6d291a0e4ef384a2","status":"passed","time":{"start":1676400847279,"stop":1676400880180,"duration":32901}},{"uid":"487cfda790237fd9","status":"passed","time":{"start":1676325617086,"stop":1676325650758,"duration":33672}},{"uid":"e2bf4ff70f030fbd","status":"passed","time":{"start":1674515574170,"stop":1674515576315,"duration":2145}},{"uid":"ac2c2c43995e5b5d","status":"passed","time":{"start":1674505690917,"stop":1674505723638,"duration":32721}},{"uid":"e465f9b1ebf7fc5f","status":"passed","time":{"start":1674500319095,"stop":1674500351749,"duration":32654}},{"uid":"f3f1f42e434c66e6","status":"passed","time":{"start":1674257814137,"stop":1674257846813,"duration":32676}},{"uid":"89f3a5ffdf236413","status":"passed","time":{"start":1674255264575,"stop":1674255297412,"duration":32837}},{"uid":"8d8f1724188849cb","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Power the target node off to prepare it for the test case' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080262851,"stop":1674080262890,"duration":39}},{"uid":"63766b707ffc90e1","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_force-off_task_deadline_minutes","time":{"start":1674074977989,"stop":1674074978018,"duration":29}},{"uid":"ef814c26c444c457","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_force-off_task_deadline_minutes","time":{"start":1674074600425,"stop":1674074600449,"duration":24}}]},"tags":[]},"source":"dc8fd356d052cce7.json","parameterValues":[]}