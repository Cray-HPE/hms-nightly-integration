{"uid":"66904de45dfa9a57","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1678221219533,"stop":1678221238195,"duration":18662},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1678221219746,"stop":1678221219786,"duration":40},"status":"passed","steps":[],"attachments":[{"uid":"d9fbc08771f268b9","name":"stage_yaml","source":"d9fbc08771f268b9.yaml","type":"application/yaml","size":315},{"uid":"e37f899e3069a1d8","name":"rest_request","source":"e37f899e3069a1d8.yaml","type":"application/yaml","size":162},{"uid":"4fd58044e12f1b02","name":"rest_response","source":"4fd58044e12f1b02.yaml","type":"application/yaml","size":5744}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1678221219787,"stop":1678221219804,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"8f7362c28f15a627","name":"stage_yaml","source":"8f7362c28f15a627.yaml","type":"application/yaml","size":775},{"uid":"b607dc61d796a923","name":"rest_request","source":"b607dc61d796a923.yaml","type":"application/yaml","size":211},{"uid":"79b2ef43bb3fb394","name":"rest_response","source":"79b2ef43bb3fb394.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1678221219806,"stop":1678221221838,"duration":2032},"status":"passed","steps":[],"attachments":[{"uid":"32ccbf93147e8b7e","name":"stage_yaml","source":"32ccbf93147e8b7e.yaml","type":"application/yaml","size":661},{"uid":"17c729559274e652","name":"rest_request","source":"17c729559274e652.yaml","type":"application/yaml","size":161},{"uid":"c1a6c3ed7bc1459c","name":"rest_response","source":"c1a6c3ed7bc1459c.yaml","type":"application/yaml","size":567},{"uid":"57115644f610235","name":"stage_yaml","source":"57115644f610235.yaml","type":"application/yaml","size":661},{"uid":"14041c36044e930d","name":"rest_request","source":"14041c36044e930d.yaml","type":"application/yaml","size":161},{"uid":"3924b67a213ba18a","name":"rest_response","source":"3924b67a213ba18a.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":6,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1678221221839,"stop":1678221221856,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"572ead2748560424","name":"stage_yaml","source":"572ead2748560424.yaml","type":"application/yaml","size":2375},{"uid":"dc5d878bf59c78ad","name":"rest_request","source":"dc5d878bf59c78ad.yaml","type":"application/yaml","size":161},{"uid":"464819d818ad8e62","name":"rest_response","source":"464819d818ad8e62.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1678221221857,"stop":1678221221869,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"66fcebdaffe5a35d","name":"stage_yaml","source":"66fcebdaffe5a35d.yaml","type":"application/yaml","size":976},{"uid":"99a270e0c7e0de06","name":"rest_request","source":"99a270e0c7e0de06.yaml","type":"application/yaml","size":145},{"uid":"bc89a40ce5901c14","name":"rest_response","source":"bc89a40ce5901c14.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1678221221870,"stop":1678221221882,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"b109987f6d95ca76","name":"stage_yaml","source":"b109987f6d95ca76.yaml","type":"application/yaml","size":1827},{"uid":"dbec7afeb38c41f2","name":"rest_request","source":"dbec7afeb38c41f2.yaml","type":"application/yaml","size":161},{"uid":"d8779edbfa0e4358","name":"rest_response","source":"d8779edbfa0e4358.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1678221221883,"stop":1678221221895,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"8bb570a5cf9d838e","name":"stage_yaml","source":"8bb570a5cf9d838e.yaml","type":"application/yaml","size":786},{"uid":"71bd88efce44793b","name":"rest_request","source":"71bd88efce44793b.yaml","type":"application/yaml","size":216},{"uid":"a24832d8ac80fd06","name":"rest_response","source":"a24832d8ac80fd06.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1678221221897,"stop":1678221238164,"duration":16267},"status":"passed","steps":[],"attachments":[{"uid":"5aefbc9db75511c3","name":"stage_yaml","source":"5aefbc9db75511c3.yaml","type":"application/yaml","size":684},{"uid":"72874cbe095c9c14","name":"rest_request","source":"72874cbe095c9c14.yaml","type":"application/yaml","size":161},{"uid":"740c581f76372cf7","name":"rest_response","source":"740c581f76372cf7.yaml","type":"application/yaml","size":628},{"uid":"c2f6052cfc4c3217","name":"stage_yaml","source":"c2f6052cfc4c3217.yaml","type":"application/yaml","size":684},{"uid":"f0da57a39fce15b3","name":"rest_request","source":"f0da57a39fce15b3.yaml","type":"application/yaml","size":161},{"uid":"56c3a66fa976fe84","name":"rest_response","source":"56c3a66fa976fe84.yaml","type":"application/yaml","size":628},{"uid":"9e9c68df0724660d","name":"stage_yaml","source":"9e9c68df0724660d.yaml","type":"application/yaml","size":684},{"uid":"e0ebc62342dc67fb","name":"rest_request","source":"e0ebc62342dc67fb.yaml","type":"application/yaml","size":161},{"uid":"9c2a89173d0b1392","name":"rest_response","source":"9c2a89173d0b1392.yaml","type":"application/yaml","size":628},{"uid":"39d58b0c58ded929","name":"stage_yaml","source":"39d58b0c58ded929.yaml","type":"application/yaml","size":684},{"uid":"d1e9614ccc424ba9","name":"rest_request","source":"d1e9614ccc424ba9.yaml","type":"application/yaml","size":161},{"uid":"ae6da51a607e3524","name":"rest_response","source":"ae6da51a607e3524.yaml","type":"application/yaml","size":628},{"uid":"b155e58ecd2d97b5","name":"stage_yaml","source":"b155e58ecd2d97b5.yaml","type":"application/yaml","size":684},{"uid":"70043454e85ac637","name":"rest_request","source":"70043454e85ac637.yaml","type":"application/yaml","size":161},{"uid":"e31cd49e74a30f96","name":"rest_response","source":"e31cd49e74a30f96.yaml","type":"application/yaml","size":628},{"uid":"82f5a55d1bcc9083","name":"stage_yaml","source":"82f5a55d1bcc9083.yaml","type":"application/yaml","size":684},{"uid":"7d7846a7613d8e46","name":"rest_request","source":"7d7846a7613d8e46.yaml","type":"application/yaml","size":161},{"uid":"61f113ceb6c94342","name":"rest_response","source":"61f113ceb6c94342.yaml","type":"application/yaml","size":628},{"uid":"5064d3da2285f718","name":"stage_yaml","source":"5064d3da2285f718.yaml","type":"application/yaml","size":684},{"uid":"4acc205dbc6bc843","name":"rest_request","source":"4acc205dbc6bc843.yaml","type":"application/yaml","size":161},{"uid":"d242488c25732928","name":"rest_response","source":"d242488c25732928.yaml","type":"application/yaml","size":628},{"uid":"22f5b72add1d1d6d","name":"stage_yaml","source":"22f5b72add1d1d6d.yaml","type":"application/yaml","size":684},{"uid":"692d958506ecf127","name":"rest_request","source":"692d958506ecf127.yaml","type":"application/yaml","size":161},{"uid":"3394aa1e134395e","name":"rest_response","source":"3394aa1e134395e.yaml","type":"application/yaml","size":628},{"uid":"cb7d541ac8228b3c","name":"stage_yaml","source":"cb7d541ac8228b3c.yaml","type":"application/yaml","size":684},{"uid":"adf8a9fed4bb51ff","name":"rest_request","source":"adf8a9fed4bb51ff.yaml","type":"application/yaml","size":161},{"uid":"2a597bccc9f1c70d","name":"rest_response","source":"2a597bccc9f1c70d.yaml","type":"application/yaml","size":628},{"uid":"bdf376646d45c916","name":"stage_yaml","source":"bdf376646d45c916.yaml","type":"application/yaml","size":684},{"uid":"9bd69cce64dc53ba","name":"rest_request","source":"9bd69cce64dc53ba.yaml","type":"application/yaml","size":161},{"uid":"c6899ebccb2fa33e","name":"rest_response","source":"c6899ebccb2fa33e.yaml","type":"application/yaml","size":628},{"uid":"255c927ea877bb08","name":"stage_yaml","source":"255c927ea877bb08.yaml","type":"application/yaml","size":684},{"uid":"13831a254e234aac","name":"rest_request","source":"13831a254e234aac.yaml","type":"application/yaml","size":161},{"uid":"e2be44f7e7cd727","name":"rest_response","source":"e2be44f7e7cd727.yaml","type":"application/yaml","size":628},{"uid":"fefe4de8b3ea277d","name":"stage_yaml","source":"fefe4de8b3ea277d.yaml","type":"application/yaml","size":684},{"uid":"f6949b89a07126dd","name":"rest_request","source":"f6949b89a07126dd.yaml","type":"application/yaml","size":161},{"uid":"24e34b4dc9637e1f","name":"rest_response","source":"24e34b4dc9637e1f.yaml","type":"application/yaml","size":628},{"uid":"4b8286f29d6eed29","name":"stage_yaml","source":"4b8286f29d6eed29.yaml","type":"application/yaml","size":684},{"uid":"6e44bc768be41a7","name":"rest_request","source":"6e44bc768be41a7.yaml","type":"application/yaml","size":161},{"uid":"ff69f5de977974b5","name":"rest_response","source":"ff69f5de977974b5.yaml","type":"application/yaml","size":628},{"uid":"54ee41b583511eef","name":"stage_yaml","source":"54ee41b583511eef.yaml","type":"application/yaml","size":684},{"uid":"a602f39c8583bcf","name":"rest_request","source":"a602f39c8583bcf.yaml","type":"application/yaml","size":161},{"uid":"baa8742dff5b607c","name":"rest_response","source":"baa8742dff5b607c.yaml","type":"application/yaml","size":628},{"uid":"47e5cf7c90d3993e","name":"stage_yaml","source":"47e5cf7c90d3993e.yaml","type":"application/yaml","size":684},{"uid":"4506ca3c7bd80298","name":"rest_request","source":"4506ca3c7bd80298.yaml","type":"application/yaml","size":161},{"uid":"418e8d1cb1c87bb2","name":"rest_response","source":"418e8d1cb1c87bb2.yaml","type":"application/yaml","size":628},{"uid":"35a454ca581184c2","name":"stage_yaml","source":"35a454ca581184c2.yaml","type":"application/yaml","size":684},{"uid":"83cb16a3d6a9aaae","name":"rest_request","source":"83cb16a3d6a9aaae.yaml","type":"application/yaml","size":161},{"uid":"27bb05a5b0c1488e","name":"rest_response","source":"27bb05a5b0c1488e.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1678221238166,"stop":1678221238181,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"a13baf9e1cd4960d","name":"stage_yaml","source":"a13baf9e1cd4960d.yaml","type":"application/yaml","size":2504},{"uid":"36d31cda20da346e","name":"rest_request","source":"36d31cda20da346e.yaml","type":"application/yaml","size":161},{"uid":"4bad3b76244ff1b9","name":"rest_response","source":"4bad3b76244ff1b9.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1678221238182,"stop":1678221238194,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"33dced4503735ed0","name":"stage_yaml","source":"33dced4503735ed0.yaml","type":"application/yaml","size":1806},{"uid":"25966aaddc141c32","name":"rest_request","source":"25966aaddc141c32.yaml","type":"application/yaml","size":163},{"uid":"3a92fa95ec4ae6a","name":"rest_response","source":"3a92fa95ec4ae6a.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"42b968d67ddac034","name":"log","source":"42b968d67ddac034.txt","type":"text/plain","size":62047}],"parameters":[],"stepsCount":10,"attachmentsCount":79,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"2676eb90a0c9"},{"name":"thread","value":"9-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":9,"unknown":0,"total":12},"items":[{"uid":"abeb015464792c6f","status":"passed","time":{"start":1678217530419,"stop":1678217548050,"duration":17631}},{"uid":"89338137c944c42e","status":"passed","time":{"start":1676400263957,"stop":1676400281802,"duration":17845}},{"uid":"8951605628a21f46","status":"passed","time":{"start":1676325065473,"stop":1676325084132,"duration":18659}},{"uid":"5438918df990681e","status":"passed","time":{"start":1674515086279,"stop":1674515134326,"duration":48047}},{"uid":"fac7e4e00cc15b8b","status":"passed","time":{"start":1674505202270,"stop":1674505250360,"duration":48090}},{"uid":"de0d19d04785dcbd","status":"passed","time":{"start":1674499800068,"stop":1674499817700,"duration":17632}},{"uid":"8766c5f622a41bef","status":"passed","time":{"start":1674257325701,"stop":1674257343352,"duration":17651}},{"uid":"f32509b3774010d4","status":"passed","time":{"start":1674254758160,"stop":1674254775944,"duration":17784}},{"uid":"d6207643a1e8533a","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080250825,"stop":1674080252149,"duration":1324}},{"uid":"472f2d42e047cfd9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074977035,"stop":1674074977309,"duration":274}},{"uid":"ebb8ace6a21a76d9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074599644,"stop":1674074599865,"duration":221}}]},"tags":[]},"source":"66904de45dfa9a57.json","parameterValues":[]}