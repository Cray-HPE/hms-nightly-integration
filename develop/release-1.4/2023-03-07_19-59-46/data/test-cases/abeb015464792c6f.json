{"uid":"abeb015464792c6f","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1678217530419,"stop":1678217548050,"duration":17631},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1678217530636,"stop":1678217530674,"duration":38},"status":"passed","steps":[],"attachments":[{"uid":"2d292fbdcb446b2c","name":"stage_yaml","source":"2d292fbdcb446b2c.yaml","type":"application/yaml","size":315},{"uid":"2a73c4a600741594","name":"rest_request","source":"2a73c4a600741594.yaml","type":"application/yaml","size":162},{"uid":"b3b7a09709cc7f08","name":"rest_response","source":"b3b7a09709cc7f08.yaml","type":"application/yaml","size":5744}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1678217530675,"stop":1678217530688,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"a4645b9d9124d19b","name":"stage_yaml","source":"a4645b9d9124d19b.yaml","type":"application/yaml","size":775},{"uid":"ae7b7acdc79510c1","name":"rest_request","source":"ae7b7acdc79510c1.yaml","type":"application/yaml","size":211},{"uid":"adc2397add1dec6e","name":"rest_response","source":"adc2397add1dec6e.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1678217530690,"stop":1678217531703,"duration":1013},"status":"passed","steps":[],"attachments":[{"uid":"35cf14cade92fb59","name":"stage_yaml","source":"35cf14cade92fb59.yaml","type":"application/yaml","size":661},{"uid":"4b770acda5265c94","name":"rest_request","source":"4b770acda5265c94.yaml","type":"application/yaml","size":161},{"uid":"666fab8e3cdb4ecc","name":"rest_response","source":"666fab8e3cdb4ecc.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1678217531704,"stop":1678217531719,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"5ed5178eb63b454b","name":"stage_yaml","source":"5ed5178eb63b454b.yaml","type":"application/yaml","size":2375},{"uid":"93c20c4f1fd043a1","name":"rest_request","source":"93c20c4f1fd043a1.yaml","type":"application/yaml","size":161},{"uid":"a467c19c02c49b29","name":"rest_response","source":"a467c19c02c49b29.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1678217531720,"stop":1678217531731,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"2633d81defd2b546","name":"stage_yaml","source":"2633d81defd2b546.yaml","type":"application/yaml","size":976},{"uid":"4b3cc57b08d70c49","name":"rest_request","source":"4b3cc57b08d70c49.yaml","type":"application/yaml","size":145},{"uid":"2018eaf037e521c","name":"rest_response","source":"2018eaf037e521c.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1678217531732,"stop":1678217531744,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"9c62f53c48bd31a","name":"stage_yaml","source":"9c62f53c48bd31a.yaml","type":"application/yaml","size":1827},{"uid":"c5de31f94874f41e","name":"rest_request","source":"c5de31f94874f41e.yaml","type":"application/yaml","size":161},{"uid":"bfd0b8f8b8d417aa","name":"rest_response","source":"bfd0b8f8b8d417aa.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1678217531745,"stop":1678217531757,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"422bfd1f8efa61a0","name":"stage_yaml","source":"422bfd1f8efa61a0.yaml","type":"application/yaml","size":786},{"uid":"78b7a191d07ada9b","name":"rest_request","source":"78b7a191d07ada9b.yaml","type":"application/yaml","size":216},{"uid":"e66454c9b719ff2a","name":"rest_response","source":"e66454c9b719ff2a.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1678217531760,"stop":1678217548019,"duration":16259},"status":"passed","steps":[],"attachments":[{"uid":"5ab7b1bfd39271a4","name":"stage_yaml","source":"5ab7b1bfd39271a4.yaml","type":"application/yaml","size":684},{"uid":"81ffb77dcc4aba59","name":"rest_request","source":"81ffb77dcc4aba59.yaml","type":"application/yaml","size":161},{"uid":"b461767ccedac504","name":"rest_response","source":"b461767ccedac504.yaml","type":"application/yaml","size":628},{"uid":"7be3366e6c745de4","name":"stage_yaml","source":"7be3366e6c745de4.yaml","type":"application/yaml","size":684},{"uid":"f9328bb4596c69b5","name":"rest_request","source":"f9328bb4596c69b5.yaml","type":"application/yaml","size":161},{"uid":"1977b076226fb52a","name":"rest_response","source":"1977b076226fb52a.yaml","type":"application/yaml","size":628},{"uid":"5004d1316940dcc1","name":"stage_yaml","source":"5004d1316940dcc1.yaml","type":"application/yaml","size":684},{"uid":"49211540c65f783c","name":"rest_request","source":"49211540c65f783c.yaml","type":"application/yaml","size":161},{"uid":"6141ea930e35d4e3","name":"rest_response","source":"6141ea930e35d4e3.yaml","type":"application/yaml","size":628},{"uid":"bfe5a320aa2274ea","name":"stage_yaml","source":"bfe5a320aa2274ea.yaml","type":"application/yaml","size":684},{"uid":"cd9ddcbee7888f43","name":"rest_request","source":"cd9ddcbee7888f43.yaml","type":"application/yaml","size":161},{"uid":"ad882ac0ae2a6cad","name":"rest_response","source":"ad882ac0ae2a6cad.yaml","type":"application/yaml","size":628},{"uid":"dfc011124ecf038f","name":"stage_yaml","source":"dfc011124ecf038f.yaml","type":"application/yaml","size":684},{"uid":"b774aa913fdbf1dc","name":"rest_request","source":"b774aa913fdbf1dc.yaml","type":"application/yaml","size":161},{"uid":"918b5985ff4468d","name":"rest_response","source":"918b5985ff4468d.yaml","type":"application/yaml","size":628},{"uid":"95ae4a6aef91eabc","name":"stage_yaml","source":"95ae4a6aef91eabc.yaml","type":"application/yaml","size":684},{"uid":"3b0b7f49916f275f","name":"rest_request","source":"3b0b7f49916f275f.yaml","type":"application/yaml","size":161},{"uid":"4f784b5de73c094c","name":"rest_response","source":"4f784b5de73c094c.yaml","type":"application/yaml","size":628},{"uid":"b952e6a6496c60a3","name":"stage_yaml","source":"b952e6a6496c60a3.yaml","type":"application/yaml","size":684},{"uid":"f38f01baf431c8d8","name":"rest_request","source":"f38f01baf431c8d8.yaml","type":"application/yaml","size":161},{"uid":"ba7f52ddd72ac763","name":"rest_response","source":"ba7f52ddd72ac763.yaml","type":"application/yaml","size":628},{"uid":"951abaa9a783c83a","name":"stage_yaml","source":"951abaa9a783c83a.yaml","type":"application/yaml","size":684},{"uid":"416b8cc0e406f6aa","name":"rest_request","source":"416b8cc0e406f6aa.yaml","type":"application/yaml","size":161},{"uid":"390135c3836865e7","name":"rest_response","source":"390135c3836865e7.yaml","type":"application/yaml","size":628},{"uid":"8f9a35e1280b575c","name":"stage_yaml","source":"8f9a35e1280b575c.yaml","type":"application/yaml","size":684},{"uid":"b52d0a055890cbf5","name":"rest_request","source":"b52d0a055890cbf5.yaml","type":"application/yaml","size":161},{"uid":"4c80dc867a2a84c0","name":"rest_response","source":"4c80dc867a2a84c0.yaml","type":"application/yaml","size":628},{"uid":"1241cf58dc1830f8","name":"stage_yaml","source":"1241cf58dc1830f8.yaml","type":"application/yaml","size":684},{"uid":"88e8c468630ee703","name":"rest_request","source":"88e8c468630ee703.yaml","type":"application/yaml","size":161},{"uid":"9c45c4feb6febfdf","name":"rest_response","source":"9c45c4feb6febfdf.yaml","type":"application/yaml","size":628},{"uid":"d7be9340caa9d38e","name":"stage_yaml","source":"d7be9340caa9d38e.yaml","type":"application/yaml","size":684},{"uid":"2b2502777dee293a","name":"rest_request","source":"2b2502777dee293a.yaml","type":"application/yaml","size":161},{"uid":"701b6a8eea99be4c","name":"rest_response","source":"701b6a8eea99be4c.yaml","type":"application/yaml","size":628},{"uid":"330e932adfcfea68","name":"stage_yaml","source":"330e932adfcfea68.yaml","type":"application/yaml","size":684},{"uid":"bc1910596458b2e6","name":"rest_request","source":"bc1910596458b2e6.yaml","type":"application/yaml","size":161},{"uid":"efe82551482f8bfa","name":"rest_response","source":"efe82551482f8bfa.yaml","type":"application/yaml","size":628},{"uid":"f86e0c5bcbab1034","name":"stage_yaml","source":"f86e0c5bcbab1034.yaml","type":"application/yaml","size":684},{"uid":"d5dba166741f1312","name":"rest_request","source":"d5dba166741f1312.yaml","type":"application/yaml","size":161},{"uid":"a594d9b0e94e3431","name":"rest_response","source":"a594d9b0e94e3431.yaml","type":"application/yaml","size":628},{"uid":"3e6c5e7d3744d0b","name":"stage_yaml","source":"3e6c5e7d3744d0b.yaml","type":"application/yaml","size":684},{"uid":"dac5cd16e599b871","name":"rest_request","source":"dac5cd16e599b871.yaml","type":"application/yaml","size":161},{"uid":"3c9cf283d59b8e47","name":"rest_response","source":"3c9cf283d59b8e47.yaml","type":"application/yaml","size":628},{"uid":"ddbd34a350b4fd5e","name":"stage_yaml","source":"ddbd34a350b4fd5e.yaml","type":"application/yaml","size":684},{"uid":"d10f953011947c67","name":"rest_request","source":"d10f953011947c67.yaml","type":"application/yaml","size":161},{"uid":"42c3ac1f49f171b9","name":"rest_response","source":"42c3ac1f49f171b9.yaml","type":"application/yaml","size":628},{"uid":"7078aae7f3c3e461","name":"stage_yaml","source":"7078aae7f3c3e461.yaml","type":"application/yaml","size":684},{"uid":"6fa7ddbffc46d253","name":"rest_request","source":"6fa7ddbffc46d253.yaml","type":"application/yaml","size":161},{"uid":"551e9fa2046c6f95","name":"rest_response","source":"551e9fa2046c6f95.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1678217548020,"stop":1678217548037,"duration":17},"status":"passed","steps":[],"attachments":[{"uid":"ae44f3aafb7b86d5","name":"stage_yaml","source":"ae44f3aafb7b86d5.yaml","type":"application/yaml","size":2504},{"uid":"dd24c90fbef54cca","name":"rest_request","source":"dd24c90fbef54cca.yaml","type":"application/yaml","size":161},{"uid":"923fa9ebc016bf3b","name":"rest_response","source":"923fa9ebc016bf3b.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1678217548038,"stop":1678217548050,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"a7b06e006acefe61","name":"stage_yaml","source":"a7b06e006acefe61.yaml","type":"application/yaml","size":1806},{"uid":"76645767cb0a445d","name":"rest_request","source":"76645767cb0a445d.yaml","type":"application/yaml","size":163},{"uid":"e7afc061fdd48b0e","name":"rest_response","source":"e7afc061fdd48b0e.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"9895ddb1370104e5","name":"log","source":"9895ddb1370104e5.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"3b92db619d34"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":8,"unknown":0,"total":11},"items":[{"uid":"89338137c944c42e","status":"passed","time":{"start":1676400263957,"stop":1676400281802,"duration":17845}},{"uid":"8951605628a21f46","status":"passed","time":{"start":1676325065473,"stop":1676325084132,"duration":18659}},{"uid":"5438918df990681e","status":"passed","time":{"start":1674515086279,"stop":1674515134326,"duration":48047}},{"uid":"fac7e4e00cc15b8b","status":"passed","time":{"start":1674505202270,"stop":1674505250360,"duration":48090}},{"uid":"de0d19d04785dcbd","status":"passed","time":{"start":1674499800068,"stop":1674499817700,"duration":17632}},{"uid":"8766c5f622a41bef","status":"passed","time":{"start":1674257325701,"stop":1674257343352,"duration":17651}},{"uid":"f32509b3774010d4","status":"passed","time":{"start":1674254758160,"stop":1674254775944,"duration":17784}},{"uid":"d6207643a1e8533a","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080250825,"stop":1674080252149,"duration":1324}},{"uid":"472f2d42e047cfd9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074977035,"stop":1674074977309,"duration":274}},{"uid":"ebb8ace6a21a76d9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074599644,"stop":1674074599865,"duration":221}}]},"tags":[]},"source":"abeb015464792c6f.json","parameterValues":[]}