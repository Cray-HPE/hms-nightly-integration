{"uid":"89338137c944c42e","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1676400263957,"stop":1676400281802,"duration":17845},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1676400264254,"stop":1676400264314,"duration":60},"status":"passed","steps":[],"attachments":[{"uid":"ccf298aec3f3542b","name":"stage_yaml","source":"ccf298aec3f3542b.yaml","type":"application/yaml","size":315},{"uid":"99eb9b98c4f37240","name":"rest_request","source":"99eb9b98c4f37240.yaml","type":"application/yaml","size":162},{"uid":"af93b5db7985e58","name":"rest_response","source":"af93b5db7985e58.yaml","type":"application/yaml","size":5772}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1676400264315,"stop":1676400264339,"duration":24},"status":"passed","steps":[],"attachments":[{"uid":"3b0f8b3249ff5983","name":"stage_yaml","source":"3b0f8b3249ff5983.yaml","type":"application/yaml","size":775},{"uid":"d71c17bdc1fb2e0","name":"rest_request","source":"d71c17bdc1fb2e0.yaml","type":"application/yaml","size":211},{"uid":"87ebab0db246d4e5","name":"rest_response","source":"87ebab0db246d4e5.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1676400264343,"stop":1676400265366,"duration":1023},"status":"passed","steps":[],"attachments":[{"uid":"11c88d084516d0a5","name":"stage_yaml","source":"11c88d084516d0a5.yaml","type":"application/yaml","size":661},{"uid":"531774fe36105923","name":"rest_request","source":"531774fe36105923.yaml","type":"application/yaml","size":161},{"uid":"e3477372f184bf73","name":"rest_response","source":"e3477372f184bf73.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1676400265368,"stop":1676400265387,"duration":19},"status":"passed","steps":[],"attachments":[{"uid":"9743dd03a1b168b1","name":"stage_yaml","source":"9743dd03a1b168b1.yaml","type":"application/yaml","size":2375},{"uid":"932cc4f843010095","name":"rest_request","source":"932cc4f843010095.yaml","type":"application/yaml","size":161},{"uid":"8ca364eb27015402","name":"rest_response","source":"8ca364eb27015402.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1676400265388,"stop":1676400265404,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"e5c04b418223e48f","name":"stage_yaml","source":"e5c04b418223e48f.yaml","type":"application/yaml","size":976},{"uid":"6ea90ed295e56fdf","name":"rest_request","source":"6ea90ed295e56fdf.yaml","type":"application/yaml","size":145},{"uid":"68bb9fe1c497fad6","name":"rest_response","source":"68bb9fe1c497fad6.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1676400265405,"stop":1676400265420,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"c605f1bd4857a8f4","name":"stage_yaml","source":"c605f1bd4857a8f4.yaml","type":"application/yaml","size":1827},{"uid":"6525f8838275605f","name":"rest_request","source":"6525f8838275605f.yaml","type":"application/yaml","size":161},{"uid":"3725f1a493dc330b","name":"rest_response","source":"3725f1a493dc330b.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1676400265421,"stop":1676400265436,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"b5cf5a1e78e41469","name":"stage_yaml","source":"b5cf5a1e78e41469.yaml","type":"application/yaml","size":786},{"uid":"6c6f3d899981cbba","name":"rest_request","source":"6c6f3d899981cbba.yaml","type":"application/yaml","size":216},{"uid":"483cb200e54efbf6","name":"rest_response","source":"483cb200e54efbf6.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1676400265439,"stop":1676400281760,"duration":16321},"status":"passed","steps":[],"attachments":[{"uid":"a3bd78116db765b2","name":"stage_yaml","source":"a3bd78116db765b2.yaml","type":"application/yaml","size":684},{"uid":"bb0747fb12ab0653","name":"rest_request","source":"bb0747fb12ab0653.yaml","type":"application/yaml","size":161},{"uid":"28108ac3baea4dc7","name":"rest_response","source":"28108ac3baea4dc7.yaml","type":"application/yaml","size":628},{"uid":"583f1f46ff518d77","name":"stage_yaml","source":"583f1f46ff518d77.yaml","type":"application/yaml","size":684},{"uid":"d6d9295a70ddccd2","name":"rest_request","source":"d6d9295a70ddccd2.yaml","type":"application/yaml","size":161},{"uid":"f0829a9fe514cfb7","name":"rest_response","source":"f0829a9fe514cfb7.yaml","type":"application/yaml","size":628},{"uid":"b209e76719e90d2a","name":"stage_yaml","source":"b209e76719e90d2a.yaml","type":"application/yaml","size":684},{"uid":"8c911cf2a8132429","name":"rest_request","source":"8c911cf2a8132429.yaml","type":"application/yaml","size":161},{"uid":"958aef12590d41e2","name":"rest_response","source":"958aef12590d41e2.yaml","type":"application/yaml","size":628},{"uid":"b58222551175876a","name":"stage_yaml","source":"b58222551175876a.yaml","type":"application/yaml","size":684},{"uid":"a7db7d709e5e3bd9","name":"rest_request","source":"a7db7d709e5e3bd9.yaml","type":"application/yaml","size":161},{"uid":"52d93b9d77452b42","name":"rest_response","source":"52d93b9d77452b42.yaml","type":"application/yaml","size":628},{"uid":"c8b3a4485b0b8214","name":"stage_yaml","source":"c8b3a4485b0b8214.yaml","type":"application/yaml","size":684},{"uid":"c10a978318d4d92c","name":"rest_request","source":"c10a978318d4d92c.yaml","type":"application/yaml","size":161},{"uid":"baf18a25f0b23b9f","name":"rest_response","source":"baf18a25f0b23b9f.yaml","type":"application/yaml","size":628},{"uid":"f021522bac3c33a8","name":"stage_yaml","source":"f021522bac3c33a8.yaml","type":"application/yaml","size":684},{"uid":"d82f8f3cae34bc1f","name":"rest_request","source":"d82f8f3cae34bc1f.yaml","type":"application/yaml","size":161},{"uid":"62f9e42e7a3c9451","name":"rest_response","source":"62f9e42e7a3c9451.yaml","type":"application/yaml","size":628},{"uid":"452d9eac48f3a48c","name":"stage_yaml","source":"452d9eac48f3a48c.yaml","type":"application/yaml","size":684},{"uid":"8c7ef39cfa414ac1","name":"rest_request","source":"8c7ef39cfa414ac1.yaml","type":"application/yaml","size":161},{"uid":"63063879948db51e","name":"rest_response","source":"63063879948db51e.yaml","type":"application/yaml","size":628},{"uid":"d866996ec37ba893","name":"stage_yaml","source":"d866996ec37ba893.yaml","type":"application/yaml","size":684},{"uid":"bce45bd66ebd0075","name":"rest_request","source":"bce45bd66ebd0075.yaml","type":"application/yaml","size":161},{"uid":"c8059cd32d3b57e2","name":"rest_response","source":"c8059cd32d3b57e2.yaml","type":"application/yaml","size":628},{"uid":"c9b40eb77f7c6e3a","name":"stage_yaml","source":"c9b40eb77f7c6e3a.yaml","type":"application/yaml","size":684},{"uid":"a6839a8490717e36","name":"rest_request","source":"a6839a8490717e36.yaml","type":"application/yaml","size":161},{"uid":"d1b6749d7cf73478","name":"rest_response","source":"d1b6749d7cf73478.yaml","type":"application/yaml","size":628},{"uid":"73bd3c896c95b589","name":"stage_yaml","source":"73bd3c896c95b589.yaml","type":"application/yaml","size":684},{"uid":"77c1287c842d89dd","name":"rest_request","source":"77c1287c842d89dd.yaml","type":"application/yaml","size":161},{"uid":"a469d2ee196b1602","name":"rest_response","source":"a469d2ee196b1602.yaml","type":"application/yaml","size":628},{"uid":"32fd4ba0d9f21254","name":"stage_yaml","source":"32fd4ba0d9f21254.yaml","type":"application/yaml","size":684},{"uid":"eaa7d45c673c39fb","name":"rest_request","source":"eaa7d45c673c39fb.yaml","type":"application/yaml","size":161},{"uid":"18161519916befa5","name":"rest_response","source":"18161519916befa5.yaml","type":"application/yaml","size":628},{"uid":"817d8f5b3b8d0607","name":"stage_yaml","source":"817d8f5b3b8d0607.yaml","type":"application/yaml","size":684},{"uid":"901f79740ff0440a","name":"rest_request","source":"901f79740ff0440a.yaml","type":"application/yaml","size":161},{"uid":"26a22e84b6fa39dd","name":"rest_response","source":"26a22e84b6fa39dd.yaml","type":"application/yaml","size":628},{"uid":"2bdcabe7fde7f9bc","name":"stage_yaml","source":"2bdcabe7fde7f9bc.yaml","type":"application/yaml","size":684},{"uid":"4a2049c2e0ed7878","name":"rest_request","source":"4a2049c2e0ed7878.yaml","type":"application/yaml","size":161},{"uid":"fa387e4f265c495d","name":"rest_response","source":"fa387e4f265c495d.yaml","type":"application/yaml","size":628},{"uid":"5fca699fe13b5cd6","name":"stage_yaml","source":"5fca699fe13b5cd6.yaml","type":"application/yaml","size":684},{"uid":"33bb688f151e1615","name":"rest_request","source":"33bb688f151e1615.yaml","type":"application/yaml","size":161},{"uid":"634a6f0091d055b9","name":"rest_response","source":"634a6f0091d055b9.yaml","type":"application/yaml","size":628},{"uid":"7fa7919100b3c2a6","name":"stage_yaml","source":"7fa7919100b3c2a6.yaml","type":"application/yaml","size":684},{"uid":"b90c583d7d4786d9","name":"rest_request","source":"b90c583d7d4786d9.yaml","type":"application/yaml","size":161},{"uid":"f8bd4a4bebd15588","name":"rest_response","source":"f8bd4a4bebd15588.yaml","type":"application/yaml","size":628},{"uid":"1667a743a5f656b4","name":"stage_yaml","source":"1667a743a5f656b4.yaml","type":"application/yaml","size":684},{"uid":"57c466ab04c4a435","name":"rest_request","source":"57c466ab04c4a435.yaml","type":"application/yaml","size":161},{"uid":"45584a80c804e61f","name":"rest_response","source":"45584a80c804e61f.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1676400281761,"stop":1676400281782,"duration":21},"status":"passed","steps":[],"attachments":[{"uid":"229b8e45bf48888","name":"stage_yaml","source":"229b8e45bf48888.yaml","type":"application/yaml","size":2504},{"uid":"a286a7bb996fc6e4","name":"rest_request","source":"a286a7bb996fc6e4.yaml","type":"application/yaml","size":161},{"uid":"dc5a558e0353da3d","name":"rest_response","source":"dc5a558e0353da3d.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1676400281783,"stop":1676400281801,"duration":18},"status":"passed","steps":[],"attachments":[{"uid":"355aac415fd51911","name":"stage_yaml","source":"355aac415fd51911.yaml","type":"application/yaml","size":1806},{"uid":"6c927fe568bb9e62","name":"rest_request","source":"6c927fe568bb9e62.yaml","type":"application/yaml","size":163},{"uid":"4395dc27324707a0","name":"rest_response","source":"4395dc27324707a0.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"853d4f280cfd9a9","name":"log","source":"853d4f280cfd9a9.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"3c0e82a9f1f2"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":7,"unknown":0,"total":10},"items":[{"uid":"8951605628a21f46","status":"passed","time":{"start":1676325065473,"stop":1676325084132,"duration":18659}},{"uid":"5438918df990681e","status":"passed","time":{"start":1674515086279,"stop":1674515134326,"duration":48047}},{"uid":"fac7e4e00cc15b8b","status":"passed","time":{"start":1674505202270,"stop":1674505250360,"duration":48090}},{"uid":"de0d19d04785dcbd","status":"passed","time":{"start":1674499800068,"stop":1674499817700,"duration":17632}},{"uid":"8766c5f622a41bef","status":"passed","time":{"start":1674257325701,"stop":1674257343352,"duration":17651}},{"uid":"f32509b3774010d4","status":"passed","time":{"start":1674254758160,"stop":1674254775944,"duration":17784}},{"uid":"d6207643a1e8533a","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080250825,"stop":1674080252149,"duration":1324}},{"uid":"472f2d42e047cfd9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074977035,"stop":1674074977309,"duration":274}},{"uid":"ebb8ace6a21a76d9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074599644,"stop":1674074599865,"duration":221}}]},"tags":[]},"source":"89338137c944c42e.json","parameterValues":[]}