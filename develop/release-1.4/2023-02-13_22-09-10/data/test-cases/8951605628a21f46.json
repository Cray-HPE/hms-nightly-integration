{"uid":"8951605628a21f46","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1676325065473,"stop":1676325084132,"duration":18659},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1676325065685,"stop":1676325065724,"duration":39},"status":"passed","steps":[],"attachments":[{"uid":"48e3ecd8421d66b3","name":"stage_yaml","source":"48e3ecd8421d66b3.yaml","type":"application/yaml","size":315},{"uid":"a526d6bd9c290ce8","name":"rest_request","source":"a526d6bd9c290ce8.yaml","type":"application/yaml","size":162},{"uid":"433bd1a31ba72bc6","name":"rest_response","source":"433bd1a31ba72bc6.yaml","type":"application/yaml","size":5773}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1676325065725,"stop":1676325065737,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"da43f6dc8ef2839c","name":"stage_yaml","source":"da43f6dc8ef2839c.yaml","type":"application/yaml","size":775},{"uid":"cb41db286a0bc551","name":"rest_request","source":"cb41db286a0bc551.yaml","type":"application/yaml","size":211},{"uid":"239444db4935644b","name":"rest_response","source":"239444db4935644b.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1676325065738,"stop":1676325067777,"duration":2039},"status":"passed","steps":[],"attachments":[{"uid":"e3d481d722a4c212","name":"stage_yaml","source":"e3d481d722a4c212.yaml","type":"application/yaml","size":661},{"uid":"e315411ff0c8295b","name":"rest_request","source":"e315411ff0c8295b.yaml","type":"application/yaml","size":161},{"uid":"4898093728815658","name":"rest_response","source":"4898093728815658.yaml","type":"application/yaml","size":567},{"uid":"eabaa51be190117b","name":"stage_yaml","source":"eabaa51be190117b.yaml","type":"application/yaml","size":661},{"uid":"6987583acc69b97e","name":"rest_request","source":"6987583acc69b97e.yaml","type":"application/yaml","size":161},{"uid":"7ee406228eecac9d","name":"rest_response","source":"7ee406228eecac9d.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":6,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1676325067778,"stop":1676325067792,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"7fe703153498d0af","name":"stage_yaml","source":"7fe703153498d0af.yaml","type":"application/yaml","size":2375},{"uid":"ec8b2f0415eda33c","name":"rest_request","source":"ec8b2f0415eda33c.yaml","type":"application/yaml","size":161},{"uid":"87044954f5af545d","name":"rest_response","source":"87044954f5af545d.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1676325067793,"stop":1676325067804,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"225cdd7f54789a09","name":"stage_yaml","source":"225cdd7f54789a09.yaml","type":"application/yaml","size":976},{"uid":"3bfd87c453b2b1e8","name":"rest_request","source":"3bfd87c453b2b1e8.yaml","type":"application/yaml","size":145},{"uid":"c2f01943c83ee08e","name":"rest_response","source":"c2f01943c83ee08e.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1676325067805,"stop":1676325067816,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"cad11a4834a9597d","name":"stage_yaml","source":"cad11a4834a9597d.yaml","type":"application/yaml","size":1827},{"uid":"9b4f7c5d64364b31","name":"rest_request","source":"9b4f7c5d64364b31.yaml","type":"application/yaml","size":161},{"uid":"2a0ba6085a507451","name":"rest_response","source":"2a0ba6085a507451.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1676325067816,"stop":1676325067827,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"2bc32232c6ccfa10","name":"stage_yaml","source":"2bc32232c6ccfa10.yaml","type":"application/yaml","size":786},{"uid":"f0fb4e1e9e88706e","name":"rest_request","source":"f0fb4e1e9e88706e.yaml","type":"application/yaml","size":216},{"uid":"4b8b3b9dea7205d6","name":"rest_response","source":"4b8b3b9dea7205d6.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1676325067828,"stop":1676325084102,"duration":16274},"status":"passed","steps":[],"attachments":[{"uid":"d3a2c7315292e808","name":"stage_yaml","source":"d3a2c7315292e808.yaml","type":"application/yaml","size":684},{"uid":"f6d96d88c62870c0","name":"rest_request","source":"f6d96d88c62870c0.yaml","type":"application/yaml","size":161},{"uid":"e57cf752a6023295","name":"rest_response","source":"e57cf752a6023295.yaml","type":"application/yaml","size":626},{"uid":"e029b4a1dfc76f1c","name":"stage_yaml","source":"e029b4a1dfc76f1c.yaml","type":"application/yaml","size":684},{"uid":"6985f173f14934bb","name":"rest_request","source":"6985f173f14934bb.yaml","type":"application/yaml","size":161},{"uid":"a2a3e3c97b47bca8","name":"rest_response","source":"a2a3e3c97b47bca8.yaml","type":"application/yaml","size":626},{"uid":"9629ca840c23fb02","name":"stage_yaml","source":"9629ca840c23fb02.yaml","type":"application/yaml","size":684},{"uid":"3c4168f036a8767e","name":"rest_request","source":"3c4168f036a8767e.yaml","type":"application/yaml","size":161},{"uid":"b37c27d3b7b801bc","name":"rest_response","source":"b37c27d3b7b801bc.yaml","type":"application/yaml","size":626},{"uid":"8f2060eb707ec337","name":"stage_yaml","source":"8f2060eb707ec337.yaml","type":"application/yaml","size":684},{"uid":"72985220265489a2","name":"rest_request","source":"72985220265489a2.yaml","type":"application/yaml","size":161},{"uid":"41f60715ddd94ba7","name":"rest_response","source":"41f60715ddd94ba7.yaml","type":"application/yaml","size":626},{"uid":"b8b70946bd227d1d","name":"stage_yaml","source":"b8b70946bd227d1d.yaml","type":"application/yaml","size":684},{"uid":"c25f519fbea75893","name":"rest_request","source":"c25f519fbea75893.yaml","type":"application/yaml","size":161},{"uid":"3d5ddc841b42d663","name":"rest_response","source":"3d5ddc841b42d663.yaml","type":"application/yaml","size":626},{"uid":"a1ced0b5c4267eaf","name":"stage_yaml","source":"a1ced0b5c4267eaf.yaml","type":"application/yaml","size":684},{"uid":"f597eba2da6d60ee","name":"rest_request","source":"f597eba2da6d60ee.yaml","type":"application/yaml","size":161},{"uid":"d01715a6749b878f","name":"rest_response","source":"d01715a6749b878f.yaml","type":"application/yaml","size":626},{"uid":"2ce0a45ca6d696d5","name":"stage_yaml","source":"2ce0a45ca6d696d5.yaml","type":"application/yaml","size":684},{"uid":"452e5a38e1ba61c","name":"rest_request","source":"452e5a38e1ba61c.yaml","type":"application/yaml","size":161},{"uid":"cddbd0bd66168d4f","name":"rest_response","source":"cddbd0bd66168d4f.yaml","type":"application/yaml","size":626},{"uid":"8ace08b54767216a","name":"stage_yaml","source":"8ace08b54767216a.yaml","type":"application/yaml","size":684},{"uid":"ad2e1c05d35da28f","name":"rest_request","source":"ad2e1c05d35da28f.yaml","type":"application/yaml","size":161},{"uid":"a88237840f1722c3","name":"rest_response","source":"a88237840f1722c3.yaml","type":"application/yaml","size":626},{"uid":"d782b216b380b1b6","name":"stage_yaml","source":"d782b216b380b1b6.yaml","type":"application/yaml","size":684},{"uid":"6c7b4194419547b0","name":"rest_request","source":"6c7b4194419547b0.yaml","type":"application/yaml","size":161},{"uid":"2c24210235f3eefe","name":"rest_response","source":"2c24210235f3eefe.yaml","type":"application/yaml","size":626},{"uid":"2b71a42841320339","name":"stage_yaml","source":"2b71a42841320339.yaml","type":"application/yaml","size":684},{"uid":"486cce43db479afe","name":"rest_request","source":"486cce43db479afe.yaml","type":"application/yaml","size":161},{"uid":"1e73b243467ed7f0","name":"rest_response","source":"1e73b243467ed7f0.yaml","type":"application/yaml","size":626},{"uid":"40aaccfbed2556f8","name":"stage_yaml","source":"40aaccfbed2556f8.yaml","type":"application/yaml","size":684},{"uid":"edc48dcbc23da35b","name":"rest_request","source":"edc48dcbc23da35b.yaml","type":"application/yaml","size":161},{"uid":"d9589bc4578d7f4e","name":"rest_response","source":"d9589bc4578d7f4e.yaml","type":"application/yaml","size":626},{"uid":"f4bb5e68e8c551b6","name":"stage_yaml","source":"f4bb5e68e8c551b6.yaml","type":"application/yaml","size":684},{"uid":"f080a31e1c13577f","name":"rest_request","source":"f080a31e1c13577f.yaml","type":"application/yaml","size":161},{"uid":"797c567a163bb4c8","name":"rest_response","source":"797c567a163bb4c8.yaml","type":"application/yaml","size":626},{"uid":"aa31f04df102894b","name":"stage_yaml","source":"aa31f04df102894b.yaml","type":"application/yaml","size":684},{"uid":"e2034dc658713118","name":"rest_request","source":"e2034dc658713118.yaml","type":"application/yaml","size":161},{"uid":"678d373af5ed37a8","name":"rest_response","source":"678d373af5ed37a8.yaml","type":"application/yaml","size":626},{"uid":"520aa03b3197c358","name":"stage_yaml","source":"520aa03b3197c358.yaml","type":"application/yaml","size":684},{"uid":"5cf3cc87e107e68e","name":"rest_request","source":"5cf3cc87e107e68e.yaml","type":"application/yaml","size":161},{"uid":"91151722c3cf83be","name":"rest_response","source":"91151722c3cf83be.yaml","type":"application/yaml","size":626},{"uid":"e65d5a3731888491","name":"stage_yaml","source":"e65d5a3731888491.yaml","type":"application/yaml","size":684},{"uid":"ce8d7352438d5b9a","name":"rest_request","source":"ce8d7352438d5b9a.yaml","type":"application/yaml","size":161},{"uid":"214ced147e5c5ac2","name":"rest_response","source":"214ced147e5c5ac2.yaml","type":"application/yaml","size":626},{"uid":"40d029fb0915e239","name":"stage_yaml","source":"40d029fb0915e239.yaml","type":"application/yaml","size":684},{"uid":"cfe1f2a1f925eb8b","name":"rest_request","source":"cfe1f2a1f925eb8b.yaml","type":"application/yaml","size":161},{"uid":"5f0dde30d3e9aefa","name":"rest_response","source":"5f0dde30d3e9aefa.yaml","type":"application/yaml","size":624}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1676325084103,"stop":1676325084119,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"be0be7c74507356","name":"stage_yaml","source":"be0be7c74507356.yaml","type":"application/yaml","size":2504},{"uid":"d5ff8e69ba68e5c","name":"rest_request","source":"d5ff8e69ba68e5c.yaml","type":"application/yaml","size":161},{"uid":"3859d2ebe23bd5fc","name":"rest_response","source":"3859d2ebe23bd5fc.yaml","type":"application/yaml","size":624}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1676325084119,"stop":1676325084131,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"b50d9e329cfe8954","name":"stage_yaml","source":"b50d9e329cfe8954.yaml","type":"application/yaml","size":1806},{"uid":"797875d7a1a1ffc3","name":"rest_request","source":"797875d7a1a1ffc3.yaml","type":"application/yaml","size":163},{"uid":"52bee91981fb7f40","name":"rest_response","source":"52bee91981fb7f40.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"35881501dad7cad5","name":"log","source":"35881501dad7cad5.txt","type":"text/plain","size":62017}],"parameters":[],"stepsCount":10,"attachmentsCount":79,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"304f7ece69ff"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":6,"unknown":0,"total":9},"items":[{"uid":"5438918df990681e","status":"passed","time":{"start":1674515086279,"stop":1674515134326,"duration":48047}},{"uid":"fac7e4e00cc15b8b","status":"passed","time":{"start":1674505202270,"stop":1674505250360,"duration":48090}},{"uid":"de0d19d04785dcbd","status":"passed","time":{"start":1674499800068,"stop":1674499817700,"duration":17632}},{"uid":"8766c5f622a41bef","status":"passed","time":{"start":1674257325701,"stop":1674257343352,"duration":17651}},{"uid":"f32509b3774010d4","status":"passed","time":{"start":1674254758160,"stop":1674254775944,"duration":17784}},{"uid":"d6207643a1e8533a","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080250825,"stop":1674080252149,"duration":1324}},{"uid":"472f2d42e047cfd9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074977035,"stop":1674074977309,"duration":274}},{"uid":"ebb8ace6a21a76d9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074599644,"stop":1674074599865,"duration":221}}]},"tags":[]},"source":"8951605628a21f46.json","parameterValues":[]}