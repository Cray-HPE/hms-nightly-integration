{"uid":"a3eaef4e5136a479","name":"Verify transitions handles requests for nodes that are locked","fullName":"api.2-disruptive.test_transitions_negative.tavern#Verify transitions handles requests for nodes that are locked","historyId":"7c6d7722b0d558d7cf87ba61b253e04c","time":{"start":1678224632003,"stop":1678224649631,"duration":17628},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Stage 0: Retrieve an unlocked compute Node target from HSM to use in later stages","time":{"start":1678224632221,"stop":1678224632265,"duration":44},"status":"passed","steps":[],"attachments":[{"uid":"628c4c90d035b056","name":"stage_yaml","source":"628c4c90d035b056.yaml","type":"application/yaml","size":315},{"uid":"3bf9b59649b5049d","name":"rest_request","source":"3bf9b59649b5049d.yaml","type":"application/yaml","size":162},{"uid":"d64ffdae80e2bca","name":"rest_response","source":"d64ffdae80e2bca.yaml","type":"application/yaml","size":5774}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: Power the target node on to prepare it for the test case","time":{"start":1678224632266,"stop":1678224632280,"duration":14},"status":"passed","steps":[],"attachments":[{"uid":"331a919e8adba4a4","name":"stage_yaml","source":"331a919e8adba4a4.yaml","type":"application/yaml","size":775},{"uid":"18153d26db949db1","name":"rest_request","source":"18153d26db949db1.yaml","type":"application/yaml","size":211},{"uid":"58778569198f1c00","name":"rest_response","source":"58778569198f1c00.yaml","type":"application/yaml","size":287}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: Poll until the on transition operation has completed","time":{"start":1678224632283,"stop":1678224633300,"duration":1017},"status":"passed","steps":[],"attachments":[{"uid":"46ac8e95df12cd9d","name":"stage_yaml","source":"46ac8e95df12cd9d.yaml","type":"application/yaml","size":661},{"uid":"82813d8c9cb8355d","name":"rest_request","source":"82813d8c9cb8355d.yaml","type":"application/yaml","size":161},{"uid":"42984d400f3b1ca9","name":"rest_response","source":"42984d400f3b1ca9.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: Retrieve the completed on transition data","time":{"start":1678224633301,"stop":1678224633316,"duration":15},"status":"passed","steps":[],"attachments":[{"uid":"cb6d5c177533dd7","name":"stage_yaml","source":"cb6d5c177533dd7.yaml","type":"application/yaml","size":2375},{"uid":"a78e7d9224574f60","name":"rest_request","source":"a78e7d9224574f60.yaml","type":"application/yaml","size":161},{"uid":"25c6776123683fa3","name":"rest_response","source":"25c6776123683fa3.yaml","type":"application/yaml","size":591}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: Verify that the target node is powered on using power-status","time":{"start":1678224633317,"stop":1678224633328,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"aae929d7b8e11427","name":"stage_yaml","source":"aae929d7b8e11427.yaml","type":"application/yaml","size":976},{"uid":"ce7030af83ed6269","name":"rest_request","source":"ce7030af83ed6269.yaml","type":"application/yaml","size":145},{"uid":"c1ee85ac1b3c2923","name":"rest_response","source":"c1ee85ac1b3c2923.yaml","type":"application/yaml","size":438}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: Lock the target Node","time":{"start":1678224633329,"stop":1678224633341,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"cc8706e763b32b69","name":"stage_yaml","source":"cc8706e763b32b69.yaml","type":"application/yaml","size":1827},{"uid":"7aa778daa1842a05","name":"rest_request","source":"7aa778daa1842a05.yaml","type":"application/yaml","size":161},{"uid":"f310e24814e47efd","name":"rest_response","source":"f310e24814e47efd.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: Attempt a power transition for a locked node","time":{"start":1678224633342,"stop":1678224633353,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"42b2d692992fd1e4","name":"stage_yaml","source":"42b2d692992fd1e4.yaml","type":"application/yaml","size":786},{"uid":"1ef93a2ae0313a26","name":"rest_request","source":"1ef93a2ae0313a26.yaml","type":"application/yaml","size":216},{"uid":"c55dffb3e9ced173","name":"rest_response","source":"c55dffb3e9ced173.yaml","type":"application/yaml","size":292}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: Poll until the force-off transition operation has completed","time":{"start":1678224633355,"stop":1678224649601,"duration":16246},"status":"passed","steps":[],"attachments":[{"uid":"6858554515e0568a","name":"stage_yaml","source":"6858554515e0568a.yaml","type":"application/yaml","size":684},{"uid":"14b55bb2daf412cb","name":"rest_request","source":"14b55bb2daf412cb.yaml","type":"application/yaml","size":161},{"uid":"9bfaa14effae828d","name":"rest_response","source":"9bfaa14effae828d.yaml","type":"application/yaml","size":628},{"uid":"470751f6adff6cc3","name":"stage_yaml","source":"470751f6adff6cc3.yaml","type":"application/yaml","size":684},{"uid":"2cad049a54ddd9d6","name":"rest_request","source":"2cad049a54ddd9d6.yaml","type":"application/yaml","size":161},{"uid":"b269754ad5836fd1","name":"rest_response","source":"b269754ad5836fd1.yaml","type":"application/yaml","size":628},{"uid":"d9f613743b045cfa","name":"stage_yaml","source":"d9f613743b045cfa.yaml","type":"application/yaml","size":684},{"uid":"cdbd6329a2335465","name":"rest_request","source":"cdbd6329a2335465.yaml","type":"application/yaml","size":161},{"uid":"bb247dcd6b09701c","name":"rest_response","source":"bb247dcd6b09701c.yaml","type":"application/yaml","size":628},{"uid":"7c2cea31ec304fb4","name":"stage_yaml","source":"7c2cea31ec304fb4.yaml","type":"application/yaml","size":684},{"uid":"4d5e92df95a3e67c","name":"rest_request","source":"4d5e92df95a3e67c.yaml","type":"application/yaml","size":161},{"uid":"a9315e40e0780e45","name":"rest_response","source":"a9315e40e0780e45.yaml","type":"application/yaml","size":628},{"uid":"1229a56861660e88","name":"stage_yaml","source":"1229a56861660e88.yaml","type":"application/yaml","size":684},{"uid":"a8ce96d08cc27263","name":"rest_request","source":"a8ce96d08cc27263.yaml","type":"application/yaml","size":161},{"uid":"7b1e416d4131359c","name":"rest_response","source":"7b1e416d4131359c.yaml","type":"application/yaml","size":628},{"uid":"f25bd2eb23236b9a","name":"stage_yaml","source":"f25bd2eb23236b9a.yaml","type":"application/yaml","size":684},{"uid":"14514e20934e1f5a","name":"rest_request","source":"14514e20934e1f5a.yaml","type":"application/yaml","size":161},{"uid":"71108e31d0a38ff5","name":"rest_response","source":"71108e31d0a38ff5.yaml","type":"application/yaml","size":628},{"uid":"a163708f91abf418","name":"stage_yaml","source":"a163708f91abf418.yaml","type":"application/yaml","size":684},{"uid":"bbf2e2e248947226","name":"rest_request","source":"bbf2e2e248947226.yaml","type":"application/yaml","size":161},{"uid":"d01245475993b7da","name":"rest_response","source":"d01245475993b7da.yaml","type":"application/yaml","size":628},{"uid":"b43be4baac33e3b8","name":"stage_yaml","source":"b43be4baac33e3b8.yaml","type":"application/yaml","size":684},{"uid":"840c75f17568871e","name":"rest_request","source":"840c75f17568871e.yaml","type":"application/yaml","size":161},{"uid":"a8947ed8e7532348","name":"rest_response","source":"a8947ed8e7532348.yaml","type":"application/yaml","size":628},{"uid":"f6cfec6c823e136e","name":"stage_yaml","source":"f6cfec6c823e136e.yaml","type":"application/yaml","size":684},{"uid":"88505ee1bac5bbe3","name":"rest_request","source":"88505ee1bac5bbe3.yaml","type":"application/yaml","size":161},{"uid":"712a8aeea594e81f","name":"rest_response","source":"712a8aeea594e81f.yaml","type":"application/yaml","size":628},{"uid":"3581714362359c3c","name":"stage_yaml","source":"3581714362359c3c.yaml","type":"application/yaml","size":684},{"uid":"5b5c342b4250ac5d","name":"rest_request","source":"5b5c342b4250ac5d.yaml","type":"application/yaml","size":161},{"uid":"ac1c65db19c01cfb","name":"rest_response","source":"ac1c65db19c01cfb.yaml","type":"application/yaml","size":628},{"uid":"9d20c9d35201d3ce","name":"stage_yaml","source":"9d20c9d35201d3ce.yaml","type":"application/yaml","size":684},{"uid":"b18d94b6069bb39c","name":"rest_request","source":"b18d94b6069bb39c.yaml","type":"application/yaml","size":161},{"uid":"518d40fa555bde0f","name":"rest_response","source":"518d40fa555bde0f.yaml","type":"application/yaml","size":628},{"uid":"e17d76d00b9fe18a","name":"stage_yaml","source":"e17d76d00b9fe18a.yaml","type":"application/yaml","size":684},{"uid":"d6c3b72affc7c2d3","name":"rest_request","source":"d6c3b72affc7c2d3.yaml","type":"application/yaml","size":161},{"uid":"e78a7890a5155b89","name":"rest_response","source":"e78a7890a5155b89.yaml","type":"application/yaml","size":628},{"uid":"d6c593c7a62e72c9","name":"stage_yaml","source":"d6c593c7a62e72c9.yaml","type":"application/yaml","size":684},{"uid":"1bba359689a022c7","name":"rest_request","source":"1bba359689a022c7.yaml","type":"application/yaml","size":161},{"uid":"f650eabe18df5e5f","name":"rest_response","source":"f650eabe18df5e5f.yaml","type":"application/yaml","size":628},{"uid":"adb88cb52e2c6da5","name":"stage_yaml","source":"adb88cb52e2c6da5.yaml","type":"application/yaml","size":684},{"uid":"34b5f59f8348b5ab","name":"rest_request","source":"34b5f59f8348b5ab.yaml","type":"application/yaml","size":161},{"uid":"f62027c75cce0de5","name":"rest_response","source":"f62027c75cce0de5.yaml","type":"application/yaml","size":628},{"uid":"51909785c185e8cc","name":"stage_yaml","source":"51909785c185e8cc.yaml","type":"application/yaml","size":684},{"uid":"5a134e6e81147077","name":"rest_request","source":"5a134e6e81147077.yaml","type":"application/yaml","size":161},{"uid":"826296c7ef0bcf2b","name":"rest_response","source":"826296c7ef0bcf2b.yaml","type":"application/yaml","size":628},{"uid":"97d5130f1d2741a1","name":"stage_yaml","source":"97d5130f1d2741a1.yaml","type":"application/yaml","size":684},{"uid":"d258d7f9d7778496","name":"rest_request","source":"d258d7f9d7778496.yaml","type":"application/yaml","size":161},{"uid":"a974300940c8010a","name":"rest_response","source":"a974300940c8010a.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":48,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: Retrieve the completed on transition data","time":{"start":1678224649602,"stop":1678224649618,"duration":16},"status":"passed","steps":[],"attachments":[{"uid":"9206c9642dc36f58","name":"stage_yaml","source":"9206c9642dc36f58.yaml","type":"application/yaml","size":2504},{"uid":"e8a240234bab9652","name":"rest_request","source":"e8a240234bab9652.yaml","type":"application/yaml","size":161},{"uid":"fa384006a07fa54","name":"rest_response","source":"fa384006a07fa54.yaml","type":"application/yaml","size":626}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: Unlock the target Node","time":{"start":1678224649619,"stop":1678224649631,"duration":12},"status":"passed","steps":[],"attachments":[{"uid":"688c18b28634ad2d","name":"stage_yaml","source":"688c18b28634ad2d.yaml","type":"application/yaml","size":1806},{"uid":"999690b650410caf","name":"rest_request","source":"999690b650410caf.yaml","type":"application/yaml","size":163},{"uid":"58184f314358d01f","name":"rest_response","source":"58184f314358d01f.yaml","type":"application/yaml","size":269}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true}],"attachments":[{"uid":"1d905c8375d309f8","name":"log","source":"1d905c8375d309f8.txt","type":"text/plain","size":58229}],"parameters":[],"stepsCount":10,"attachmentsCount":76,"shouldDisplayMessage":false,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-power-control-hmth-test"},{"name":"suite","value":"2-disruptive"},{"name":"host","value":"dba8a419bd12"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_transitions_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":10,"unknown":0,"total":13},"items":[{"uid":"66904de45dfa9a57","status":"passed","time":{"start":1678221219533,"stop":1678221238195,"duration":18662}},{"uid":"abeb015464792c6f","status":"passed","time":{"start":1678217530419,"stop":1678217548050,"duration":17631}},{"uid":"89338137c944c42e","status":"passed","time":{"start":1676400263957,"stop":1676400281802,"duration":17845}},{"uid":"8951605628a21f46","status":"passed","time":{"start":1676325065473,"stop":1676325084132,"duration":18659}},{"uid":"5438918df990681e","status":"passed","time":{"start":1674515086279,"stop":1674515134326,"duration":48047}},{"uid":"fac7e4e00cc15b8b","status":"passed","time":{"start":1674505202270,"stop":1674505250360,"duration":48090}},{"uid":"de0d19d04785dcbd","status":"passed","time":{"start":1674499800068,"stop":1674499817700,"duration":17632}},{"uid":"8766c5f622a41bef","status":"passed","time":{"start":1674257325701,"stop":1674257343352,"duration":17651}},{"uid":"f32509b3774010d4","status":"passed","time":{"start":1674254758160,"stop":1674254775944,"duration":17784}},{"uid":"d6207643a1e8533a","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'Attempt a power transition for a locked node' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f0b0c336c10>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Enum 'ForceOff' does not exist. Path: '/operation' Enum: ['Force-Off'].: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1674080250825,"stop":1674080252149,"duration":1324}},{"uid":"472f2d42e047cfd9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074977035,"stop":1674074977309,"duration":274}},{"uid":"ebb8ace6a21a76d9","status":"failed","statusDetails":"tavern.util.exceptions.MissingFormatError: transition_on_task_deadline_minutes","time":{"start":1674074599644,"stop":1674074599865,"duration":221}}]},"tags":[]},"source":"a3eaef4e5136a479.json","parameterValues":[]}