{"uid":"fec3a5342d2d87c3","name":"hsmAPIinventoryHardwareNegative","fullName":"api.2-disruptive.test_hardware_negative.tavern#hsmAPIinventoryHardwareNegative","historyId":"e127ebad6b088b5556d273620f105351","time":{"start":1689625682291,"stop":1689625682406,"duration":115},"status":"failed","statusMessage":"tavern.util.exceptions.TestFailError: Test 'hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f2ea1a8c430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'Nodes' was not defined. Path: ''.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","statusTrace":"Format variables:\n  hsm_base_url = 'http://cray-smd:27779'\n  verify = 'False'\n\nSource test stage (line 480):\n  - name: hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.\n    request:\n      url: \"{hsm_base_url}/hsm/v2/Inventory/Hardware/Query/x9999c7s9b9n9?children=False\"\n      method: GET\n      verify: !bool \"{verify}\"\n    response:\n      status_code: 200\n      verify_response_with:\n        function: tavern.testutils.helpers:validate_pykwalify\n        extra_kwargs:\n          schema:\n            type: map\n            required: True\n            mapping:\n              XName:\n                type: str\n                required: True\n                enum:\n                  - \"x9999c7s9b9n9\"\n              Format:\n                type: str\n                required: True\n                enum:\n                  - \"NestNodesOnly\"\n\n\n\n\nFormatted stage:\n  name: hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node\n    Hardware Inventory entries with an xname that doesn't exist using GET.\n  request:\n    method: GET\n    url: 'http://cray-smd:27779/hsm/v2/Inventory/Hardware/Query/x9999c7s9b9n9?children=False'\n    verify: !bool 'False'\n  response:\n    status_code: 200\n    verify_response_with:\n      extra_kwargs:\n        schema:\n          mapping:\n            Format:\n              enum:\n              - NestNodesOnly\n              required: true\n              type: str\n            XName:\n              enum:\n              - x9999c7s9b9n9\n              required: true\n              type: str\n          required: true\n          type: map\n      function: tavern.testutils.helpers:validate_pykwalify\n\nErrors:\nE   tavern.util.exceptions.TestFailError: Test 'hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.' failed:\n    - Error calling validate function '<function validate_pykwalify at 0x7f2ea1a8c430>':\n        Traceback (most recent call last):\n          File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n            verifier.validate()\n          File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n            raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n        pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n         - Key 'Nodes' was not defined. Path: ''.: Path: '/'>\n    \n        The above exception was the direct cause of the following exception:\n    \n        Traceback (most recent call last):\n          File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n            vf(response)\n          File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n            result = func(response, *args, **kwargs)\n          File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n            verify_generic(to_verify, schema)\n          File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n            raise BadSchemaError() from e\n        tavern.util.exceptions.BadSchemaError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"tavern.util.exceptions.TestFailError: Test 'hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f2ea1a8c430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'Nodes' was not defined. Path: ''.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","statusTrace":"Format variables:\n  hsm_base_url = 'http://cray-smd:27779'\n  verify = 'False'\n\nSource test stage (line 480):\n  - name: hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.\n    request:\n      url: \"{hsm_base_url}/hsm/v2/Inventory/Hardware/Query/x9999c7s9b9n9?children=False\"\n      method: GET\n      verify: !bool \"{verify}\"\n    response:\n      status_code: 200\n      verify_response_with:\n        function: tavern.testutils.helpers:validate_pykwalify\n        extra_kwargs:\n          schema:\n            type: map\n            required: True\n            mapping:\n              XName:\n                type: str\n                required: True\n                enum:\n                  - \"x9999c7s9b9n9\"\n              Format:\n                type: str\n                required: True\n                enum:\n                  - \"NestNodesOnly\"\n\n\n\n\nFormatted stage:\n  name: hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node\n    Hardware Inventory entries with an xname that doesn't exist using GET.\n  request:\n    method: GET\n    url: 'http://cray-smd:27779/hsm/v2/Inventory/Hardware/Query/x9999c7s9b9n9?children=False'\n    verify: !bool 'False'\n  response:\n    status_code: 200\n    verify_response_with:\n      extra_kwargs:\n        schema:\n          mapping:\n            Format:\n              enum:\n              - NestNodesOnly\n              required: true\n              type: str\n            XName:\n              enum:\n              - x9999c7s9b9n9\n              required: true\n              type: str\n          required: true\n          type: map\n      function: tavern.testutils.helpers:validate_pykwalify\n\nErrors:\nE   tavern.util.exceptions.TestFailError: Test 'hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.' failed:\n    - Error calling validate function '<function validate_pykwalify at 0x7f2ea1a8c430>':\n        Traceback (most recent call last):\n          File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n            verifier.validate()\n          File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n            raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n        pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n         - Key 'Nodes' was not defined. Path: ''.: Path: '/'>\n    \n        The above exception was the direct cause of the following exception:\n    \n        Traceback (most recent call last):\n          File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n            vf(response)\n          File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n            result = func(response, *args, **kwargs)\n          File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n            verify_generic(to_verify, schema)\n          File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n            raise BadSchemaError() from e\n        tavern.util.exceptions.BadSchemaError","steps":[{"name":"Stage 0: hsmAPIinventoryHardwarePOSTcmmRectifierMissingID - Attempt to create a CMMRectifier Hardware Inventory entry with a missing ID using POST.","time":{"start":1689625682300,"stop":1689625682313,"duration":13},"status":"passed","steps":[],"attachments":[{"uid":"1f8196193fee7b2d","name":"stage_yaml","source":"1f8196193fee7b2d.yaml","type":"application/yaml","size":1543},{"uid":"969e21e001b1dbd6","name":"rest_request","source":"969e21e001b1dbd6.yaml","type":"application/yaml","size":761},{"uid":"c4259fbc7279a376","name":"rest_response","source":"c4259fbc7279a376.yaml","type":"application/yaml","size":259}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 1: hsmAPIinventoryHardwarePOSTchassisEmptyID - Attempt to create a Chassis Hardware Inventory entry with an empty ID using POST.","time":{"start":1689625682314,"stop":1689625682325,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"e7f371f651774645","name":"stage_yaml","source":"e7f371f651774645.yaml","type":"application/yaml","size":1575},{"uid":"bb6a1f2eeeb567f4","name":"rest_request","source":"bb6a1f2eeeb567f4.yaml","type":"application/yaml","size":726},{"uid":"f80e272ef1327586","name":"rest_response","source":"f80e272ef1327586.yaml","type":"application/yaml","size":259}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 2: hsmAPIinventoryHardwarePOSTmemoryMissingPopulatedFRU - Attempt to create a Memory Hardware Inventory entry with missing PopulatedFRU data using POST.","time":{"start":1689625682326,"stop":1689625682334,"duration":8},"status":"passed","steps":[],"attachments":[{"uid":"c0a5a5a78cfb3db2","name":"stage_yaml","source":"c0a5a5a78cfb3db2.yaml","type":"application/yaml","size":1044},{"uid":"e951c9b9a4114e6b","name":"rest_request","source":"e951c9b9a4114e6b.yaml","type":"application/yaml","size":171},{"uid":"f4f2f809847a2a0c","name":"rest_response","source":"f4f2f809847a2a0c.yaml","type":"application/yaml","size":257}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 3: hsmAPIinventoryHardwarePOSTnodeBMCmissingLocation - Attempt to create a NodeBMC Hardware Inventory entry with missing location data using POST.","time":{"start":1689625682335,"stop":1689625682344,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"550cab27db080c18","name":"stage_yaml","source":"550cab27db080c18.yaml","type":"application/yaml","size":1271},{"uid":"7c2394fdab9d5350","name":"rest_request","source":"7c2394fdab9d5350.yaml","type":"application/yaml","size":453},{"uid":"4a6ccf71adab9049","name":"rest_response","source":"4a6ccf71adab9049.yaml","type":"application/yaml","size":259}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 4: hsmAPIinventoryHardwarePOSTnodeEnclosureEmptyPopulatedFRU - Attempt to create a NodeEnclosure Hardware Inventory entry with empty PopulatedFRU data using POST.","time":{"start":1689625682345,"stop":1689625682354,"duration":9},"status":"passed","steps":[],"attachments":[{"uid":"6450a0ee14b53873","name":"stage_yaml","source":"6450a0ee14b53873.yaml","type":"application/yaml","size":1196},{"uid":"1626bb0af2f81fe1","name":"rest_request","source":"1626bb0af2f81fe1.yaml","type":"application/yaml","size":338},{"uid":"a810cda14ef09a9a","name":"rest_response","source":"a810cda14ef09a9a.yaml","type":"application/yaml","size":243}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 5: hsmAPIinventoryHardwarePOSTnodeHsnNicInvalidXname - Attempt to create a NodeHsnNic Hardware Inventory entry with an invalid xname using POST.","time":{"start":1689625682355,"stop":1689625682366,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"9e060ba9220f51b0","name":"stage_yaml","source":"9e060ba9220f51b0.yaml","type":"application/yaml","size":1497},{"uid":"10df05e564af5daf","name":"rest_request","source":"10df05e564af5daf.yaml","type":"application/yaml","size":686},{"uid":"a5d28615fac30cd1","name":"rest_response","source":"a5d28615fac30cd1.yaml","type":"application/yaml","size":259}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 6: hsmAPIinventoryHardwareXnameGETnonExistentNode - Attempt to retrieve a Hardware Inventory entry for a node that doesn't exist using GET.","time":{"start":1689625682366,"stop":1689625682377,"duration":11},"status":"passed","steps":[],"attachments":[{"uid":"3977ce86a1c39638","name":"stage_yaml","source":"3977ce86a1c39638.yaml","type":"application/yaml","size":976},{"uid":"76984256e82ad2f7","name":"rest_request","source":"76984256e82ad2f7.yaml","type":"application/yaml","size":142},{"uid":"c5dc1f323f46e045","name":"rest_response","source":"c5dc1f323f46e045.yaml","type":"application/yaml","size":238}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 7: hsmAPIinventoryHardwareGETidParamInvalid - Attempt to retrieve Hardware Inventory entries using GET with an invalid id query parameter.","time":{"start":1689625682378,"stop":1689625682385,"duration":7},"status":"passed","steps":[],"attachments":[{"uid":"9850d2e10853ee9c","name":"stage_yaml","source":"9850d2e10853ee9c.yaml","type":"application/yaml","size":970},{"uid":"7a36fba74a800680","name":"rest_request","source":"7a36fba74a800680.yaml","type":"application/yaml","size":136},{"uid":"7ca7142bb9ce3fbc","name":"rest_response","source":"7ca7142bb9ce3fbc.yaml","type":"application/yaml","size":239}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 8: hsmAPIinventoryHardwareGETtypeParamInvalid - Attempt to retrieve Hardware Inventory entries using GET with an invalid type query parameter.","time":{"start":1689625682386,"stop":1689625682393,"duration":7},"status":"passed","steps":[],"attachments":[{"uid":"f0c76646471fdc6a","name":"stage_yaml","source":"f0c76646471fdc6a.yaml","type":"application/yaml","size":979},{"uid":"a7044947130ce4fd","name":"rest_request","source":"a7044947130ce4fd.yaml","type":"application/yaml","size":138},{"uid":"af3c2316a6359eb7","name":"rest_response","source":"af3c2316a6359eb7.yaml","type":"application/yaml","size":242}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":false,"hasContent":true},{"name":"Stage 9: hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.","time":{"start":1689625682394,"stop":1689625682406,"duration":12},"status":"failed","statusMessage":"tavern.util.exceptions.TestFailError: Test 'hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7f2ea1a8c430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'Nodes' was not defined. Path: ''.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError\n\n","statusTrace":"  File \"/usr/lib/python3.9/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/usr/lib/python3.9/site-packages/tavern/util/retry.py\", line 31, in wrapped\n    res = fn(*args, **kwargs)\n  File \"/usr/lib/python3.9/site-packages/tavern/core.py\", line 270, in run_stage\n    saved = v.verify(response)\n  File \"/usr/lib/python3.9/site-packages/tavern/_plugins/rest/response.py\", line 201, in verify\n    raise exceptions.TestFailError(\n","steps":[],"attachments":[{"uid":"2d6546401c0988f6","name":"stage_yaml","source":"2d6546401c0988f6.yaml","type":"application/yaml","size":776},{"uid":"219e35d8de58f1f","name":"rest_request","source":"219e35d8de58f1f.yaml","type":"application/yaml","size":163},{"uid":"4430252822c4378e","name":"rest_response","source":"4430252822c4378e.yaml","type":"application/yaml","size":1013}],"parameters":[],"stepsCount":0,"attachmentsCount":3,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[{"uid":"38e2a9c5b534204f","name":"error_output","source":"38e2a9c5b534204f.attach","type":"text/plain","size":3309},{"uid":"98477b04c0b06b16","name":"log","source":"98477b04c0b06b16.txt","type":"text/plain","size":4032}],"parameters":[],"stepsCount":10,"attachmentsCount":32,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"parentSuite","value":"cray-smd-hmth-test"},{"name":"suite","value":"disruptive"},{"name":"host","value":"28b68c9e39ed"},{"name":"thread","value":"8-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"api.2-disruptive.test_hardware_negative.tavern"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":2},"items":[{"uid":"b33ca3680332d852","status":"failed","statusDetails":"tavern.util.exceptions.TestFailError: Test 'hsmAPIinventoryHardwareQueryXnameGETnonExistentNode - Attempt to query for Node Hardware Inventory entries with an xname that doesn't exist using GET.' failed:\n- Error calling validate function '<function validate_pykwalify at 0x7fa78c092430>':\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 106, in verify_generic\n        verifier.validate()\n      File \"/usr/lib/python3.9/site-packages/pykwalify/core.py\", line 194, in validate\n        raise SchemaError(u\"Schema validation failed:\\n - {error_msg}.\".format(\n    pykwalify.errors.SchemaError: <SchemaError: error code 2: Schema validation failed:\n     - Key 'Nodes' was not defined. Path: ''.: Path: '/'>\n\n    The above exception was the direct cause of the following exception:\n\n    Traceback (most recent call last):\n      File \"/usr/lib/python3.9/site-packages/tavern/response/base.py\", line 152, in _maybe_run_validate_functions\n        vf(response)\n      File \"/usr/lib/python3.9/site-packages/tavern/util/extfunctions.py\", line 98, in inner\n        result = func(response, *args, **kwargs)\n      File \"/usr/lib/python3.9/site-packages/tavern/testutils/helpers.py\", line 103, in validate_pykwalify\n        verify_generic(to_verify, schema)\n      File \"/usr/lib/python3.9/site-packages/tavern/schemas/files.py\", line 109, in verify_generic\n        raise BadSchemaError() from e\n    tavern.util.exceptions.BadSchemaError","time":{"start":1689614416391,"stop":1689614416508,"duration":117}}]},"tags":[]},"source":"fec3a5342d2d87c3.json","parameterValues":[]}